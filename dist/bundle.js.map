{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/app.js","src/bit_stream.js","src/bitmap.js","src/buffer_stream.js","src/resource.js","src/scumm/index.js","src/scumm/room.js","src/scumm/room_object.js","src/ui/container.js","src/ui/list.js","src/ui/workspace.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","const Container = require('./ui/container');\nconst Workspace = require('./ui/workspace');\nconst List = require('./ui/list');\n\nconst Resource = require('./resource');\nconst Scumm = require('./scumm');\nconst Bitmap = require('./bitmap');\n\nconst INDEX_FILE = 'monkey2.000';\nconst BUNDLE_FILE = 'monkey2.001';\n\n// const INDEX_FILE = 'mi2demo.000';\n// const BUNDLE_FILE = 'mi2demo.001';\n\nclass App {\n  constructor() {\n    console.log('init');\n\n    this.files = [];\n\n    this.resource = new Resource();\n\n    this.offscreen = document.createElement('canvas');\n    this.offscreen.width = 320;\n    this.offscreen.height = 200;\n\n    this.canvasImages = [];\n\n    this.el = document.getElementById('workspace');\n\n    window.addEventListener('DOMContentLoaded', () => {\n      this.createElements();\n      this.initEventListeners();\n    });\n  }\n\n  decode(buffer, enc=0) {\n    let temp = new Uint8Array(buffer);\n    for (var i = 0; i < temp.length; i++) {\n      temp[i] = temp[i] ^ enc;\n    }\n    return temp.buffer;\n  }\n\n  updatePalette() {\n    let palette = this.palette;\n\n    let paletteEl = this.paletteEl;\n    while(paletteEl.firstChild) paletteEl.removeChild(paletteEl.firstChild);\n\n    if (palette) {\n      for (var i = 0; i < 256; i++) {\n        let r = palette[i*3];\n        let g = palette[i*3 + 1];\n        let b = palette[i*3 + 2];\n        let swatch = document.createElement('div');\n        swatch.classList.add('palette-swatch');\n        swatch.style.backgroundColor = 'rgb(' + r + ',' + g + ',' + b + ')';\n        // swatch.title = 'Index: ' + i + '\\n' + 'RGB: ' + r + ', ' + g + ', ' + b;\n        paletteEl.appendChild(swatch);\n      }\n    }\n  }\n\n  updateRoomImage() {\n    if (!this.room) return;\n    let room = this.room;\n\n    let width = room.width;\n    let height = room.height;\n\n    this.offscreen.width = width;\n    this.offscreen.height = height;\n\n    let ctx = this.offscreen.getContext('2d');\n    ctx.clearRect(0, 0, this.offscreen.width, this.offscreen.height);\n\n    if (room.bitmap) {\n      let imageData = ctx.getImageData(0, 0, width, height);\n\n      for (var i = 0; i < room.bitmap.length; i++) {\n        let index = room.bitmap[i];\n        imageData.data[i * 4 + 0] = this.palette[index * 3 + 0];\n        imageData.data[i * 4 + 1] = this.palette[index * 3 + 1];\n        imageData.data[i * 4 + 2] = this.palette[index * 3 + 2];\n        imageData.data[i * 4 + 3] = 255;\n      }\n\n      ctx.putImageData(imageData, 0, 0);\n\n      this.imageContainer.setSize(width, height);\n    }\n\n    let canvas = this.canvas;\n    canvas.title = room.name;\n    canvas.width = width;\n    canvas.height = height;\n\n    ctx = canvas.getContext('2d');\n    // ctx.imageSmoothingEnabled = false;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.drawImage(this.offscreen, 0, 0, this.offscreen.width, this.offscreen.height);\n\n    for (var i = 0; i < this.canvasImages.length; i++) {\n      let im = this.canvasImages[i];\n      ctx.drawImage(im.image, im.x, im.y);\n    }\n  }\n\n  createCanvasFromBitmap(bitmap, width, height, transparent) {\n    let canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    if (bitmap) {\n      let ctx = canvas.getContext('2d');\n      let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      for (var i = 0; i < bitmap.length; i++) {\n        let x = i % width;\n        let y = (i / width) >> 0;\n        let index = (y * width + x) * 4;\n        let color = bitmap[i];\n        if (color !== transparent) {\n          imageData.data[index + 0] = this.palette[color * 3 + 0];\n          imageData.data[index + 1] = this.palette[color * 3 + 1];\n          imageData.data[index + 2] = this.palette[color * 3 + 2];\n          imageData.data[index + 3] = 255;\n        }\n      }\n      ctx.putImageData(imageData, 0, 0);\n    }\n    return canvas;\n  }\n\n  updateRoomObjects() {\n    this.objects = this.room.getObjects();\n    let objectsEl = this.objectsEl;\n    while (objectsEl.firstChild) objectsEl.removeChild(objectsEl.firstChild);\n\n    let list = new List({ type: 'icon', multiple: true });\n\n    for (var i = 0, index = 1; i < this.objects.length; i++) {\n      let ob = this.objects[i];\n\n      if (ob.bitmaps) {\n        for (var j = 0; j < ob.bitmaps.length; j++) {\n          let bitmap = ob.bitmaps[j];\n          let canvas = this.createCanvasFromBitmap(bitmap, ob.width, ob.height, this.room.transparent);\n          list.addItem({\n            id: index++,\n            title: ob.id,\n            image: canvas,\n            data: ob.id\n          });\n        }\n      }\n    }\n\n    this.objectsList = list;\n\n    this.objectsList.dom().addEventListener('change', (e) => {\n      this.clearCanvasImages();\n      let selection = e.detail.selection;\n      for (var i = 0; i < selection.length; i++) {\n        let item = selection[i];\n        let ob = this.objects.find(element => element.id == item.data);\n        if (ob) {\n          this.addImageToCanvas(item.image, ob.x, ob.y);\n        }\n      }\n      this.updateRoomImage();\n    });\n\n    this.objectsEl.appendChild(list.dom());\n  }\n\n  setRoom(num) {\n    let room = this.resource.getRoom(num);\n    if (room) {\n      this.room = room;\n      this.roomno = num;\n      this.palette = room.palette;\n      this.canvasImages = [];\n\n      this.updatePalette();\n      this.updateRoomImage();\n      this.updateRoomObjects();\n    }\n  }\n\n  addImageToCanvas(image, x, y) {\n    this.canvasImages.push({\n      x: x,\n      y: y,\n      image: image\n    });\n    this.updateRoomImage();\n  }\n\n  clearCanvasImages() {\n    this.canvasImages = [];\n  }\n\n  updateRoomList() {\n    let roomList = this.resource.getRoomList();\n    for (var i = 0; i < roomList.length; i++) {\n      let room = roomList[i];\n      this.list.addItem({ id: room.id, title: room.id.toString().padStart(3, '0') + ' ' + room.name });\n    }\n  }\n\n  parseFiles() {\n    if (this.files[INDEX_FILE]) {\n      this.resource.addIndex(this.files[INDEX_FILE]);\n    }\n    if (this.files[BUNDLE_FILE]) {\n      this.resource.addBundle(this.files[BUNDLE_FILE]);\n      this.updateRoomList();\n      this.setRoom(6);\n      this.list.select(6);\n    }\n  }\n\n  onFileLoaded(filename) {\n    console.log('Loaded', filename, this.files[filename].byteLength);\n\n    if (filename == INDEX_FILE || filename == BUNDLE_FILE) {\n      this.files[filename] = this.decode(this.files[filename], 0x69);\n    }\n\n    this.filesToLoad--;\n\n    if (this.filesToLoad == 0) {\n      console.log('done');\n      this.parseFiles();\n    }\n  }\n\n  loadFile(file) {\n    var reader = new FileReader();\n    var filename = file.name.toLowerCase();\n\t\treader.onload = (event) => {\n      this.files[filename] = event.target.result;\n      this.onFileLoaded(filename);\n\t\t};\n\t  reader.readAsArrayBuffer(file);\n  }\n\n  onDrop(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    var files = event.dataTransfer.files;\n    if (files.length) {\n      this.filesToLoad = files.length;\n      for (var i = 0; i < files.length; i++) {\n        this.loadFile(files[i]);\n      }\n    }\n  }\n\n  onDragEnter(event) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  onDragOver(event) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  onKeyDown(event) {\n    // console.log(event.target);\n    if (event.key == 'ArrowRight' && !event.repeat) {\n      // this.setRoom(this.roomno + 1);\n    }\n    else if (event.key == 'ArrowLeft' && !event.repeat) {\n      // this.setRoom(this.roomno - 1);\n    }\n  }\n\n  handleEvent(event) {\n    if (event.type == 'drop') {\n      this.onDrop(event);\n    }\n    else if (event.type == 'dragover') {\n      this.onDragOver(event);\n    }\n    else if (event.type == 'dragenter') {\n      this.onDragEnter(event);\n    }\n    else if (event.type == 'keydown') {\n      this.onKeyDown(event);\n    }\n  }\n\n  createElements() {\n    this.app = document.getElementById('app');\n\n    let sidebarEl = document.createElement('div');\n    sidebarEl.classList.add('side-bar');\n\n    this.list = new List();\n    this.list.dom().addEventListener('change', (e) => {\n      let selection = e.detail.selection;\n      if (selection.length) {\n        // let id = e.detail.id;\n        this.setRoom(selection[0].id);\n      }\n    });\n\n    this.roomListEl = document.createElement('div');\n    this.roomListEl.classList.add('room-list');\n\n    this.roomListEl.appendChild(this.list.dom());\n\n    let el = document.createElement('div');\n    el.classList.add('room-list-heading');\n    el.innerHTML = 'Rooms';\n    sidebarEl.appendChild(el);\n\n    sidebarEl.appendChild(this.roomListEl);\n\n    this.app.appendChild(sidebarEl);\n\n    this.workspace = new Workspace({ parent: this.app });\n\n    this.canvasContainerEl = document.createElement('div');\n    this.canvasContainerEl.classList.add('room-image');\n\n    this.canvas = document.createElement('canvas');\n    this.canvasContainerEl.appendChild(this.canvas);\n\n    this.imageContainer = new Container({ title: 'Background', content: this.canvasContainerEl, x: 32, y: 32, width: 320, height: 200 });\n    this.workspace.add(this.imageContainer);\n\n    this.paletteEl = document.createElement('div');\n    this.paletteEl.classList.add('palette-swatches');\n\n    this.paletteContainer = new Container({ title: 'Palette', content: this.paletteEl, x: 32, y: 280, width: 192, height: 192, status: false });\n    this.workspace.add(this.paletteContainer);\n\n    this.objectsEl = document.createElement('div');\n    this.objectsEl.classList.add('objects');\n\n    this.objectsContainer = new Container({ title: 'Objects', content: this.objectsEl, x: 512, y: 32, width: 344, height: 360 });\n    this.workspace.add(this.objectsContainer);\n\n  }\n\n  initEventListeners() {\n    window.addEventListener('drop', this, false);\n    window.addEventListener('dragenter', this, false);\n    window.addEventListener('dragover', this, false);\n\n    window.addEventListener('keydown', this, false);\n    window.addEventListener('keyup', this, false);\n  }\n}\n\nmodule.exports = App;\nglobal.App = App;\n","\nclass BitStream {\n  constructor(stream) {\n    this.stream = stream;\n    this.offset = 0;\n    this.cl = 0;\n  }\n\n  next() {\n    this.byte = this.stream.getUint8();\n    this.bit = this.byte & 1;\n    this.cl = 8;\n  }\n\n  shift() {\n    if (this.cl > 1) {\n      this.byte >>= 1;\n      this.bit = this.byte & 1;\n      this.cl--;\n    } else {\n      this.next();\n    }\n  }\n\n  read(length) {\n    if (this.cl == 0) {\n      this.next();\n    }\n\n    if (length) {\n      let value = 0;\n      for (var i = 0; i < length; i++) {\n        value |= (this.bit << i);\n        this.shift();\n      }\n      return value;\n    } else {\n      let value = this.bit ? 1 : 0;\n      this.shift();\n      return value;\n    }\n  }\n}\n\nmodule.exports = BitStream;\n","\nclass Bitmap {\n  constructor(params) {\n    this.width = params.width;\n    this.height = params.height;\n    this.pixels = params.pixels;\n  }\n}\n\nmodule.exports = Bitmap;\n","\nclass BufferStream {\n  constructor(buffer) {\n    this.buffer = buffer;\n    this.view = new DataView(this.buffer);\n    this.offset = 0;\n  }\n\n  get length() {\n    return this.buffer.byteLength;\n  }\n\n  seek(offset=0) {\n    this.offset = offset;\n  }\n\n  advance(count=1) {\n    this.offset += count;\n    if (this.offset > this.buffer.byteLength-1) this.offset = this.buffer.byteLength-1;\n  }\n\n  backup(count=1) {\n    this.offset -= count;\n    if (this.offset < 0) this.offset = 0;\n  }\n\n  getUint8(offset) {\n    if (offset == undefined) {\n      offset = this.offset;\n      this.offset++;\n    }\n    return this.view.getUint8(offset);\n  }\n\n  getUint16(offset, littleEndian=false) {\n    if (offset == undefined) {\n      offset = this.offset;\n      this.offset += 2;\n    }\n    return this.view.getUint16(offset, littleEndian);\n  }\n\n  getUint32(offset, littleEndian=false) {\n    if (offset == undefined) {\n      offset = this.offset;\n      this.offset += 4;\n    }\n    return this.view.getUint32(offset, littleEndian);\n  }\n\n  getUint16LE(offset) {\n    return this.getUint16(offset, true);\n  }\n\n  getUint32LE(offset) {\n    return this.getUint32(offset, true);\n  }\n\n  getBytes(length=1, offset) {\n    if (offset == undefined) {\n      offset = this.offset;\n      this.offset += length;\n    }\n    let bytes = new Uint8Array(length);\n    for (var i = 0; i < length; i++) {\n      bytes[i] = this.view.getUint8(offset + i); //this.getUint8(offset + i);\n    }\n    return bytes;\n  }\n}\n\nmodule.exports = BufferStream;\n","const BufferStream = require('./buffer_stream');\nconst BitStream = require('./bit_stream');\nconst Scumm = require('./scumm');\n\nclass Resource {\n  constructor() {\n    this.rooms = [];\n    this.roomNames = [];\n  }\n\n  addIndex(buffer) {\n    this.parseIndex(buffer);\n  }\n\n  addBundle(buffer) {\n    this.parseBundle(buffer);\n  }\n\n  getRoom(num) {\n    return this.parseRoom(num);\n  }\n\n  getBlockTypeName(uint32) {\n    return String.fromCharCode(\n      (uint32 & 0xff),\n      ((uint32 >> 8) & 0xff),\n      ((uint32 >> 16) & 0xff),\n      ((uint32 >> 24) & 0xff)\n    );\n  }\n\n  parseBlockName(stream) {\n    let type = stream.getUint32LE();\n    return this.getBlockTypeName(type);\n  }\n\n  parseIndex(buffer) {\n    console.log('parseIndex');\n    let stream = new BufferStream(buffer);\n\n    while (stream.offset < stream.length) {\n      let name = this.parseBlockName(stream);\n      let size = stream.getUint32();\n\n      if (name == 'RNAM') { // Room names table\n        while (1) {\n          let roomno = stream.getUint8();\n          if (roomno == 0) break;\n          let bytes = stream.getBytes(9);\n          this.roomNames[roomno] = bytes.reduce((accumulator, currentValue) => {\n            return accumulator + (currentValue != 0xff ? String.fromCharCode(currentValue ^ 0xff) : '');\n          }, '');\n        }\n      // else if (name == 'DROO') {\n      //   let numitems = stream.getUint16LE();\n      //   let roomNos = stream.getBytes(, numitems);\n      //\n      //   let roomOffsets = [];\n      //   for (var i = 0; i < numitems; i++) {\n      //     let offs = stream.getUint32LE();\n      //     roomOffsets[i] = offs;\n      //   }\n      } else {\n        stream.getBytes(size - 8);\n      }\n    }\n  }\n\n  decompress1(bits, shift, width, height) {\n    let pixels = new Uint8Array(width * height);\n    let offset = 0;\n\n    let color = bits.read(8);\n\n    let inc = -1;\n\n    while (offset < width * height) {\n      pixels[offset++] = color;\n      if (bits.read()) {\n        if (!bits.read()) {\n          color = bits.read(shift);\n          inc = -1;\n        } else {\n          if (!bits.read()) {\n            color += inc;\n          } else {\n            inc = -inc;\n            color += inc;\n          }\n        }\n      }\n    }\n\n    return pixels;\n  }\n\n  decompress2(bits, shift, width, height) {\n    let pixels = new Uint8Array(width * height);\n    let offset = 0;\n\n    let color = bits.read(8);\n    let skip = false;\n\n    while (offset < width * height) {\n      if (!skip) {\n        pixels[offset++] = color;\n        skip = false;\n      }\n\n      if (bits.read()) {\n        if (bits.read()) {\n          // adjust current palette index\n          let c = bits.read(3);\n          let incm = c - 4;\n          if (incm) {\n            color += incm;\n          } else {\n            let run = bits.read(8);\n            for (var i = 0; i < run; i++) {\n              pixels[offset++] = color;\n            }\n            skip = true;\n          }\n        } else {\n          // read a new palette index\n          color = bits.read(shift);\n        }\n      }\n    }\n    return pixels;\n  }\n\n  decompressStrip(stream, width, height) {\n    let code = stream.getUint8();\n    let shift = code % 10;\n\n    let bits = new BitStream(stream);\n    let pixels;\n    let orientation = 0;\n\n    if (code == 0x01) { // raw horizontal\n      pixels = new Uint8Array(width * height);\n      for (var i = 0; i < pixels.length; i++) {\n        pixels[i] = stream.getUint8();\n      }\n    }\n    else if (code >= 0x0e && code <= 0x12) { // method 1 vertical\n      orientation = 1;\n      pixels = this.decompress1(bits, shift, width, height);\n    }\n    else if (code >= 0x18 && code <= 0x1c) { // method 1 horizontal\n      pixels = this.decompress1(bits, shift, width, height);\n    }\n    else if (code >= 0x22 && code <= 0x26) { // method 1 vertical transp\n      orientation = 1;\n      pixels = this.decompress1(bits, shift, width, height);\n    }\n    else if (code >= 0x2c && code <= 0x30) { // method 1 horizontal transp\n      pixels = this.decompress1(bits, shift, width, height);\n    }\n    else if (code >= 0x40 && code <= 0x44) { // method 2 horizontal\n      pixels = this.decompress2(bits, shift, width, height);\n    }\n    else if (code >= 0x54 && code <= 0x58) { // method 2 horizontal transp\n      pixels = this.decompress2(bits, shift, width, height);\n    }\n    else if (code >= 0x68 && code <= 0x6c) { // method 2 horizontal transp\n      pixels = this.decompress2(bits, shift, width, height);\n    }\n    else if (code >= 0x7c && code <= 0x80) { // method 2 horizontal\n      pixels = this.decompress2(bits, shift, width, height);\n    }\n    else {\n      console.log('unknown', code);\n    }\n\n    if (orientation) { // vertical\n      let temp = new Uint8Array(pixels.length);\n      for (var i = 0, index = 0; i < pixels.length; i++) {\n        temp[index] = pixels[i];\n        index += 8;\n        if (index >= height * 8) index = ((i / height) >> 0) + 1;\n      }\n      pixels = temp;\n    }\n\n    return pixels;\n  }\n\n  parseSmap(stream, width, height) {\n    let base = stream.offset;\n\n    let name = this.parseBlockName(stream);\n    let size = stream.getUint32();\n\n    if (name !== 'SMAP') return;\n\n    let offsets = [];\n\n    for (var i = 0; i < width / 8; i++)\n      offsets.push(stream.getUint32LE());\n\n    let bitmap = new Uint8Array(width * height);\n\n    for (var i = 0; i < offsets.length; i++) {\n      stream.seek(base + offsets[i]);\n      let pixels = this.decompressStrip(stream, 8, height);\n      if (pixels) {\n        for (var j = 0, x = 0, y = 0; j < pixels.length; j++) {\n          bitmap[x + i * 8 + y * width] = pixels[j];\n          y = (x == 7 ? y + 1 : y);\n          x = (x == 7 ? 0 : x + 1);\n        }\n      }\n\n    }\n\n    return bitmap;\n  }\n\n  parseOBIM(stream) {\n    let name = this.parseBlockName(stream);\n    if (name !== 'IMHD') return;\n    let size = stream.getUint32();\n\n    let ob = {};\n\n    ob.id = stream.getUint16LE();\n    ob.imnn = stream.getUint16LE();\n    ob.zpnn = stream.getUint16LE();\n    ob.flags = stream.getUint8();\n    stream.advance();\n    ob.x = stream.getUint16LE();\n    ob.y = stream.getUint16LE();\n    ob.width = stream.getUint16LE();\n    ob.height = stream.getUint16LE();\n    ob.bitmaps = [];\n\n    if (ob.imnn) {\n      for (var i = 0; i < ob.imnn; i++) {\n        let name = this.parseBlockName(stream);\n        let size = stream.getUint32();\n        let jump = stream.offset + size - 8;\n\n        let bitmap = this.parseSmap(stream, ob.width, ob.height);\n        ob.bitmaps.push(bitmap);\n        stream.seek(jump);\n      }\n    }\n\n    return ob;\n  }\n\n  parseOBCD(stream) {\n    let name = this.parseBlockName(stream);\n    let size = stream.getUint32();\n\n    let ob = {};\n\n    ob.id = stream.getUint16LE();\n    ob.x = stream.getUint8();\n    ob.y = stream.getUint8();\n    ob.width = stream.getUint8();\n    ob.height = stream.getUint8();\n    ob.flags = stream.getUint8();\n    ob.parent = stream.getUint8();\n    ob.walk_x = stream.getUint16LE();\n    ob.walk_y = stream.getUint16LE();\n    ob.actor_dir = stream.getUint8();\n    ob.name = '';\n\n    name = this.parseBlockName(stream);\n    size = stream.getUint32();\n    stream.advance(size - 8);\n\n    stream.advance(8);\n\n    for (let b = stream.getUint8(); b !== 0; b = stream.getUint8()) {\n      ob.name += String.fromCharCode(b);\n    }\n\n    return ob;\n  }\n\n  parseRoom(num) {\n    let block = this.rooms[num];\n    if (!block) return;\n\n    let stream = new BufferStream(block.buffer);\n\n    let end = block.length;\n\n    let width;\n    let height;\n    let numObjects;\n    let palette;\n    let bitmap;\n    let transparent;\n    let obIMs = [];\n    let obCDs = [];\n\n    while (stream.offset < end) {\n      let name = this.parseBlockName(stream);\n      let size = stream.getUint32();\n      let jump = stream.offset + size - 8;\n\n      if (name == 'RMHD') {\n        width = stream.getUint16LE();\n        height = stream.getUint16LE();\n        numObjects = stream.getUint16LE();\n      }\n      else if (name == 'RMIM') {\n        stream.advance(18);\n        bitmap = this.parseSmap(stream, width, height);\n      }\n      else if (name == 'CLUT') {\n        palette = [];\n        for (var i = 0; i < 256; i++) {\n          let r = stream.getUint8();\n          let g = stream.getUint8();\n          let b = stream.getUint8();\n          palette.push(r, g, b);\n        }\n      }\n      else if (name == 'OBIM') {\n        let ob = this.parseOBIM(stream);\n        obIMs[ob.id] = ob;\n        // if (ob.imnn > 1) console.log(num, ob.id, ob.imnn);\n      }\n      else if (name == 'OBCD') {\n        let ob = this.parseOBCD(stream);\n        obCDs[ob.id] = ob;\n      }\n      else if (name == 'TRNS') {\n        transparent = stream.getUint8();\n        // console.log('TRNS', transparent);\n      }\n      else {\n        // stream.getBytes(size - 8);\n      }\n      stream.seek(jump);\n    }\n\n    let room = new Scumm.Room({\n      id: num,\n      name: this.roomNames[num],\n      width: width,\n      height: height,\n      numObjects: numObjects,\n      obIMs: obIMs,\n      obCDs: obCDs,\n      bitmap: bitmap,\n      palette: palette,\n      transparent: transparent\n    });\n\n    return room;\n  }\n\n  getRoomList() {\n    // console.log('getRoomList');\n    let result = [];\n    for (var i = 0; i < this.rooms.length; i++) {\n      let room = this.rooms[i];\n      if (room) {\n        result.push({ id: i, name: this.roomNames[i] });\n      }\n    }\n    return result;\n  }\n\n  parseBundle(buffer) {\n    console.log('parseBundle');\n\n    let stream = new BufferStream(buffer);\n\n    let name = this.parseBlockName(stream);\n    let size = stream.getUint32();\n\n    if (name != 'LECF') return;\n\n    name = this.parseBlockName(stream);\n    size = stream.getUint32();\n\n    if (name == 'LOFF') {\n      this.numrooms = stream.getUint8();\n\n      let offsets = [];\n\n      for (var i = 0; i < this.numrooms; i++) {\n        let id = stream.getUint8();\n        let offs = stream.getUint32LE();\n        offsets[id] = offs;\n      }\n\n      for (var i = 0; i < offsets.length; i++) {\n        let offs = offsets[i];\n        if (offs != undefined) {\n          stream.seek(offs);\n          let name = this.parseBlockName(stream);\n          let size = stream.getUint32();\n          this.rooms[i] = stream.getBytes(size - 8);\n        }\n      }\n    }\n  }\n\n}\n\nmodule.exports = Resource;\n","\nvar Scumm = {\n  RoomObject: require('./room_object'),\n  Room: require('./room')\n}\n\nmodule.exports = Scumm;\n","const RoomObject = require('./room_object');\n\nclass Room {\n  constructor(params) {\n    this.id = params.id;\n    this.name = params.name;\n    this.width = params.width;\n    this.height = params.height;\n    this.numObjects = params.numObjects;\n    this.obIMs = params.obIMs;\n    this.obCDs = params.obCDs;\n    this.palette = params.palette;\n    this.bitmap = params.bitmap;\n    this.transparent = params.transparent;\n  }\n\n  getObjects() {\n    let objects = [];\n    for (var i = 0; i < this.obIMs.length; i++) {\n      let obim = this.obIMs[i];\n      if (obim) {\n        let obcd = this.obCDs[obim.id];\n        let ob = new RoomObject({\n          id: obim.id,\n          name: obcd.name,\n          x: obim.x,\n          y: obim.y,\n          width: obim.width,\n          height: obim.height,\n          bitmaps: obim.bitmaps\n        });\n        objects.push(ob);\n      }\n    }\n    return objects;\n  }\n}\n\nmodule.exports = Room;\n","\nclass RoomObject {\n  constructor(params) {\n    this.id = params.id;\n    this.name = params.name;\n    this.imnn = params.imnn;\n    this.zpnn = params.zpnn;\n    this.flags = params.flags;\n    this.x = params.x;\n    this.y = params.y;\n    this.width = params.width;\n    this.height = params.height;\n    this.bitmaps = params.bitmaps;\n  }\n}\n\nmodule.exports = RoomObject;\n","\nclass Container {\n  constructor(params) {\n    this.parent = params.parent;\n\n    this.el = document.createElement('div');\n    this.el.classList.add('container');\n\n    this.titleEl = document.createElement('div');\n    this.titleEl.id = 'title';\n    this.titleEl.classList.add('container-title');\n    this.titleEl.appendChild(document.createTextNode(params.title));\n    this.el.appendChild(this.titleEl);\n\n    this.contentEl = document.createElement('div');\n    this.contentEl.id = 'content';\n    this.contentEl.classList.add('container-content');\n\n    this.contentEl.appendChild(params.content);\n\n    this.el.appendChild(this.contentEl);\n\n    this.el.style.left = params.x + 'px';\n    this.el.style.top = params.y + 'px';\n\n    // this.contentEl.style.width = params.width + 'px';\n    // this.contentEl.style.height = params.height + 'px';\n    this.setSize(params.width, params.height);\n\n    if (params.status) {\n      let statusEl = document.createElement('div');\n      statusEl.classList.add('container-status');\n      // statusEl.innerHTML = 'Status 1234567890';\n      this.el.appendChild(statusEl);\n    }\n\n    this.el.addEventListener('mousedown', this);\n  }\n\n  dom() {\n    return this.el;\n  }\n\n  setSize(width, height) {\n    this.contentEl.style.maxWidth = this.contentEl.style.width = width + 'px';\n    this.contentEl.style.maxHeight = this.contentEl.style.height = height + 'px';\n\n  }\n\n  cancelDrag() {\n    window.removeEventListener('mousemove', this);\n    window.removeEventListener('mouseup', this);\n    window.removeEventListener('blur', this);\n  }\n\n  onMouseMove(event) {\n    let x = event.movementX;\n    let y = event.movementY;\n    this.el.style.left = (this.el.offsetLeft + x) + 'px';\n    this.el.style.top = (this.el.offsetTop + y) + 'px';\n  }\n\n  onMouseDown(event) {\n    if (event.button == 0 && event.target === this.titleEl) {\n      window.addEventListener('mousemove', this);\n      window.addEventListener('mouseup', this);\n      window.addEventListener('blur', this);\n    }\n  }\n\n  onMouseUp(event) {\n    this.cancelDrag();\n  }\n\n  onBlur(event) {\n    this.cancelDrag();\n  }\n\n  handleEvent(event) {\n    if (event.type == 'mousedown') {\n      this.onMouseDown(event);\n    }\n    else if (event.type == 'mouseup') {\n      this.onMouseUp(event);\n    }\n    else if (event.type == 'mousemove') {\n      this.onMouseMove(event);\n    }\n    else if (event.type == 'blur') {\n      this.onBlur(event);\n    }\n  }\n}\n\nmodule.exports = Container;\n","\nclass List {\n  constructor(params={}) {\n    this.type = params.type == undefined ? 'list' : params.type;\n    this.multiple = params.multiple;\n\n    this.el = document.createElement('div');\n\n    this.items = [];\n    this.selection = [];\n\n    let cl;\n    if (this.type == 'icon') {\n      cl = 'icon-list';\n    } else {\n      cl = 'list';\n    }\n    this.el.classList.add(cl);\n\n    this.el.addEventListener('mousedown', this);\n    this.el.addEventListener('keydown', this);\n    this.el.addEventListener('focus', this);\n\n    // this.el.tabIndex = params.tabIndex || 1;\n    this.el.tabIndex = -1;\n  }\n\n  createItem(item) {\n    let el = document.createElement('div');\n    el.id = 'item' + item.id;\n    el.dataset.id = item.id;\n\n    if (this.type == 'icon') {\n      el.classList.add('icon-list-item');\n\n      let imageEl = document.createElement('div');\n      imageEl.classList.add('icon-list-image');\n      imageEl.appendChild(item.image);\n      el.appendChild(imageEl);\n\n      let titleEl = document.createElement('div');\n      titleEl.classList.add('icon-list-title');\n      titleEl.appendChild(document.createTextNode(item.title));\n      el.appendChild(titleEl);\n    } else {\n      el.classList.add('list-item');\n      el.appendChild(document.createTextNode(item.title));\n    }\n\n    this.el.appendChild(el);\n\n    this.items.push(item);\n  }\n\n  addItem(item) {\n    this.createItem(item);\n  }\n\n  addItems(items) {\n    for (var i = 0; i < items.length; i++) {\n      let item = items[i];\n      this.createItem(item);\n    }\n  }\n\n  getItem(id) {\n    return this.items.find(element => element.id == id);\n  }\n\n  dom() {\n    return this.el;\n  }\n\n  select(id, toggle=false) {\n    // console.log('select', id, toggle);\n    let item = this.getItem(id);\n\n    if (!this.selection.includes(item)) {\n      let el = this.el.querySelector('#item' + id);\n      if (el) {\n        el.classList.add('selected');\n      }\n      this.selection.push(item);\n    } else {\n      // console.log('already');\n      if (toggle) {\n        this.deselect(id);\n      }\n    }\n  }\n\n  deselect(id) {\n    if (id) {\n      let item = this.getItem(id);\n      let el = this.el.querySelector('#item' + item.id);\n      if (el) {\n        el.classList.remove('selected');\n      }\n      this.selection = this.selection.filter(element => element !== item);\n    }\n    else {\n      for (var i = 0; i < this.selection.length; i++) {\n        let item = this.selection[i];\n        let el = this.el.querySelector('#item' + item.id);\n        if (el) {\n          el.classList.remove('selected');\n        }\n      }\n      this.selection = [];\n    }\n  }\n\n  onMouseDown(event) {\n    let id = event.target.dataset.id;\n    if (id) {\n\n      if (this.multiple) {\n        let toggle = event.metaKey || event.ctrlKey;\n        if (!toggle) this.deselect();\n        this.select(id, toggle);\n      } else {\n        this.deselect();\n        this.select(id);\n      }\n      // this.select(id);\n\n      var myEvent = new CustomEvent('change', {\n      \tdetail: { selection: this.selection }\n      });\n      this.el.dispatchEvent(myEvent);\n    } else {\n      this.deselect();\n      var myEvent = new CustomEvent('change', {\n      \tdetail: { selection: this.selection }\n      });\n      this.el.dispatchEvent(myEvent);\n    }\n  }\n\n  onKeyDown(event) {\n    console.log(event);\n  }\n\n  onFocus(event) {\n    console.log('focus');\n  }\n\n  handleEvent(event) {\n    if (event.type == 'mousedown') {\n      this.onMouseDown(event);\n    }\n    else if (event.type == 'keydown') {\n      this.onKeyDown(event);\n    }\n    else if (event.type == 'focus') {\n      this.onFocus(event);\n    }\n  }\n\n}\n\nmodule.exports = List;\n","\nclass Workspace {\n  constructor(params) {\n    this.el = document.createElement('div');\n    this.el.classList.add('workspace');\n    this.parent = params.parent;\n    this.children = [];\n    this.parent.appendChild(this.el);\n  }\n\n  add(child) {\n    child.z = this.children.length ? this.children[this.children.length - 1].z + 1 : 1;\n    let childEl = child.dom();\n    childEl.addEventListener('mousedown', this);\n    this.el.appendChild(childEl);\n    childEl.style.zIndex = child.z;\n    this.children.push(child);\n  }\n\n  remove(child) {\n    let childEl = child.dom();\n    childEl.removeEventListener('mousedown', this);\n    this.el.removeChild(childEl);\n    this.children = this.children.filter(element => element !== child);\n  }\n\n  bringToFront(child) {\n    child.z = Number.POSITIVE_INFINITY;\n    this.children.sort((a, b) => { return a.z - b.z } );\n    for (var i = 0; i < this.children.length; i++) {\n      let child = this.children[i];\n      child.dom().style.zIndex = child.z = i;\n    }\n  }\n\n  onMouseDown(event) {\n    let temp = event.target;\n\n    while (temp.parentNode && temp.parentNode !== document.body) {\n      if (temp.parentNode === this.el) break;\n      temp = temp.parentNode;\n    }\n\n    let child = this.children.find(element => element.dom() === temp);\n    if (child) {\n      this.bringToFront(child);\n    }\n  }\n\n  handleEvent(event) {\n    if (event.type == 'mousedown') {\n      this.onMouseDown(event);\n    }\n  }\n}\n\nmodule.exports = Workspace;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXBwLmpzIiwic3JjL2JpdF9zdHJlYW0uanMiLCJzcmMvYml0bWFwLmpzIiwic3JjL2J1ZmZlcl9zdHJlYW0uanMiLCJzcmMvcmVzb3VyY2UuanMiLCJzcmMvc2N1bW0vaW5kZXguanMiLCJzcmMvc2N1bW0vcm9vbS5qcyIsInNyYy9zY3VtbS9yb29tX29iamVjdC5qcyIsInNyYy91aS9jb250YWluZXIuanMiLCJzcmMvdWkvbGlzdC5qcyIsInNyYy91aS93b3Jrc3BhY2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDQUEsTUFBTSxZQUFZLFFBQVEsZ0JBQVIsQ0FBbEI7QUFDQSxNQUFNLFlBQVksUUFBUSxnQkFBUixDQUFsQjtBQUNBLE1BQU0sT0FBTyxRQUFRLFdBQVIsQ0FBYjs7QUFFQSxNQUFNLFdBQVcsUUFBUSxZQUFSLENBQWpCO0FBQ0EsTUFBTSxRQUFRLFFBQVEsU0FBUixDQUFkO0FBQ0EsTUFBTSxTQUFTLFFBQVEsVUFBUixDQUFmOztBQUVBLE1BQU0sYUFBYSxhQUFuQjtBQUNBLE1BQU0sY0FBYyxhQUFwQjs7QUFFQTtBQUNBOztBQUVBLE1BQU0sR0FBTixDQUFVO0FBQ1IsZ0JBQWM7QUFDWixZQUFRLEdBQVIsQ0FBWSxNQUFaOztBQUVBLFNBQUssS0FBTCxHQUFhLEVBQWI7O0FBRUEsU0FBSyxRQUFMLEdBQWdCLElBQUksUUFBSixFQUFoQjs7QUFFQSxTQUFLLFNBQUwsR0FBaUIsU0FBUyxhQUFULENBQXVCLFFBQXZCLENBQWpCO0FBQ0EsU0FBSyxTQUFMLENBQWUsS0FBZixHQUF1QixHQUF2QjtBQUNBLFNBQUssU0FBTCxDQUFlLE1BQWYsR0FBd0IsR0FBeEI7O0FBRUEsU0FBSyxZQUFMLEdBQW9CLEVBQXBCOztBQUVBLFNBQUssRUFBTCxHQUFVLFNBQVMsY0FBVCxDQUF3QixXQUF4QixDQUFWOztBQUVBLFdBQU8sZ0JBQVAsQ0FBd0Isa0JBQXhCLEVBQTRDLE1BQU07QUFDaEQsV0FBSyxjQUFMO0FBQ0EsV0FBSyxrQkFBTDtBQUNELEtBSEQ7QUFJRDs7QUFFRCxTQUFPLE1BQVAsRUFBZSxNQUFJLENBQW5CLEVBQXNCO0FBQ3BCLFFBQUksT0FBTyxJQUFJLFVBQUosQ0FBZSxNQUFmLENBQVg7QUFDQSxTQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksS0FBSyxNQUF6QixFQUFpQyxHQUFqQyxFQUFzQztBQUNwQyxXQUFLLENBQUwsSUFBVSxLQUFLLENBQUwsSUFBVSxHQUFwQjtBQUNEO0FBQ0QsV0FBTyxLQUFLLE1BQVo7QUFDRDs7QUFFRCxrQkFBZ0I7QUFDZCxRQUFJLFVBQVUsS0FBSyxPQUFuQjs7QUFFQSxRQUFJLFlBQVksS0FBSyxTQUFyQjtBQUNBLFdBQU0sVUFBVSxVQUFoQixFQUE0QixVQUFVLFdBQVYsQ0FBc0IsVUFBVSxVQUFoQzs7QUFFNUIsUUFBSSxPQUFKLEVBQWE7QUFDWCxXQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksR0FBcEIsRUFBeUIsR0FBekIsRUFBOEI7QUFDNUIsWUFBSSxJQUFJLFFBQVEsSUFBRSxDQUFWLENBQVI7QUFDQSxZQUFJLElBQUksUUFBUSxJQUFFLENBQUYsR0FBTSxDQUFkLENBQVI7QUFDQSxZQUFJLElBQUksUUFBUSxJQUFFLENBQUYsR0FBTSxDQUFkLENBQVI7QUFDQSxZQUFJLFNBQVMsU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQWI7QUFDQSxlQUFPLFNBQVAsQ0FBaUIsR0FBakIsQ0FBcUIsZ0JBQXJCO0FBQ0EsZUFBTyxLQUFQLENBQWEsZUFBYixHQUErQixTQUFTLENBQVQsR0FBYSxHQUFiLEdBQW1CLENBQW5CLEdBQXVCLEdBQXZCLEdBQTZCLENBQTdCLEdBQWlDLEdBQWhFO0FBQ0E7QUFDQSxrQkFBVSxXQUFWLENBQXNCLE1BQXRCO0FBQ0Q7QUFDRjtBQUNGOztBQUVELG9CQUFrQjtBQUNoQixRQUFJLENBQUMsS0FBSyxJQUFWLEVBQWdCO0FBQ2hCLFFBQUksT0FBTyxLQUFLLElBQWhCOztBQUVBLFFBQUksUUFBUSxLQUFLLEtBQWpCO0FBQ0EsUUFBSSxTQUFTLEtBQUssTUFBbEI7O0FBRUEsU0FBSyxTQUFMLENBQWUsS0FBZixHQUF1QixLQUF2QjtBQUNBLFNBQUssU0FBTCxDQUFlLE1BQWYsR0FBd0IsTUFBeEI7O0FBRUEsUUFBSSxNQUFNLEtBQUssU0FBTCxDQUFlLFVBQWYsQ0FBMEIsSUFBMUIsQ0FBVjtBQUNBLFFBQUksU0FBSixDQUFjLENBQWQsRUFBaUIsQ0FBakIsRUFBb0IsS0FBSyxTQUFMLENBQWUsS0FBbkMsRUFBMEMsS0FBSyxTQUFMLENBQWUsTUFBekQ7O0FBRUEsUUFBSSxLQUFLLE1BQVQsRUFBaUI7QUFDZixVQUFJLFlBQVksSUFBSSxZQUFKLENBQWlCLENBQWpCLEVBQW9CLENBQXBCLEVBQXVCLEtBQXZCLEVBQThCLE1BQTlCLENBQWhCOztBQUVBLFdBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxLQUFLLE1BQUwsQ0FBWSxNQUFoQyxFQUF3QyxHQUF4QyxFQUE2QztBQUMzQyxZQUFJLFFBQVEsS0FBSyxNQUFMLENBQVksQ0FBWixDQUFaO0FBQ0Esa0JBQVUsSUFBVixDQUFlLElBQUksQ0FBSixHQUFRLENBQXZCLElBQTRCLEtBQUssT0FBTCxDQUFhLFFBQVEsQ0FBUixHQUFZLENBQXpCLENBQTVCO0FBQ0Esa0JBQVUsSUFBVixDQUFlLElBQUksQ0FBSixHQUFRLENBQXZCLElBQTRCLEtBQUssT0FBTCxDQUFhLFFBQVEsQ0FBUixHQUFZLENBQXpCLENBQTVCO0FBQ0Esa0JBQVUsSUFBVixDQUFlLElBQUksQ0FBSixHQUFRLENBQXZCLElBQTRCLEtBQUssT0FBTCxDQUFhLFFBQVEsQ0FBUixHQUFZLENBQXpCLENBQTVCO0FBQ0Esa0JBQVUsSUFBVixDQUFlLElBQUksQ0FBSixHQUFRLENBQXZCLElBQTRCLEdBQTVCO0FBQ0Q7O0FBRUQsVUFBSSxZQUFKLENBQWlCLFNBQWpCLEVBQTRCLENBQTVCLEVBQStCLENBQS9COztBQUVBLFdBQUssY0FBTCxDQUFvQixPQUFwQixDQUE0QixLQUE1QixFQUFtQyxNQUFuQztBQUNEOztBQUVELFFBQUksU0FBUyxLQUFLLE1BQWxCO0FBQ0EsV0FBTyxLQUFQLEdBQWUsS0FBSyxJQUFwQjtBQUNBLFdBQU8sS0FBUCxHQUFlLEtBQWY7QUFDQSxXQUFPLE1BQVAsR0FBZ0IsTUFBaEI7O0FBRUEsVUFBTSxPQUFPLFVBQVAsQ0FBa0IsSUFBbEIsQ0FBTjtBQUNBO0FBQ0EsUUFBSSxTQUFKLENBQWMsQ0FBZCxFQUFpQixDQUFqQixFQUFvQixPQUFPLEtBQTNCLEVBQWtDLE9BQU8sTUFBekM7QUFDQSxRQUFJLFNBQUosQ0FBYyxLQUFLLFNBQW5CLEVBQThCLENBQTlCLEVBQWlDLENBQWpDLEVBQW9DLEtBQUssU0FBTCxDQUFlLEtBQW5ELEVBQTBELEtBQUssU0FBTCxDQUFlLE1BQXpFOztBQUVBLFNBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxLQUFLLFlBQUwsQ0FBa0IsTUFBdEMsRUFBOEMsR0FBOUMsRUFBbUQ7QUFDakQsVUFBSSxLQUFLLEtBQUssWUFBTCxDQUFrQixDQUFsQixDQUFUO0FBQ0EsVUFBSSxTQUFKLENBQWMsR0FBRyxLQUFqQixFQUF3QixHQUFHLENBQTNCLEVBQThCLEdBQUcsQ0FBakM7QUFDRDtBQUNGOztBQUVELHlCQUF1QixNQUF2QixFQUErQixLQUEvQixFQUFzQyxNQUF0QyxFQUE4QyxXQUE5QyxFQUEyRDtBQUN6RCxRQUFJLFNBQVMsU0FBUyxhQUFULENBQXVCLFFBQXZCLENBQWI7QUFDQSxXQUFPLEtBQVAsR0FBZSxLQUFmO0FBQ0EsV0FBTyxNQUFQLEdBQWdCLE1BQWhCO0FBQ0EsUUFBSSxNQUFKLEVBQVk7QUFDVixVQUFJLE1BQU0sT0FBTyxVQUFQLENBQWtCLElBQWxCLENBQVY7QUFDQSxVQUFJLFlBQVksSUFBSSxZQUFKLENBQWlCLENBQWpCLEVBQW9CLENBQXBCLEVBQXVCLE9BQU8sS0FBOUIsRUFBcUMsT0FBTyxNQUE1QyxDQUFoQjtBQUNBLFdBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxPQUFPLE1BQTNCLEVBQW1DLEdBQW5DLEVBQXdDO0FBQ3RDLFlBQUksSUFBSSxJQUFJLEtBQVo7QUFDQSxZQUFJLElBQUssSUFBSSxLQUFMLElBQWUsQ0FBdkI7QUFDQSxZQUFJLFFBQVEsQ0FBQyxJQUFJLEtBQUosR0FBWSxDQUFiLElBQWtCLENBQTlCO0FBQ0EsWUFBSSxRQUFRLE9BQU8sQ0FBUCxDQUFaO0FBQ0EsWUFBSSxVQUFVLFdBQWQsRUFBMkI7QUFDekIsb0JBQVUsSUFBVixDQUFlLFFBQVEsQ0FBdkIsSUFBNEIsS0FBSyxPQUFMLENBQWEsUUFBUSxDQUFSLEdBQVksQ0FBekIsQ0FBNUI7QUFDQSxvQkFBVSxJQUFWLENBQWUsUUFBUSxDQUF2QixJQUE0QixLQUFLLE9BQUwsQ0FBYSxRQUFRLENBQVIsR0FBWSxDQUF6QixDQUE1QjtBQUNBLG9CQUFVLElBQVYsQ0FBZSxRQUFRLENBQXZCLElBQTRCLEtBQUssT0FBTCxDQUFhLFFBQVEsQ0FBUixHQUFZLENBQXpCLENBQTVCO0FBQ0Esb0JBQVUsSUFBVixDQUFlLFFBQVEsQ0FBdkIsSUFBNEIsR0FBNUI7QUFDRDtBQUNGO0FBQ0QsVUFBSSxZQUFKLENBQWlCLFNBQWpCLEVBQTRCLENBQTVCLEVBQStCLENBQS9CO0FBQ0Q7QUFDRCxXQUFPLE1BQVA7QUFDRDs7QUFFRCxzQkFBb0I7QUFDbEIsU0FBSyxPQUFMLEdBQWUsS0FBSyxJQUFMLENBQVUsVUFBVixFQUFmO0FBQ0EsUUFBSSxZQUFZLEtBQUssU0FBckI7QUFDQSxXQUFPLFVBQVUsVUFBakIsRUFBNkIsVUFBVSxXQUFWLENBQXNCLFVBQVUsVUFBaEM7O0FBRTdCLFFBQUksT0FBTyxJQUFJLElBQUosQ0FBUyxFQUFFLE1BQU0sTUFBUixFQUFnQixVQUFVLElBQTFCLEVBQVQsQ0FBWDs7QUFFQSxTQUFLLElBQUksSUFBSSxDQUFSLEVBQVcsUUFBUSxDQUF4QixFQUEyQixJQUFJLEtBQUssT0FBTCxDQUFhLE1BQTVDLEVBQW9ELEdBQXBELEVBQXlEO0FBQ3ZELFVBQUksS0FBSyxLQUFLLE9BQUwsQ0FBYSxDQUFiLENBQVQ7O0FBRUEsVUFBSSxHQUFHLE9BQVAsRUFBZ0I7QUFDZCxhQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksR0FBRyxPQUFILENBQVcsTUFBL0IsRUFBdUMsR0FBdkMsRUFBNEM7QUFDMUMsY0FBSSxTQUFTLEdBQUcsT0FBSCxDQUFXLENBQVgsQ0FBYjtBQUNBLGNBQUksU0FBUyxLQUFLLHNCQUFMLENBQTRCLE1BQTVCLEVBQW9DLEdBQUcsS0FBdkMsRUFBOEMsR0FBRyxNQUFqRCxFQUF5RCxLQUFLLElBQUwsQ0FBVSxXQUFuRSxDQUFiO0FBQ0EsZUFBSyxPQUFMLENBQWE7QUFDWCxnQkFBSSxPQURPO0FBRVgsbUJBQU8sR0FBRyxFQUZDO0FBR1gsbUJBQU8sTUFISTtBQUlYLGtCQUFNLEdBQUc7QUFKRSxXQUFiO0FBTUQ7QUFDRjtBQUNGOztBQUVELFNBQUssV0FBTCxHQUFtQixJQUFuQjs7QUFFQSxTQUFLLFdBQUwsQ0FBaUIsR0FBakIsR0FBdUIsZ0JBQXZCLENBQXdDLFFBQXhDLEVBQW1ELENBQUQsSUFBTztBQUN2RCxXQUFLLGlCQUFMO0FBQ0EsVUFBSSxZQUFZLEVBQUUsTUFBRixDQUFTLFNBQXpCO0FBQ0EsV0FBSyxJQUFJLElBQUksQ0FBYixFQUFnQixJQUFJLFVBQVUsTUFBOUIsRUFBc0MsR0FBdEMsRUFBMkM7QUFDekMsWUFBSSxPQUFPLFVBQVUsQ0FBVixDQUFYO0FBQ0EsWUFBSSxLQUFLLEtBQUssT0FBTCxDQUFhLElBQWIsQ0FBa0IsV0FBVyxRQUFRLEVBQVIsSUFBYyxLQUFLLElBQWhELENBQVQ7QUFDQSxZQUFJLEVBQUosRUFBUTtBQUNOLGVBQUssZ0JBQUwsQ0FBc0IsS0FBSyxLQUEzQixFQUFrQyxHQUFHLENBQXJDLEVBQXdDLEdBQUcsQ0FBM0M7QUFDRDtBQUNGO0FBQ0QsV0FBSyxlQUFMO0FBQ0QsS0FYRDs7QUFhQSxTQUFLLFNBQUwsQ0FBZSxXQUFmLENBQTJCLEtBQUssR0FBTCxFQUEzQjtBQUNEOztBQUVELFVBQVEsR0FBUixFQUFhO0FBQ1gsUUFBSSxPQUFPLEtBQUssUUFBTCxDQUFjLE9BQWQsQ0FBc0IsR0FBdEIsQ0FBWDtBQUNBLFFBQUksSUFBSixFQUFVO0FBQ1IsV0FBSyxJQUFMLEdBQVksSUFBWjtBQUNBLFdBQUssTUFBTCxHQUFjLEdBQWQ7QUFDQSxXQUFLLE9BQUwsR0FBZSxLQUFLLE9BQXBCO0FBQ0EsV0FBSyxZQUFMLEdBQW9CLEVBQXBCOztBQUVBLFdBQUssYUFBTDtBQUNBLFdBQUssZUFBTDtBQUNBLFdBQUssaUJBQUw7QUFDRDtBQUNGOztBQUVELG1CQUFpQixLQUFqQixFQUF3QixDQUF4QixFQUEyQixDQUEzQixFQUE4QjtBQUM1QixTQUFLLFlBQUwsQ0FBa0IsSUFBbEIsQ0FBdUI7QUFDckIsU0FBRyxDQURrQjtBQUVyQixTQUFHLENBRmtCO0FBR3JCLGFBQU87QUFIYyxLQUF2QjtBQUtBLFNBQUssZUFBTDtBQUNEOztBQUVELHNCQUFvQjtBQUNsQixTQUFLLFlBQUwsR0FBb0IsRUFBcEI7QUFDRDs7QUFFRCxtQkFBaUI7QUFDZixRQUFJLFdBQVcsS0FBSyxRQUFMLENBQWMsV0FBZCxFQUFmO0FBQ0EsU0FBSyxJQUFJLElBQUksQ0FBYixFQUFnQixJQUFJLFNBQVMsTUFBN0IsRUFBcUMsR0FBckMsRUFBMEM7QUFDeEMsVUFBSSxPQUFPLFNBQVMsQ0FBVCxDQUFYO0FBQ0EsV0FBSyxJQUFMLENBQVUsT0FBVixDQUFrQixFQUFFLElBQUksS0FBSyxFQUFYLEVBQWUsT0FBTyxLQUFLLEVBQUwsQ0FBUSxRQUFSLEdBQW1CLFFBQW5CLENBQTRCLENBQTVCLEVBQStCLEdBQS9CLElBQXNDLEdBQXRDLEdBQTRDLEtBQUssSUFBdkUsRUFBbEI7QUFDRDtBQUNGOztBQUVELGVBQWE7QUFDWCxRQUFJLEtBQUssS0FBTCxDQUFXLFVBQVgsQ0FBSixFQUE0QjtBQUMxQixXQUFLLFFBQUwsQ0FBYyxRQUFkLENBQXVCLEtBQUssS0FBTCxDQUFXLFVBQVgsQ0FBdkI7QUFDRDtBQUNELFFBQUksS0FBSyxLQUFMLENBQVcsV0FBWCxDQUFKLEVBQTZCO0FBQzNCLFdBQUssUUFBTCxDQUFjLFNBQWQsQ0FBd0IsS0FBSyxLQUFMLENBQVcsV0FBWCxDQUF4QjtBQUNBLFdBQUssY0FBTDtBQUNBLFdBQUssT0FBTCxDQUFhLENBQWI7QUFDQSxXQUFLLElBQUwsQ0FBVSxNQUFWLENBQWlCLENBQWpCO0FBQ0Q7QUFDRjs7QUFFRCxlQUFhLFFBQWIsRUFBdUI7QUFDckIsWUFBUSxHQUFSLENBQVksUUFBWixFQUFzQixRQUF0QixFQUFnQyxLQUFLLEtBQUwsQ0FBVyxRQUFYLEVBQXFCLFVBQXJEOztBQUVBLFFBQUksWUFBWSxVQUFaLElBQTBCLFlBQVksV0FBMUMsRUFBdUQ7QUFDckQsV0FBSyxLQUFMLENBQVcsUUFBWCxJQUF1QixLQUFLLE1BQUwsQ0FBWSxLQUFLLEtBQUwsQ0FBVyxRQUFYLENBQVosRUFBa0MsSUFBbEMsQ0FBdkI7QUFDRDs7QUFFRCxTQUFLLFdBQUw7O0FBRUEsUUFBSSxLQUFLLFdBQUwsSUFBb0IsQ0FBeEIsRUFBMkI7QUFDekIsY0FBUSxHQUFSLENBQVksTUFBWjtBQUNBLFdBQUssVUFBTDtBQUNEO0FBQ0Y7O0FBRUQsV0FBUyxJQUFULEVBQWU7QUFDYixRQUFJLFNBQVMsSUFBSSxVQUFKLEVBQWI7QUFDQSxRQUFJLFdBQVcsS0FBSyxJQUFMLENBQVUsV0FBVixFQUFmO0FBQ0YsV0FBTyxNQUFQLEdBQWlCLEtBQUQsSUFBVztBQUN2QixXQUFLLEtBQUwsQ0FBVyxRQUFYLElBQXVCLE1BQU0sTUFBTixDQUFhLE1BQXBDO0FBQ0EsV0FBSyxZQUFMLENBQWtCLFFBQWxCO0FBQ0gsS0FIRDtBQUlDLFdBQU8saUJBQVAsQ0FBeUIsSUFBekI7QUFDQTs7QUFFRCxTQUFPLEtBQVAsRUFBYztBQUNaLFVBQU0sZUFBTjtBQUNBLFVBQU0sY0FBTjs7QUFFQSxRQUFJLFFBQVEsTUFBTSxZQUFOLENBQW1CLEtBQS9CO0FBQ0EsUUFBSSxNQUFNLE1BQVYsRUFBa0I7QUFDaEIsV0FBSyxXQUFMLEdBQW1CLE1BQU0sTUFBekI7QUFDQSxXQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksTUFBTSxNQUExQixFQUFrQyxHQUFsQyxFQUF1QztBQUNyQyxhQUFLLFFBQUwsQ0FBYyxNQUFNLENBQU4sQ0FBZDtBQUNEO0FBQ0Y7QUFDRjs7QUFFRCxjQUFZLEtBQVosRUFBbUI7QUFDakIsVUFBTSxlQUFOO0FBQ0EsVUFBTSxjQUFOO0FBQ0Q7O0FBRUQsYUFBVyxLQUFYLEVBQWtCO0FBQ2hCLFVBQU0sZUFBTjtBQUNBLFVBQU0sY0FBTjtBQUNEOztBQUVELFlBQVUsS0FBVixFQUFpQjtBQUNmO0FBQ0EsUUFBSSxNQUFNLEdBQU4sSUFBYSxZQUFiLElBQTZCLENBQUMsTUFBTSxNQUF4QyxFQUFnRDtBQUM5QztBQUNELEtBRkQsTUFHSyxJQUFJLE1BQU0sR0FBTixJQUFhLFdBQWIsSUFBNEIsQ0FBQyxNQUFNLE1BQXZDLEVBQStDO0FBQ2xEO0FBQ0Q7QUFDRjs7QUFFRCxjQUFZLEtBQVosRUFBbUI7QUFDakIsUUFBSSxNQUFNLElBQU4sSUFBYyxNQUFsQixFQUEwQjtBQUN4QixXQUFLLE1BQUwsQ0FBWSxLQUFaO0FBQ0QsS0FGRCxNQUdLLElBQUksTUFBTSxJQUFOLElBQWMsVUFBbEIsRUFBOEI7QUFDakMsV0FBSyxVQUFMLENBQWdCLEtBQWhCO0FBQ0QsS0FGSSxNQUdBLElBQUksTUFBTSxJQUFOLElBQWMsV0FBbEIsRUFBK0I7QUFDbEMsV0FBSyxXQUFMLENBQWlCLEtBQWpCO0FBQ0QsS0FGSSxNQUdBLElBQUksTUFBTSxJQUFOLElBQWMsU0FBbEIsRUFBNkI7QUFDaEMsV0FBSyxTQUFMLENBQWUsS0FBZjtBQUNEO0FBQ0Y7O0FBRUQsbUJBQWlCO0FBQ2YsU0FBSyxHQUFMLEdBQVcsU0FBUyxjQUFULENBQXdCLEtBQXhCLENBQVg7O0FBRUEsUUFBSSxZQUFZLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUFoQjtBQUNBLGNBQVUsU0FBVixDQUFvQixHQUFwQixDQUF3QixVQUF4Qjs7QUFFQSxTQUFLLElBQUwsR0FBWSxJQUFJLElBQUosRUFBWjtBQUNBLFNBQUssSUFBTCxDQUFVLEdBQVYsR0FBZ0IsZ0JBQWhCLENBQWlDLFFBQWpDLEVBQTRDLENBQUQsSUFBTztBQUNoRCxVQUFJLFlBQVksRUFBRSxNQUFGLENBQVMsU0FBekI7QUFDQSxVQUFJLFVBQVUsTUFBZCxFQUFzQjtBQUNwQjtBQUNBLGFBQUssT0FBTCxDQUFhLFVBQVUsQ0FBVixFQUFhLEVBQTFCO0FBQ0Q7QUFDRixLQU5EOztBQVFBLFNBQUssVUFBTCxHQUFrQixTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBbEI7QUFDQSxTQUFLLFVBQUwsQ0FBZ0IsU0FBaEIsQ0FBMEIsR0FBMUIsQ0FBOEIsV0FBOUI7O0FBRUEsU0FBSyxVQUFMLENBQWdCLFdBQWhCLENBQTRCLEtBQUssSUFBTCxDQUFVLEdBQVYsRUFBNUI7O0FBRUEsUUFBSSxLQUFLLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUFUO0FBQ0EsT0FBRyxTQUFILENBQWEsR0FBYixDQUFpQixtQkFBakI7QUFDQSxPQUFHLFNBQUgsR0FBZSxPQUFmO0FBQ0EsY0FBVSxXQUFWLENBQXNCLEVBQXRCOztBQUVBLGNBQVUsV0FBVixDQUFzQixLQUFLLFVBQTNCOztBQUVBLFNBQUssR0FBTCxDQUFTLFdBQVQsQ0FBcUIsU0FBckI7O0FBRUEsU0FBSyxTQUFMLEdBQWlCLElBQUksU0FBSixDQUFjLEVBQUUsUUFBUSxLQUFLLEdBQWYsRUFBZCxDQUFqQjs7QUFFQSxTQUFLLGlCQUFMLEdBQXlCLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUF6QjtBQUNBLFNBQUssaUJBQUwsQ0FBdUIsU0FBdkIsQ0FBaUMsR0FBakMsQ0FBcUMsWUFBckM7O0FBRUEsU0FBSyxNQUFMLEdBQWMsU0FBUyxhQUFULENBQXVCLFFBQXZCLENBQWQ7QUFDQSxTQUFLLGlCQUFMLENBQXVCLFdBQXZCLENBQW1DLEtBQUssTUFBeEM7O0FBRUEsU0FBSyxjQUFMLEdBQXNCLElBQUksU0FBSixDQUFjLEVBQUUsT0FBTyxZQUFULEVBQXVCLFNBQVMsS0FBSyxpQkFBckMsRUFBd0QsR0FBRyxFQUEzRCxFQUErRCxHQUFHLEVBQWxFLEVBQXNFLE9BQU8sR0FBN0UsRUFBa0YsUUFBUSxHQUExRixFQUFkLENBQXRCO0FBQ0EsU0FBSyxTQUFMLENBQWUsR0FBZixDQUFtQixLQUFLLGNBQXhCOztBQUVBLFNBQUssU0FBTCxHQUFpQixTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBakI7QUFDQSxTQUFLLFNBQUwsQ0FBZSxTQUFmLENBQXlCLEdBQXpCLENBQTZCLGtCQUE3Qjs7QUFFQSxTQUFLLGdCQUFMLEdBQXdCLElBQUksU0FBSixDQUFjLEVBQUUsT0FBTyxTQUFULEVBQW9CLFNBQVMsS0FBSyxTQUFsQyxFQUE2QyxHQUFHLEVBQWhELEVBQW9ELEdBQUcsR0FBdkQsRUFBNEQsT0FBTyxHQUFuRSxFQUF3RSxRQUFRLEdBQWhGLEVBQXFGLFFBQVEsS0FBN0YsRUFBZCxDQUF4QjtBQUNBLFNBQUssU0FBTCxDQUFlLEdBQWYsQ0FBbUIsS0FBSyxnQkFBeEI7O0FBRUEsU0FBSyxTQUFMLEdBQWlCLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUFqQjtBQUNBLFNBQUssU0FBTCxDQUFlLFNBQWYsQ0FBeUIsR0FBekIsQ0FBNkIsU0FBN0I7O0FBRUEsU0FBSyxnQkFBTCxHQUF3QixJQUFJLFNBQUosQ0FBYyxFQUFFLE9BQU8sU0FBVCxFQUFvQixTQUFTLEtBQUssU0FBbEMsRUFBNkMsR0FBRyxHQUFoRCxFQUFxRCxHQUFHLEVBQXhELEVBQTRELE9BQU8sR0FBbkUsRUFBd0UsUUFBUSxHQUFoRixFQUFkLENBQXhCO0FBQ0EsU0FBSyxTQUFMLENBQWUsR0FBZixDQUFtQixLQUFLLGdCQUF4QjtBQUVEOztBQUVELHVCQUFxQjtBQUNuQixXQUFPLGdCQUFQLENBQXdCLE1BQXhCLEVBQWdDLElBQWhDLEVBQXNDLEtBQXRDO0FBQ0EsV0FBTyxnQkFBUCxDQUF3QixXQUF4QixFQUFxQyxJQUFyQyxFQUEyQyxLQUEzQztBQUNBLFdBQU8sZ0JBQVAsQ0FBd0IsVUFBeEIsRUFBb0MsSUFBcEMsRUFBMEMsS0FBMUM7O0FBRUEsV0FBTyxnQkFBUCxDQUF3QixTQUF4QixFQUFtQyxJQUFuQyxFQUF5QyxLQUF6QztBQUNBLFdBQU8sZ0JBQVAsQ0FBd0IsT0FBeEIsRUFBaUMsSUFBakMsRUFBdUMsS0FBdkM7QUFDRDtBQXRWTzs7QUF5VlYsT0FBTyxPQUFQLEdBQWlCLEdBQWpCO0FBQ0EsT0FBTyxHQUFQLEdBQWEsR0FBYjs7Ozs7O0FDdldBLE1BQU0sU0FBTixDQUFnQjtBQUNkLGNBQVksTUFBWixFQUFvQjtBQUNsQixTQUFLLE1BQUwsR0FBYyxNQUFkO0FBQ0EsU0FBSyxNQUFMLEdBQWMsQ0FBZDtBQUNBLFNBQUssRUFBTCxHQUFVLENBQVY7QUFDRDs7QUFFRCxTQUFPO0FBQ0wsU0FBSyxJQUFMLEdBQVksS0FBSyxNQUFMLENBQVksUUFBWixFQUFaO0FBQ0EsU0FBSyxHQUFMLEdBQVcsS0FBSyxJQUFMLEdBQVksQ0FBdkI7QUFDQSxTQUFLLEVBQUwsR0FBVSxDQUFWO0FBQ0Q7O0FBRUQsVUFBUTtBQUNOLFFBQUksS0FBSyxFQUFMLEdBQVUsQ0FBZCxFQUFpQjtBQUNmLFdBQUssSUFBTCxLQUFjLENBQWQ7QUFDQSxXQUFLLEdBQUwsR0FBVyxLQUFLLElBQUwsR0FBWSxDQUF2QjtBQUNBLFdBQUssRUFBTDtBQUNELEtBSkQsTUFJTztBQUNMLFdBQUssSUFBTDtBQUNEO0FBQ0Y7O0FBRUQsT0FBSyxNQUFMLEVBQWE7QUFDWCxRQUFJLEtBQUssRUFBTCxJQUFXLENBQWYsRUFBa0I7QUFDaEIsV0FBSyxJQUFMO0FBQ0Q7O0FBRUQsUUFBSSxNQUFKLEVBQVk7QUFDVixVQUFJLFFBQVEsQ0FBWjtBQUNBLFdBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxNQUFwQixFQUE0QixHQUE1QixFQUFpQztBQUMvQixpQkFBVSxLQUFLLEdBQUwsSUFBWSxDQUF0QjtBQUNBLGFBQUssS0FBTDtBQUNEO0FBQ0QsYUFBTyxLQUFQO0FBQ0QsS0FQRCxNQU9PO0FBQ0wsVUFBSSxRQUFRLEtBQUssR0FBTCxHQUFXLENBQVgsR0FBZSxDQUEzQjtBQUNBLFdBQUssS0FBTDtBQUNBLGFBQU8sS0FBUDtBQUNEO0FBQ0Y7QUF4Q2E7O0FBMkNoQixPQUFPLE9BQVAsR0FBaUIsU0FBakI7Ozs7QUMzQ0EsTUFBTSxNQUFOLENBQWE7QUFDWCxjQUFZLE1BQVosRUFBb0I7QUFDbEIsU0FBSyxLQUFMLEdBQWEsT0FBTyxLQUFwQjtBQUNBLFNBQUssTUFBTCxHQUFjLE9BQU8sTUFBckI7QUFDQSxTQUFLLE1BQUwsR0FBYyxPQUFPLE1BQXJCO0FBQ0Q7QUFMVTs7QUFRYixPQUFPLE9BQVAsR0FBaUIsTUFBakI7Ozs7QUNSQSxNQUFNLFlBQU4sQ0FBbUI7QUFDakIsY0FBWSxNQUFaLEVBQW9CO0FBQ2xCLFNBQUssTUFBTCxHQUFjLE1BQWQ7QUFDQSxTQUFLLElBQUwsR0FBWSxJQUFJLFFBQUosQ0FBYSxLQUFLLE1BQWxCLENBQVo7QUFDQSxTQUFLLE1BQUwsR0FBYyxDQUFkO0FBQ0Q7O0FBRUQsTUFBSSxNQUFKLEdBQWE7QUFDWCxXQUFPLEtBQUssTUFBTCxDQUFZLFVBQW5CO0FBQ0Q7O0FBRUQsT0FBSyxTQUFPLENBQVosRUFBZTtBQUNiLFNBQUssTUFBTCxHQUFjLE1BQWQ7QUFDRDs7QUFFRCxVQUFRLFFBQU0sQ0FBZCxFQUFpQjtBQUNmLFNBQUssTUFBTCxJQUFlLEtBQWY7QUFDQSxRQUFJLEtBQUssTUFBTCxHQUFjLEtBQUssTUFBTCxDQUFZLFVBQVosR0FBdUIsQ0FBekMsRUFBNEMsS0FBSyxNQUFMLEdBQWMsS0FBSyxNQUFMLENBQVksVUFBWixHQUF1QixDQUFyQztBQUM3Qzs7QUFFRCxTQUFPLFFBQU0sQ0FBYixFQUFnQjtBQUNkLFNBQUssTUFBTCxJQUFlLEtBQWY7QUFDQSxRQUFJLEtBQUssTUFBTCxHQUFjLENBQWxCLEVBQXFCLEtBQUssTUFBTCxHQUFjLENBQWQ7QUFDdEI7O0FBRUQsV0FBUyxNQUFULEVBQWlCO0FBQ2YsUUFBSSxVQUFVLFNBQWQsRUFBeUI7QUFDdkIsZUFBUyxLQUFLLE1BQWQ7QUFDQSxXQUFLLE1BQUw7QUFDRDtBQUNELFdBQU8sS0FBSyxJQUFMLENBQVUsUUFBVixDQUFtQixNQUFuQixDQUFQO0FBQ0Q7O0FBRUQsWUFBVSxNQUFWLEVBQWtCLGVBQWEsS0FBL0IsRUFBc0M7QUFDcEMsUUFBSSxVQUFVLFNBQWQsRUFBeUI7QUFDdkIsZUFBUyxLQUFLLE1BQWQ7QUFDQSxXQUFLLE1BQUwsSUFBZSxDQUFmO0FBQ0Q7QUFDRCxXQUFPLEtBQUssSUFBTCxDQUFVLFNBQVYsQ0FBb0IsTUFBcEIsRUFBNEIsWUFBNUIsQ0FBUDtBQUNEOztBQUVELFlBQVUsTUFBVixFQUFrQixlQUFhLEtBQS9CLEVBQXNDO0FBQ3BDLFFBQUksVUFBVSxTQUFkLEVBQXlCO0FBQ3ZCLGVBQVMsS0FBSyxNQUFkO0FBQ0EsV0FBSyxNQUFMLElBQWUsQ0FBZjtBQUNEO0FBQ0QsV0FBTyxLQUFLLElBQUwsQ0FBVSxTQUFWLENBQW9CLE1BQXBCLEVBQTRCLFlBQTVCLENBQVA7QUFDRDs7QUFFRCxjQUFZLE1BQVosRUFBb0I7QUFDbEIsV0FBTyxLQUFLLFNBQUwsQ0FBZSxNQUFmLEVBQXVCLElBQXZCLENBQVA7QUFDRDs7QUFFRCxjQUFZLE1BQVosRUFBb0I7QUFDbEIsV0FBTyxLQUFLLFNBQUwsQ0FBZSxNQUFmLEVBQXVCLElBQXZCLENBQVA7QUFDRDs7QUFFRCxXQUFTLFNBQU8sQ0FBaEIsRUFBbUIsTUFBbkIsRUFBMkI7QUFDekIsUUFBSSxVQUFVLFNBQWQsRUFBeUI7QUFDdkIsZUFBUyxLQUFLLE1BQWQ7QUFDQSxXQUFLLE1BQUwsSUFBZSxNQUFmO0FBQ0Q7QUFDRCxRQUFJLFFBQVEsSUFBSSxVQUFKLENBQWUsTUFBZixDQUFaO0FBQ0EsU0FBSyxJQUFJLElBQUksQ0FBYixFQUFnQixJQUFJLE1BQXBCLEVBQTRCLEdBQTVCLEVBQWlDO0FBQy9CLFlBQU0sQ0FBTixJQUFXLEtBQUssSUFBTCxDQUFVLFFBQVYsQ0FBbUIsU0FBUyxDQUE1QixDQUFYLENBRCtCLENBQ1k7QUFDNUM7QUFDRCxXQUFPLEtBQVA7QUFDRDtBQW5FZ0I7O0FBc0VuQixPQUFPLE9BQVAsR0FBaUIsWUFBakI7OztBQ3ZFQSxNQUFNLGVBQWUsUUFBUSxpQkFBUixDQUFyQjtBQUNBLE1BQU0sWUFBWSxRQUFRLGNBQVIsQ0FBbEI7QUFDQSxNQUFNLFFBQVEsUUFBUSxTQUFSLENBQWQ7O0FBRUEsTUFBTSxRQUFOLENBQWU7QUFDYixnQkFBYztBQUNaLFNBQUssS0FBTCxHQUFhLEVBQWI7QUFDQSxTQUFLLFNBQUwsR0FBaUIsRUFBakI7QUFDRDs7QUFFRCxXQUFTLE1BQVQsRUFBaUI7QUFDZixTQUFLLFVBQUwsQ0FBZ0IsTUFBaEI7QUFDRDs7QUFFRCxZQUFVLE1BQVYsRUFBa0I7QUFDaEIsU0FBSyxXQUFMLENBQWlCLE1BQWpCO0FBQ0Q7O0FBRUQsVUFBUSxHQUFSLEVBQWE7QUFDWCxXQUFPLEtBQUssU0FBTCxDQUFlLEdBQWYsQ0FBUDtBQUNEOztBQUVELG1CQUFpQixNQUFqQixFQUF5QjtBQUN2QixXQUFPLE9BQU8sWUFBUCxDQUNKLFNBQVMsSUFETCxFQUVILFVBQVUsQ0FBWCxHQUFnQixJQUZaLEVBR0gsVUFBVSxFQUFYLEdBQWlCLElBSGIsRUFJSCxVQUFVLEVBQVgsR0FBaUIsSUFKYixDQUFQO0FBTUQ7O0FBRUQsaUJBQWUsTUFBZixFQUF1QjtBQUNyQixRQUFJLE9BQU8sT0FBTyxXQUFQLEVBQVg7QUFDQSxXQUFPLEtBQUssZ0JBQUwsQ0FBc0IsSUFBdEIsQ0FBUDtBQUNEOztBQUVELGFBQVcsTUFBWCxFQUFtQjtBQUNqQixZQUFRLEdBQVIsQ0FBWSxZQUFaO0FBQ0EsUUFBSSxTQUFTLElBQUksWUFBSixDQUFpQixNQUFqQixDQUFiOztBQUVBLFdBQU8sT0FBTyxNQUFQLEdBQWdCLE9BQU8sTUFBOUIsRUFBc0M7QUFDcEMsVUFBSSxPQUFPLEtBQUssY0FBTCxDQUFvQixNQUFwQixDQUFYO0FBQ0EsVUFBSSxPQUFPLE9BQU8sU0FBUCxFQUFYOztBQUVBLFVBQUksUUFBUSxNQUFaLEVBQW9CO0FBQUU7QUFDcEIsZUFBTyxDQUFQLEVBQVU7QUFDUixjQUFJLFNBQVMsT0FBTyxRQUFQLEVBQWI7QUFDQSxjQUFJLFVBQVUsQ0FBZCxFQUFpQjtBQUNqQixjQUFJLFFBQVEsT0FBTyxRQUFQLENBQWdCLENBQWhCLENBQVo7QUFDQSxlQUFLLFNBQUwsQ0FBZSxNQUFmLElBQXlCLE1BQU0sTUFBTixDQUFhLENBQUMsV0FBRCxFQUFjLFlBQWQsS0FBK0I7QUFDbkUsbUJBQU8sZUFBZSxnQkFBZ0IsSUFBaEIsR0FBdUIsT0FBTyxZQUFQLENBQW9CLGVBQWUsSUFBbkMsQ0FBdkIsR0FBa0UsRUFBakYsQ0FBUDtBQUNELFdBRndCLEVBRXRCLEVBRnNCLENBQXpCO0FBR0Q7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQyxPQWxCRCxNQWtCTztBQUNMLGVBQU8sUUFBUCxDQUFnQixPQUFPLENBQXZCO0FBQ0Q7QUFDRjtBQUNGOztBQUVELGNBQVksSUFBWixFQUFrQixLQUFsQixFQUF5QixLQUF6QixFQUFnQyxNQUFoQyxFQUF3QztBQUN0QyxRQUFJLFNBQVMsSUFBSSxVQUFKLENBQWUsUUFBUSxNQUF2QixDQUFiO0FBQ0EsUUFBSSxTQUFTLENBQWI7O0FBRUEsUUFBSSxRQUFRLEtBQUssSUFBTCxDQUFVLENBQVYsQ0FBWjs7QUFFQSxRQUFJLE1BQU0sQ0FBQyxDQUFYOztBQUVBLFdBQU8sU0FBUyxRQUFRLE1BQXhCLEVBQWdDO0FBQzlCLGFBQU8sUUFBUCxJQUFtQixLQUFuQjtBQUNBLFVBQUksS0FBSyxJQUFMLEVBQUosRUFBaUI7QUFDZixZQUFJLENBQUMsS0FBSyxJQUFMLEVBQUwsRUFBa0I7QUFDaEIsa0JBQVEsS0FBSyxJQUFMLENBQVUsS0FBVixDQUFSO0FBQ0EsZ0JBQU0sQ0FBQyxDQUFQO0FBQ0QsU0FIRCxNQUdPO0FBQ0wsY0FBSSxDQUFDLEtBQUssSUFBTCxFQUFMLEVBQWtCO0FBQ2hCLHFCQUFTLEdBQVQ7QUFDRCxXQUZELE1BRU87QUFDTCxrQkFBTSxDQUFDLEdBQVA7QUFDQSxxQkFBUyxHQUFUO0FBQ0Q7QUFDRjtBQUNGO0FBQ0Y7O0FBRUQsV0FBTyxNQUFQO0FBQ0Q7O0FBRUQsY0FBWSxJQUFaLEVBQWtCLEtBQWxCLEVBQXlCLEtBQXpCLEVBQWdDLE1BQWhDLEVBQXdDO0FBQ3RDLFFBQUksU0FBUyxJQUFJLFVBQUosQ0FBZSxRQUFRLE1BQXZCLENBQWI7QUFDQSxRQUFJLFNBQVMsQ0FBYjs7QUFFQSxRQUFJLFFBQVEsS0FBSyxJQUFMLENBQVUsQ0FBVixDQUFaO0FBQ0EsUUFBSSxPQUFPLEtBQVg7O0FBRUEsV0FBTyxTQUFTLFFBQVEsTUFBeEIsRUFBZ0M7QUFDOUIsVUFBSSxDQUFDLElBQUwsRUFBVztBQUNULGVBQU8sUUFBUCxJQUFtQixLQUFuQjtBQUNBLGVBQU8sS0FBUDtBQUNEOztBQUVELFVBQUksS0FBSyxJQUFMLEVBQUosRUFBaUI7QUFDZixZQUFJLEtBQUssSUFBTCxFQUFKLEVBQWlCO0FBQ2Y7QUFDQSxjQUFJLElBQUksS0FBSyxJQUFMLENBQVUsQ0FBVixDQUFSO0FBQ0EsY0FBSSxPQUFPLElBQUksQ0FBZjtBQUNBLGNBQUksSUFBSixFQUFVO0FBQ1IscUJBQVMsSUFBVDtBQUNELFdBRkQsTUFFTztBQUNMLGdCQUFJLE1BQU0sS0FBSyxJQUFMLENBQVUsQ0FBVixDQUFWO0FBQ0EsaUJBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxHQUFwQixFQUF5QixHQUF6QixFQUE4QjtBQUM1QixxQkFBTyxRQUFQLElBQW1CLEtBQW5CO0FBQ0Q7QUFDRCxtQkFBTyxJQUFQO0FBQ0Q7QUFDRixTQWJELE1BYU87QUFDTDtBQUNBLGtCQUFRLEtBQUssSUFBTCxDQUFVLEtBQVYsQ0FBUjtBQUNEO0FBQ0Y7QUFDRjtBQUNELFdBQU8sTUFBUDtBQUNEOztBQUVELGtCQUFnQixNQUFoQixFQUF3QixLQUF4QixFQUErQixNQUEvQixFQUF1QztBQUNyQyxRQUFJLE9BQU8sT0FBTyxRQUFQLEVBQVg7QUFDQSxRQUFJLFFBQVEsT0FBTyxFQUFuQjs7QUFFQSxRQUFJLE9BQU8sSUFBSSxTQUFKLENBQWMsTUFBZCxDQUFYO0FBQ0EsUUFBSSxNQUFKO0FBQ0EsUUFBSSxjQUFjLENBQWxCOztBQUVBLFFBQUksUUFBUSxJQUFaLEVBQWtCO0FBQUU7QUFDbEIsZUFBUyxJQUFJLFVBQUosQ0FBZSxRQUFRLE1BQXZCLENBQVQ7QUFDQSxXQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksT0FBTyxNQUEzQixFQUFtQyxHQUFuQyxFQUF3QztBQUN0QyxlQUFPLENBQVAsSUFBWSxPQUFPLFFBQVAsRUFBWjtBQUNEO0FBQ0YsS0FMRCxNQU1LLElBQUksUUFBUSxJQUFSLElBQWdCLFFBQVEsSUFBNUIsRUFBa0M7QUFBRTtBQUN2QyxvQkFBYyxDQUFkO0FBQ0EsZUFBUyxLQUFLLFdBQUwsQ0FBaUIsSUFBakIsRUFBdUIsS0FBdkIsRUFBOEIsS0FBOUIsRUFBcUMsTUFBckMsQ0FBVDtBQUNELEtBSEksTUFJQSxJQUFJLFFBQVEsSUFBUixJQUFnQixRQUFRLElBQTVCLEVBQWtDO0FBQUU7QUFDdkMsZUFBUyxLQUFLLFdBQUwsQ0FBaUIsSUFBakIsRUFBdUIsS0FBdkIsRUFBOEIsS0FBOUIsRUFBcUMsTUFBckMsQ0FBVDtBQUNELEtBRkksTUFHQSxJQUFJLFFBQVEsSUFBUixJQUFnQixRQUFRLElBQTVCLEVBQWtDO0FBQUU7QUFDdkMsb0JBQWMsQ0FBZDtBQUNBLGVBQVMsS0FBSyxXQUFMLENBQWlCLElBQWpCLEVBQXVCLEtBQXZCLEVBQThCLEtBQTlCLEVBQXFDLE1BQXJDLENBQVQ7QUFDRCxLQUhJLE1BSUEsSUFBSSxRQUFRLElBQVIsSUFBZ0IsUUFBUSxJQUE1QixFQUFrQztBQUFFO0FBQ3ZDLGVBQVMsS0FBSyxXQUFMLENBQWlCLElBQWpCLEVBQXVCLEtBQXZCLEVBQThCLEtBQTlCLEVBQXFDLE1BQXJDLENBQVQ7QUFDRCxLQUZJLE1BR0EsSUFBSSxRQUFRLElBQVIsSUFBZ0IsUUFBUSxJQUE1QixFQUFrQztBQUFFO0FBQ3ZDLGVBQVMsS0FBSyxXQUFMLENBQWlCLElBQWpCLEVBQXVCLEtBQXZCLEVBQThCLEtBQTlCLEVBQXFDLE1BQXJDLENBQVQ7QUFDRCxLQUZJLE1BR0EsSUFBSSxRQUFRLElBQVIsSUFBZ0IsUUFBUSxJQUE1QixFQUFrQztBQUFFO0FBQ3ZDLGVBQVMsS0FBSyxXQUFMLENBQWlCLElBQWpCLEVBQXVCLEtBQXZCLEVBQThCLEtBQTlCLEVBQXFDLE1BQXJDLENBQVQ7QUFDRCxLQUZJLE1BR0EsSUFBSSxRQUFRLElBQVIsSUFBZ0IsUUFBUSxJQUE1QixFQUFrQztBQUFFO0FBQ3ZDLGVBQVMsS0FBSyxXQUFMLENBQWlCLElBQWpCLEVBQXVCLEtBQXZCLEVBQThCLEtBQTlCLEVBQXFDLE1BQXJDLENBQVQ7QUFDRCxLQUZJLE1BR0EsSUFBSSxRQUFRLElBQVIsSUFBZ0IsUUFBUSxJQUE1QixFQUFrQztBQUFFO0FBQ3ZDLGVBQVMsS0FBSyxXQUFMLENBQWlCLElBQWpCLEVBQXVCLEtBQXZCLEVBQThCLEtBQTlCLEVBQXFDLE1BQXJDLENBQVQ7QUFDRCxLQUZJLE1BR0E7QUFDSCxjQUFRLEdBQVIsQ0FBWSxTQUFaLEVBQXVCLElBQXZCO0FBQ0Q7O0FBRUQsUUFBSSxXQUFKLEVBQWlCO0FBQUU7QUFDakIsVUFBSSxPQUFPLElBQUksVUFBSixDQUFlLE9BQU8sTUFBdEIsQ0FBWDtBQUNBLFdBQUssSUFBSSxJQUFJLENBQVIsRUFBVyxRQUFRLENBQXhCLEVBQTJCLElBQUksT0FBTyxNQUF0QyxFQUE4QyxHQUE5QyxFQUFtRDtBQUNqRCxhQUFLLEtBQUwsSUFBYyxPQUFPLENBQVAsQ0FBZDtBQUNBLGlCQUFTLENBQVQ7QUFDQSxZQUFJLFNBQVMsU0FBUyxDQUF0QixFQUF5QixRQUFRLENBQUUsSUFBSSxNQUFMLElBQWdCLENBQWpCLElBQXNCLENBQTlCO0FBQzFCO0FBQ0QsZUFBUyxJQUFUO0FBQ0Q7O0FBRUQsV0FBTyxNQUFQO0FBQ0Q7O0FBRUQsWUFBVSxNQUFWLEVBQWtCLEtBQWxCLEVBQXlCLE1BQXpCLEVBQWlDO0FBQy9CLFFBQUksT0FBTyxPQUFPLE1BQWxCOztBQUVBLFFBQUksT0FBTyxLQUFLLGNBQUwsQ0FBb0IsTUFBcEIsQ0FBWDtBQUNBLFFBQUksT0FBTyxPQUFPLFNBQVAsRUFBWDs7QUFFQSxRQUFJLFNBQVMsTUFBYixFQUFxQjs7QUFFckIsUUFBSSxVQUFVLEVBQWQ7O0FBRUEsU0FBSyxJQUFJLElBQUksQ0FBYixFQUFnQixJQUFJLFFBQVEsQ0FBNUIsRUFBK0IsR0FBL0IsRUFDRSxRQUFRLElBQVIsQ0FBYSxPQUFPLFdBQVAsRUFBYjs7QUFFRixRQUFJLFNBQVMsSUFBSSxVQUFKLENBQWUsUUFBUSxNQUF2QixDQUFiOztBQUVBLFNBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxRQUFRLE1BQTVCLEVBQW9DLEdBQXBDLEVBQXlDO0FBQ3ZDLGFBQU8sSUFBUCxDQUFZLE9BQU8sUUFBUSxDQUFSLENBQW5CO0FBQ0EsVUFBSSxTQUFTLEtBQUssZUFBTCxDQUFxQixNQUFyQixFQUE2QixDQUE3QixFQUFnQyxNQUFoQyxDQUFiO0FBQ0EsVUFBSSxNQUFKLEVBQVk7QUFDVixhQUFLLElBQUksSUFBSSxDQUFSLEVBQVcsSUFBSSxDQUFmLEVBQWtCLElBQUksQ0FBM0IsRUFBOEIsSUFBSSxPQUFPLE1BQXpDLEVBQWlELEdBQWpELEVBQXNEO0FBQ3BELGlCQUFPLElBQUksSUFBSSxDQUFSLEdBQVksSUFBSSxLQUF2QixJQUFnQyxPQUFPLENBQVAsQ0FBaEM7QUFDQSxjQUFLLEtBQUssQ0FBTCxHQUFTLElBQUksQ0FBYixHQUFpQixDQUF0QjtBQUNBLGNBQUssS0FBSyxDQUFMLEdBQVMsQ0FBVCxHQUFhLElBQUksQ0FBdEI7QUFDRDtBQUNGO0FBRUY7O0FBRUQsV0FBTyxNQUFQO0FBQ0Q7O0FBRUQsWUFBVSxNQUFWLEVBQWtCO0FBQ2hCLFFBQUksT0FBTyxLQUFLLGNBQUwsQ0FBb0IsTUFBcEIsQ0FBWDtBQUNBLFFBQUksU0FBUyxNQUFiLEVBQXFCO0FBQ3JCLFFBQUksT0FBTyxPQUFPLFNBQVAsRUFBWDs7QUFFQSxRQUFJLEtBQUssRUFBVDs7QUFFQSxPQUFHLEVBQUgsR0FBUSxPQUFPLFdBQVAsRUFBUjtBQUNBLE9BQUcsSUFBSCxHQUFVLE9BQU8sV0FBUCxFQUFWO0FBQ0EsT0FBRyxJQUFILEdBQVUsT0FBTyxXQUFQLEVBQVY7QUFDQSxPQUFHLEtBQUgsR0FBVyxPQUFPLFFBQVAsRUFBWDtBQUNBLFdBQU8sT0FBUDtBQUNBLE9BQUcsQ0FBSCxHQUFPLE9BQU8sV0FBUCxFQUFQO0FBQ0EsT0FBRyxDQUFILEdBQU8sT0FBTyxXQUFQLEVBQVA7QUFDQSxPQUFHLEtBQUgsR0FBVyxPQUFPLFdBQVAsRUFBWDtBQUNBLE9BQUcsTUFBSCxHQUFZLE9BQU8sV0FBUCxFQUFaO0FBQ0EsT0FBRyxPQUFILEdBQWEsRUFBYjs7QUFFQSxRQUFJLEdBQUcsSUFBUCxFQUFhO0FBQ1gsV0FBSyxJQUFJLElBQUksQ0FBYixFQUFnQixJQUFJLEdBQUcsSUFBdkIsRUFBNkIsR0FBN0IsRUFBa0M7QUFDaEMsWUFBSSxPQUFPLEtBQUssY0FBTCxDQUFvQixNQUFwQixDQUFYO0FBQ0EsWUFBSSxPQUFPLE9BQU8sU0FBUCxFQUFYO0FBQ0EsWUFBSSxPQUFPLE9BQU8sTUFBUCxHQUFnQixJQUFoQixHQUF1QixDQUFsQzs7QUFFQSxZQUFJLFNBQVMsS0FBSyxTQUFMLENBQWUsTUFBZixFQUF1QixHQUFHLEtBQTFCLEVBQWlDLEdBQUcsTUFBcEMsQ0FBYjtBQUNBLFdBQUcsT0FBSCxDQUFXLElBQVgsQ0FBZ0IsTUFBaEI7QUFDQSxlQUFPLElBQVAsQ0FBWSxJQUFaO0FBQ0Q7QUFDRjs7QUFFRCxXQUFPLEVBQVA7QUFDRDs7QUFFRCxZQUFVLE1BQVYsRUFBa0I7QUFDaEIsUUFBSSxPQUFPLEtBQUssY0FBTCxDQUFvQixNQUFwQixDQUFYO0FBQ0EsUUFBSSxPQUFPLE9BQU8sU0FBUCxFQUFYOztBQUVBLFFBQUksS0FBSyxFQUFUOztBQUVBLE9BQUcsRUFBSCxHQUFRLE9BQU8sV0FBUCxFQUFSO0FBQ0EsT0FBRyxDQUFILEdBQU8sT0FBTyxRQUFQLEVBQVA7QUFDQSxPQUFHLENBQUgsR0FBTyxPQUFPLFFBQVAsRUFBUDtBQUNBLE9BQUcsS0FBSCxHQUFXLE9BQU8sUUFBUCxFQUFYO0FBQ0EsT0FBRyxNQUFILEdBQVksT0FBTyxRQUFQLEVBQVo7QUFDQSxPQUFHLEtBQUgsR0FBVyxPQUFPLFFBQVAsRUFBWDtBQUNBLE9BQUcsTUFBSCxHQUFZLE9BQU8sUUFBUCxFQUFaO0FBQ0EsT0FBRyxNQUFILEdBQVksT0FBTyxXQUFQLEVBQVo7QUFDQSxPQUFHLE1BQUgsR0FBWSxPQUFPLFdBQVAsRUFBWjtBQUNBLE9BQUcsU0FBSCxHQUFlLE9BQU8sUUFBUCxFQUFmO0FBQ0EsT0FBRyxJQUFILEdBQVUsRUFBVjs7QUFFQSxXQUFPLEtBQUssY0FBTCxDQUFvQixNQUFwQixDQUFQO0FBQ0EsV0FBTyxPQUFPLFNBQVAsRUFBUDtBQUNBLFdBQU8sT0FBUCxDQUFlLE9BQU8sQ0FBdEI7O0FBRUEsV0FBTyxPQUFQLENBQWUsQ0FBZjs7QUFFQSxTQUFLLElBQUksSUFBSSxPQUFPLFFBQVAsRUFBYixFQUFnQyxNQUFNLENBQXRDLEVBQXlDLElBQUksT0FBTyxRQUFQLEVBQTdDLEVBQWdFO0FBQzlELFNBQUcsSUFBSCxJQUFXLE9BQU8sWUFBUCxDQUFvQixDQUFwQixDQUFYO0FBQ0Q7O0FBRUQsV0FBTyxFQUFQO0FBQ0Q7O0FBRUQsWUFBVSxHQUFWLEVBQWU7QUFDYixRQUFJLFFBQVEsS0FBSyxLQUFMLENBQVcsR0FBWCxDQUFaO0FBQ0EsUUFBSSxDQUFDLEtBQUwsRUFBWTs7QUFFWixRQUFJLFNBQVMsSUFBSSxZQUFKLENBQWlCLE1BQU0sTUFBdkIsQ0FBYjs7QUFFQSxRQUFJLE1BQU0sTUFBTSxNQUFoQjs7QUFFQSxRQUFJLEtBQUo7QUFDQSxRQUFJLE1BQUo7QUFDQSxRQUFJLFVBQUo7QUFDQSxRQUFJLE9BQUo7QUFDQSxRQUFJLE1BQUo7QUFDQSxRQUFJLFdBQUo7QUFDQSxRQUFJLFFBQVEsRUFBWjtBQUNBLFFBQUksUUFBUSxFQUFaOztBQUVBLFdBQU8sT0FBTyxNQUFQLEdBQWdCLEdBQXZCLEVBQTRCO0FBQzFCLFVBQUksT0FBTyxLQUFLLGNBQUwsQ0FBb0IsTUFBcEIsQ0FBWDtBQUNBLFVBQUksT0FBTyxPQUFPLFNBQVAsRUFBWDtBQUNBLFVBQUksT0FBTyxPQUFPLE1BQVAsR0FBZ0IsSUFBaEIsR0FBdUIsQ0FBbEM7O0FBRUEsVUFBSSxRQUFRLE1BQVosRUFBb0I7QUFDbEIsZ0JBQVEsT0FBTyxXQUFQLEVBQVI7QUFDQSxpQkFBUyxPQUFPLFdBQVAsRUFBVDtBQUNBLHFCQUFhLE9BQU8sV0FBUCxFQUFiO0FBQ0QsT0FKRCxNQUtLLElBQUksUUFBUSxNQUFaLEVBQW9CO0FBQ3ZCLGVBQU8sT0FBUCxDQUFlLEVBQWY7QUFDQSxpQkFBUyxLQUFLLFNBQUwsQ0FBZSxNQUFmLEVBQXVCLEtBQXZCLEVBQThCLE1BQTlCLENBQVQ7QUFDRCxPQUhJLE1BSUEsSUFBSSxRQUFRLE1BQVosRUFBb0I7QUFDdkIsa0JBQVUsRUFBVjtBQUNBLGFBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxHQUFwQixFQUF5QixHQUF6QixFQUE4QjtBQUM1QixjQUFJLElBQUksT0FBTyxRQUFQLEVBQVI7QUFDQSxjQUFJLElBQUksT0FBTyxRQUFQLEVBQVI7QUFDQSxjQUFJLElBQUksT0FBTyxRQUFQLEVBQVI7QUFDQSxrQkFBUSxJQUFSLENBQWEsQ0FBYixFQUFnQixDQUFoQixFQUFtQixDQUFuQjtBQUNEO0FBQ0YsT0FSSSxNQVNBLElBQUksUUFBUSxNQUFaLEVBQW9CO0FBQ3ZCLFlBQUksS0FBSyxLQUFLLFNBQUwsQ0FBZSxNQUFmLENBQVQ7QUFDQSxjQUFNLEdBQUcsRUFBVCxJQUFlLEVBQWY7QUFDQTtBQUNELE9BSkksTUFLQSxJQUFJLFFBQVEsTUFBWixFQUFvQjtBQUN2QixZQUFJLEtBQUssS0FBSyxTQUFMLENBQWUsTUFBZixDQUFUO0FBQ0EsY0FBTSxHQUFHLEVBQVQsSUFBZSxFQUFmO0FBQ0QsT0FISSxNQUlBLElBQUksUUFBUSxNQUFaLEVBQW9CO0FBQ3ZCLHNCQUFjLE9BQU8sUUFBUCxFQUFkO0FBQ0E7QUFDRCxPQUhJLE1BSUE7QUFDSDtBQUNEO0FBQ0QsYUFBTyxJQUFQLENBQVksSUFBWjtBQUNEOztBQUVELFFBQUksT0FBTyxJQUFJLE1BQU0sSUFBVixDQUFlO0FBQ3hCLFVBQUksR0FEb0I7QUFFeEIsWUFBTSxLQUFLLFNBQUwsQ0FBZSxHQUFmLENBRmtCO0FBR3hCLGFBQU8sS0FIaUI7QUFJeEIsY0FBUSxNQUpnQjtBQUt4QixrQkFBWSxVQUxZO0FBTXhCLGFBQU8sS0FOaUI7QUFPeEIsYUFBTyxLQVBpQjtBQVF4QixjQUFRLE1BUmdCO0FBU3hCLGVBQVMsT0FUZTtBQVV4QixtQkFBYTtBQVZXLEtBQWYsQ0FBWDs7QUFhQSxXQUFPLElBQVA7QUFDRDs7QUFFRCxnQkFBYztBQUNaO0FBQ0EsUUFBSSxTQUFTLEVBQWI7QUFDQSxTQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksS0FBSyxLQUFMLENBQVcsTUFBL0IsRUFBdUMsR0FBdkMsRUFBNEM7QUFDMUMsVUFBSSxPQUFPLEtBQUssS0FBTCxDQUFXLENBQVgsQ0FBWDtBQUNBLFVBQUksSUFBSixFQUFVO0FBQ1IsZUFBTyxJQUFQLENBQVksRUFBRSxJQUFJLENBQU4sRUFBUyxNQUFNLEtBQUssU0FBTCxDQUFlLENBQWYsQ0FBZixFQUFaO0FBQ0Q7QUFDRjtBQUNELFdBQU8sTUFBUDtBQUNEOztBQUVELGNBQVksTUFBWixFQUFvQjtBQUNsQixZQUFRLEdBQVIsQ0FBWSxhQUFaOztBQUVBLFFBQUksU0FBUyxJQUFJLFlBQUosQ0FBaUIsTUFBakIsQ0FBYjs7QUFFQSxRQUFJLE9BQU8sS0FBSyxjQUFMLENBQW9CLE1BQXBCLENBQVg7QUFDQSxRQUFJLE9BQU8sT0FBTyxTQUFQLEVBQVg7O0FBRUEsUUFBSSxRQUFRLE1BQVosRUFBb0I7O0FBRXBCLFdBQU8sS0FBSyxjQUFMLENBQW9CLE1BQXBCLENBQVA7QUFDQSxXQUFPLE9BQU8sU0FBUCxFQUFQOztBQUVBLFFBQUksUUFBUSxNQUFaLEVBQW9CO0FBQ2xCLFdBQUssUUFBTCxHQUFnQixPQUFPLFFBQVAsRUFBaEI7O0FBRUEsVUFBSSxVQUFVLEVBQWQ7O0FBRUEsV0FBSyxJQUFJLElBQUksQ0FBYixFQUFnQixJQUFJLEtBQUssUUFBekIsRUFBbUMsR0FBbkMsRUFBd0M7QUFDdEMsWUFBSSxLQUFLLE9BQU8sUUFBUCxFQUFUO0FBQ0EsWUFBSSxPQUFPLE9BQU8sV0FBUCxFQUFYO0FBQ0EsZ0JBQVEsRUFBUixJQUFjLElBQWQ7QUFDRDs7QUFFRCxXQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksUUFBUSxNQUE1QixFQUFvQyxHQUFwQyxFQUF5QztBQUN2QyxZQUFJLE9BQU8sUUFBUSxDQUFSLENBQVg7QUFDQSxZQUFJLFFBQVEsU0FBWixFQUF1QjtBQUNyQixpQkFBTyxJQUFQLENBQVksSUFBWjtBQUNBLGNBQUksT0FBTyxLQUFLLGNBQUwsQ0FBb0IsTUFBcEIsQ0FBWDtBQUNBLGNBQUksT0FBTyxPQUFPLFNBQVAsRUFBWDtBQUNBLGVBQUssS0FBTCxDQUFXLENBQVgsSUFBZ0IsT0FBTyxRQUFQLENBQWdCLE9BQU8sQ0FBdkIsQ0FBaEI7QUFDRDtBQUNGO0FBQ0Y7QUFDRjs7QUFqWlk7O0FBcVpmLE9BQU8sT0FBUCxHQUFpQixRQUFqQjs7OztBQ3haQSxJQUFJLFFBQVE7QUFDVixjQUFZLFFBQVEsZUFBUixDQURGO0FBRVYsUUFBTSxRQUFRLFFBQVI7QUFGSSxDQUFaOztBQUtBLE9BQU8sT0FBUCxHQUFpQixLQUFqQjs7O0FDTkEsTUFBTSxhQUFhLFFBQVEsZUFBUixDQUFuQjs7QUFFQSxNQUFNLElBQU4sQ0FBVztBQUNULGNBQVksTUFBWixFQUFvQjtBQUNsQixTQUFLLEVBQUwsR0FBVSxPQUFPLEVBQWpCO0FBQ0EsU0FBSyxJQUFMLEdBQVksT0FBTyxJQUFuQjtBQUNBLFNBQUssS0FBTCxHQUFhLE9BQU8sS0FBcEI7QUFDQSxTQUFLLE1BQUwsR0FBYyxPQUFPLE1BQXJCO0FBQ0EsU0FBSyxVQUFMLEdBQWtCLE9BQU8sVUFBekI7QUFDQSxTQUFLLEtBQUwsR0FBYSxPQUFPLEtBQXBCO0FBQ0EsU0FBSyxLQUFMLEdBQWEsT0FBTyxLQUFwQjtBQUNBLFNBQUssT0FBTCxHQUFlLE9BQU8sT0FBdEI7QUFDQSxTQUFLLE1BQUwsR0FBYyxPQUFPLE1BQXJCO0FBQ0EsU0FBSyxXQUFMLEdBQW1CLE9BQU8sV0FBMUI7QUFDRDs7QUFFRCxlQUFhO0FBQ1gsUUFBSSxVQUFVLEVBQWQ7QUFDQSxTQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksS0FBSyxLQUFMLENBQVcsTUFBL0IsRUFBdUMsR0FBdkMsRUFBNEM7QUFDMUMsVUFBSSxPQUFPLEtBQUssS0FBTCxDQUFXLENBQVgsQ0FBWDtBQUNBLFVBQUksSUFBSixFQUFVO0FBQ1IsWUFBSSxPQUFPLEtBQUssS0FBTCxDQUFXLEtBQUssRUFBaEIsQ0FBWDtBQUNBLFlBQUksS0FBSyxJQUFJLFVBQUosQ0FBZTtBQUN0QixjQUFJLEtBQUssRUFEYTtBQUV0QixnQkFBTSxLQUFLLElBRlc7QUFHdEIsYUFBRyxLQUFLLENBSGM7QUFJdEIsYUFBRyxLQUFLLENBSmM7QUFLdEIsaUJBQU8sS0FBSyxLQUxVO0FBTXRCLGtCQUFRLEtBQUssTUFOUztBQU90QixtQkFBUyxLQUFLO0FBUFEsU0FBZixDQUFUO0FBU0EsZ0JBQVEsSUFBUixDQUFhLEVBQWI7QUFDRDtBQUNGO0FBQ0QsV0FBTyxPQUFQO0FBQ0Q7QUFqQ1E7O0FBb0NYLE9BQU8sT0FBUCxHQUFpQixJQUFqQjs7OztBQ3JDQSxNQUFNLFVBQU4sQ0FBaUI7QUFDZixjQUFZLE1BQVosRUFBb0I7QUFDbEIsU0FBSyxFQUFMLEdBQVUsT0FBTyxFQUFqQjtBQUNBLFNBQUssSUFBTCxHQUFZLE9BQU8sSUFBbkI7QUFDQSxTQUFLLElBQUwsR0FBWSxPQUFPLElBQW5CO0FBQ0EsU0FBSyxJQUFMLEdBQVksT0FBTyxJQUFuQjtBQUNBLFNBQUssS0FBTCxHQUFhLE9BQU8sS0FBcEI7QUFDQSxTQUFLLENBQUwsR0FBUyxPQUFPLENBQWhCO0FBQ0EsU0FBSyxDQUFMLEdBQVMsT0FBTyxDQUFoQjtBQUNBLFNBQUssS0FBTCxHQUFhLE9BQU8sS0FBcEI7QUFDQSxTQUFLLE1BQUwsR0FBYyxPQUFPLE1BQXJCO0FBQ0EsU0FBSyxPQUFMLEdBQWUsT0FBTyxPQUF0QjtBQUNEO0FBWmM7O0FBZWpCLE9BQU8sT0FBUCxHQUFpQixVQUFqQjs7OztBQ2ZBLE1BQU0sU0FBTixDQUFnQjtBQUNkLGNBQVksTUFBWixFQUFvQjtBQUNsQixTQUFLLE1BQUwsR0FBYyxPQUFPLE1BQXJCOztBQUVBLFNBQUssRUFBTCxHQUFVLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUFWO0FBQ0EsU0FBSyxFQUFMLENBQVEsU0FBUixDQUFrQixHQUFsQixDQUFzQixXQUF0Qjs7QUFFQSxTQUFLLE9BQUwsR0FBZSxTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBZjtBQUNBLFNBQUssT0FBTCxDQUFhLEVBQWIsR0FBa0IsT0FBbEI7QUFDQSxTQUFLLE9BQUwsQ0FBYSxTQUFiLENBQXVCLEdBQXZCLENBQTJCLGlCQUEzQjtBQUNBLFNBQUssT0FBTCxDQUFhLFdBQWIsQ0FBeUIsU0FBUyxjQUFULENBQXdCLE9BQU8sS0FBL0IsQ0FBekI7QUFDQSxTQUFLLEVBQUwsQ0FBUSxXQUFSLENBQW9CLEtBQUssT0FBekI7O0FBRUEsU0FBSyxTQUFMLEdBQWlCLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUFqQjtBQUNBLFNBQUssU0FBTCxDQUFlLEVBQWYsR0FBb0IsU0FBcEI7QUFDQSxTQUFLLFNBQUwsQ0FBZSxTQUFmLENBQXlCLEdBQXpCLENBQTZCLG1CQUE3Qjs7QUFFQSxTQUFLLFNBQUwsQ0FBZSxXQUFmLENBQTJCLE9BQU8sT0FBbEM7O0FBRUEsU0FBSyxFQUFMLENBQVEsV0FBUixDQUFvQixLQUFLLFNBQXpCOztBQUVBLFNBQUssRUFBTCxDQUFRLEtBQVIsQ0FBYyxJQUFkLEdBQXFCLE9BQU8sQ0FBUCxHQUFXLElBQWhDO0FBQ0EsU0FBSyxFQUFMLENBQVEsS0FBUixDQUFjLEdBQWQsR0FBb0IsT0FBTyxDQUFQLEdBQVcsSUFBL0I7O0FBRUE7QUFDQTtBQUNBLFNBQUssT0FBTCxDQUFhLE9BQU8sS0FBcEIsRUFBMkIsT0FBTyxNQUFsQzs7QUFFQSxRQUFJLE9BQU8sTUFBWCxFQUFtQjtBQUNqQixVQUFJLFdBQVcsU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQWY7QUFDQSxlQUFTLFNBQVQsQ0FBbUIsR0FBbkIsQ0FBdUIsa0JBQXZCO0FBQ0E7QUFDQSxXQUFLLEVBQUwsQ0FBUSxXQUFSLENBQW9CLFFBQXBCO0FBQ0Q7O0FBRUQsU0FBSyxFQUFMLENBQVEsZ0JBQVIsQ0FBeUIsV0FBekIsRUFBc0MsSUFBdEM7QUFDRDs7QUFFRCxRQUFNO0FBQ0osV0FBTyxLQUFLLEVBQVo7QUFDRDs7QUFFRCxVQUFRLEtBQVIsRUFBZSxNQUFmLEVBQXVCO0FBQ3JCLFNBQUssU0FBTCxDQUFlLEtBQWYsQ0FBcUIsUUFBckIsR0FBZ0MsS0FBSyxTQUFMLENBQWUsS0FBZixDQUFxQixLQUFyQixHQUE2QixRQUFRLElBQXJFO0FBQ0EsU0FBSyxTQUFMLENBQWUsS0FBZixDQUFxQixTQUFyQixHQUFpQyxLQUFLLFNBQUwsQ0FBZSxLQUFmLENBQXFCLE1BQXJCLEdBQThCLFNBQVMsSUFBeEU7QUFFRDs7QUFFRCxlQUFhO0FBQ1gsV0FBTyxtQkFBUCxDQUEyQixXQUEzQixFQUF3QyxJQUF4QztBQUNBLFdBQU8sbUJBQVAsQ0FBMkIsU0FBM0IsRUFBc0MsSUFBdEM7QUFDQSxXQUFPLG1CQUFQLENBQTJCLE1BQTNCLEVBQW1DLElBQW5DO0FBQ0Q7O0FBRUQsY0FBWSxLQUFaLEVBQW1CO0FBQ2pCLFFBQUksSUFBSSxNQUFNLFNBQWQ7QUFDQSxRQUFJLElBQUksTUFBTSxTQUFkO0FBQ0EsU0FBSyxFQUFMLENBQVEsS0FBUixDQUFjLElBQWQsR0FBc0IsS0FBSyxFQUFMLENBQVEsVUFBUixHQUFxQixDQUF0QixHQUEyQixJQUFoRDtBQUNBLFNBQUssRUFBTCxDQUFRLEtBQVIsQ0FBYyxHQUFkLEdBQXFCLEtBQUssRUFBTCxDQUFRLFNBQVIsR0FBb0IsQ0FBckIsR0FBMEIsSUFBOUM7QUFDRDs7QUFFRCxjQUFZLEtBQVosRUFBbUI7QUFDakIsUUFBSSxNQUFNLE1BQU4sSUFBZ0IsQ0FBaEIsSUFBcUIsTUFBTSxNQUFOLEtBQWlCLEtBQUssT0FBL0MsRUFBd0Q7QUFDdEQsYUFBTyxnQkFBUCxDQUF3QixXQUF4QixFQUFxQyxJQUFyQztBQUNBLGFBQU8sZ0JBQVAsQ0FBd0IsU0FBeEIsRUFBbUMsSUFBbkM7QUFDQSxhQUFPLGdCQUFQLENBQXdCLE1BQXhCLEVBQWdDLElBQWhDO0FBQ0Q7QUFDRjs7QUFFRCxZQUFVLEtBQVYsRUFBaUI7QUFDZixTQUFLLFVBQUw7QUFDRDs7QUFFRCxTQUFPLEtBQVAsRUFBYztBQUNaLFNBQUssVUFBTDtBQUNEOztBQUVELGNBQVksS0FBWixFQUFtQjtBQUNqQixRQUFJLE1BQU0sSUFBTixJQUFjLFdBQWxCLEVBQStCO0FBQzdCLFdBQUssV0FBTCxDQUFpQixLQUFqQjtBQUNELEtBRkQsTUFHSyxJQUFJLE1BQU0sSUFBTixJQUFjLFNBQWxCLEVBQTZCO0FBQ2hDLFdBQUssU0FBTCxDQUFlLEtBQWY7QUFDRCxLQUZJLE1BR0EsSUFBSSxNQUFNLElBQU4sSUFBYyxXQUFsQixFQUErQjtBQUNsQyxXQUFLLFdBQUwsQ0FBaUIsS0FBakI7QUFDRCxLQUZJLE1BR0EsSUFBSSxNQUFNLElBQU4sSUFBYyxNQUFsQixFQUEwQjtBQUM3QixXQUFLLE1BQUwsQ0FBWSxLQUFaO0FBQ0Q7QUFDRjtBQTFGYTs7QUE2RmhCLE9BQU8sT0FBUCxHQUFpQixTQUFqQjs7OztBQzdGQSxNQUFNLElBQU4sQ0FBVztBQUNULGNBQVksU0FBTyxFQUFuQixFQUF1QjtBQUNyQixTQUFLLElBQUwsR0FBWSxPQUFPLElBQVAsSUFBZSxTQUFmLEdBQTJCLE1BQTNCLEdBQW9DLE9BQU8sSUFBdkQ7QUFDQSxTQUFLLFFBQUwsR0FBZ0IsT0FBTyxRQUF2Qjs7QUFFQSxTQUFLLEVBQUwsR0FBVSxTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBVjs7QUFFQSxTQUFLLEtBQUwsR0FBYSxFQUFiO0FBQ0EsU0FBSyxTQUFMLEdBQWlCLEVBQWpCOztBQUVBLFFBQUksRUFBSjtBQUNBLFFBQUksS0FBSyxJQUFMLElBQWEsTUFBakIsRUFBeUI7QUFDdkIsV0FBSyxXQUFMO0FBQ0QsS0FGRCxNQUVPO0FBQ0wsV0FBSyxNQUFMO0FBQ0Q7QUFDRCxTQUFLLEVBQUwsQ0FBUSxTQUFSLENBQWtCLEdBQWxCLENBQXNCLEVBQXRCOztBQUVBLFNBQUssRUFBTCxDQUFRLGdCQUFSLENBQXlCLFdBQXpCLEVBQXNDLElBQXRDO0FBQ0EsU0FBSyxFQUFMLENBQVEsZ0JBQVIsQ0FBeUIsU0FBekIsRUFBb0MsSUFBcEM7QUFDQSxTQUFLLEVBQUwsQ0FBUSxnQkFBUixDQUF5QixPQUF6QixFQUFrQyxJQUFsQzs7QUFFQTtBQUNBLFNBQUssRUFBTCxDQUFRLFFBQVIsR0FBbUIsQ0FBQyxDQUFwQjtBQUNEOztBQUVELGFBQVcsSUFBWCxFQUFpQjtBQUNmLFFBQUksS0FBSyxTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBVDtBQUNBLE9BQUcsRUFBSCxHQUFRLFNBQVMsS0FBSyxFQUF0QjtBQUNBLE9BQUcsT0FBSCxDQUFXLEVBQVgsR0FBZ0IsS0FBSyxFQUFyQjs7QUFFQSxRQUFJLEtBQUssSUFBTCxJQUFhLE1BQWpCLEVBQXlCO0FBQ3ZCLFNBQUcsU0FBSCxDQUFhLEdBQWIsQ0FBaUIsZ0JBQWpCOztBQUVBLFVBQUksVUFBVSxTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBZDtBQUNBLGNBQVEsU0FBUixDQUFrQixHQUFsQixDQUFzQixpQkFBdEI7QUFDQSxjQUFRLFdBQVIsQ0FBb0IsS0FBSyxLQUF6QjtBQUNBLFNBQUcsV0FBSCxDQUFlLE9BQWY7O0FBRUEsVUFBSSxVQUFVLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUFkO0FBQ0EsY0FBUSxTQUFSLENBQWtCLEdBQWxCLENBQXNCLGlCQUF0QjtBQUNBLGNBQVEsV0FBUixDQUFvQixTQUFTLGNBQVQsQ0FBd0IsS0FBSyxLQUE3QixDQUFwQjtBQUNBLFNBQUcsV0FBSCxDQUFlLE9BQWY7QUFDRCxLQVpELE1BWU87QUFDTCxTQUFHLFNBQUgsQ0FBYSxHQUFiLENBQWlCLFdBQWpCO0FBQ0EsU0FBRyxXQUFILENBQWUsU0FBUyxjQUFULENBQXdCLEtBQUssS0FBN0IsQ0FBZjtBQUNEOztBQUVELFNBQUssRUFBTCxDQUFRLFdBQVIsQ0FBb0IsRUFBcEI7O0FBRUEsU0FBSyxLQUFMLENBQVcsSUFBWCxDQUFnQixJQUFoQjtBQUNEOztBQUVELFVBQVEsSUFBUixFQUFjO0FBQ1osU0FBSyxVQUFMLENBQWdCLElBQWhCO0FBQ0Q7O0FBRUQsV0FBUyxLQUFULEVBQWdCO0FBQ2QsU0FBSyxJQUFJLElBQUksQ0FBYixFQUFnQixJQUFJLE1BQU0sTUFBMUIsRUFBa0MsR0FBbEMsRUFBdUM7QUFDckMsVUFBSSxPQUFPLE1BQU0sQ0FBTixDQUFYO0FBQ0EsV0FBSyxVQUFMLENBQWdCLElBQWhCO0FBQ0Q7QUFDRjs7QUFFRCxVQUFRLEVBQVIsRUFBWTtBQUNWLFdBQU8sS0FBSyxLQUFMLENBQVcsSUFBWCxDQUFnQixXQUFXLFFBQVEsRUFBUixJQUFjLEVBQXpDLENBQVA7QUFDRDs7QUFFRCxRQUFNO0FBQ0osV0FBTyxLQUFLLEVBQVo7QUFDRDs7QUFFRCxTQUFPLEVBQVAsRUFBVyxTQUFPLEtBQWxCLEVBQXlCO0FBQ3ZCO0FBQ0EsUUFBSSxPQUFPLEtBQUssT0FBTCxDQUFhLEVBQWIsQ0FBWDs7QUFFQSxRQUFJLENBQUMsS0FBSyxTQUFMLENBQWUsUUFBZixDQUF3QixJQUF4QixDQUFMLEVBQW9DO0FBQ2xDLFVBQUksS0FBSyxLQUFLLEVBQUwsQ0FBUSxhQUFSLENBQXNCLFVBQVUsRUFBaEMsQ0FBVDtBQUNBLFVBQUksRUFBSixFQUFRO0FBQ04sV0FBRyxTQUFILENBQWEsR0FBYixDQUFpQixVQUFqQjtBQUNEO0FBQ0QsV0FBSyxTQUFMLENBQWUsSUFBZixDQUFvQixJQUFwQjtBQUNELEtBTkQsTUFNTztBQUNMO0FBQ0EsVUFBSSxNQUFKLEVBQVk7QUFDVixhQUFLLFFBQUwsQ0FBYyxFQUFkO0FBQ0Q7QUFDRjtBQUNGOztBQUVELFdBQVMsRUFBVCxFQUFhO0FBQ1gsUUFBSSxFQUFKLEVBQVE7QUFDTixVQUFJLE9BQU8sS0FBSyxPQUFMLENBQWEsRUFBYixDQUFYO0FBQ0EsVUFBSSxLQUFLLEtBQUssRUFBTCxDQUFRLGFBQVIsQ0FBc0IsVUFBVSxLQUFLLEVBQXJDLENBQVQ7QUFDQSxVQUFJLEVBQUosRUFBUTtBQUNOLFdBQUcsU0FBSCxDQUFhLE1BQWIsQ0FBb0IsVUFBcEI7QUFDRDtBQUNELFdBQUssU0FBTCxHQUFpQixLQUFLLFNBQUwsQ0FBZSxNQUFmLENBQXNCLFdBQVcsWUFBWSxJQUE3QyxDQUFqQjtBQUNELEtBUEQsTUFRSztBQUNILFdBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxLQUFLLFNBQUwsQ0FBZSxNQUFuQyxFQUEyQyxHQUEzQyxFQUFnRDtBQUM5QyxZQUFJLE9BQU8sS0FBSyxTQUFMLENBQWUsQ0FBZixDQUFYO0FBQ0EsWUFBSSxLQUFLLEtBQUssRUFBTCxDQUFRLGFBQVIsQ0FBc0IsVUFBVSxLQUFLLEVBQXJDLENBQVQ7QUFDQSxZQUFJLEVBQUosRUFBUTtBQUNOLGFBQUcsU0FBSCxDQUFhLE1BQWIsQ0FBb0IsVUFBcEI7QUFDRDtBQUNGO0FBQ0QsV0FBSyxTQUFMLEdBQWlCLEVBQWpCO0FBQ0Q7QUFDRjs7QUFFRCxjQUFZLEtBQVosRUFBbUI7QUFDakIsUUFBSSxLQUFLLE1BQU0sTUFBTixDQUFhLE9BQWIsQ0FBcUIsRUFBOUI7QUFDQSxRQUFJLEVBQUosRUFBUTs7QUFFTixVQUFJLEtBQUssUUFBVCxFQUFtQjtBQUNqQixZQUFJLFNBQVMsTUFBTSxPQUFOLElBQWlCLE1BQU0sT0FBcEM7QUFDQSxZQUFJLENBQUMsTUFBTCxFQUFhLEtBQUssUUFBTDtBQUNiLGFBQUssTUFBTCxDQUFZLEVBQVosRUFBZ0IsTUFBaEI7QUFDRCxPQUpELE1BSU87QUFDTCxhQUFLLFFBQUw7QUFDQSxhQUFLLE1BQUwsQ0FBWSxFQUFaO0FBQ0Q7QUFDRDs7QUFFQSxVQUFJLFVBQVUsSUFBSSxXQUFKLENBQWdCLFFBQWhCLEVBQTBCO0FBQ3ZDLGdCQUFRLEVBQUUsV0FBVyxLQUFLLFNBQWxCO0FBRCtCLE9BQTFCLENBQWQ7QUFHQSxXQUFLLEVBQUwsQ0FBUSxhQUFSLENBQXNCLE9BQXRCO0FBQ0QsS0FoQkQsTUFnQk87QUFDTCxXQUFLLFFBQUw7QUFDQSxVQUFJLFVBQVUsSUFBSSxXQUFKLENBQWdCLFFBQWhCLEVBQTBCO0FBQ3ZDLGdCQUFRLEVBQUUsV0FBVyxLQUFLLFNBQWxCO0FBRCtCLE9BQTFCLENBQWQ7QUFHQSxXQUFLLEVBQUwsQ0FBUSxhQUFSLENBQXNCLE9BQXRCO0FBQ0Q7QUFDRjs7QUFFRCxZQUFVLEtBQVYsRUFBaUI7QUFDZixZQUFRLEdBQVIsQ0FBWSxLQUFaO0FBQ0Q7O0FBRUQsVUFBUSxLQUFSLEVBQWU7QUFDYixZQUFRLEdBQVIsQ0FBWSxPQUFaO0FBQ0Q7O0FBRUQsY0FBWSxLQUFaLEVBQW1CO0FBQ2pCLFFBQUksTUFBTSxJQUFOLElBQWMsV0FBbEIsRUFBK0I7QUFDN0IsV0FBSyxXQUFMLENBQWlCLEtBQWpCO0FBQ0QsS0FGRCxNQUdLLElBQUksTUFBTSxJQUFOLElBQWMsU0FBbEIsRUFBNkI7QUFDaEMsV0FBSyxTQUFMLENBQWUsS0FBZjtBQUNELEtBRkksTUFHQSxJQUFJLE1BQU0sSUFBTixJQUFjLE9BQWxCLEVBQTJCO0FBQzlCLFdBQUssT0FBTCxDQUFhLEtBQWI7QUFDRDtBQUNGOztBQTVKUTs7QUFnS1gsT0FBTyxPQUFQLEdBQWlCLElBQWpCOzs7O0FDaEtBLE1BQU0sU0FBTixDQUFnQjtBQUNkLGNBQVksTUFBWixFQUFvQjtBQUNsQixTQUFLLEVBQUwsR0FBVSxTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBVjtBQUNBLFNBQUssRUFBTCxDQUFRLFNBQVIsQ0FBa0IsR0FBbEIsQ0FBc0IsV0FBdEI7QUFDQSxTQUFLLE1BQUwsR0FBYyxPQUFPLE1BQXJCO0FBQ0EsU0FBSyxRQUFMLEdBQWdCLEVBQWhCO0FBQ0EsU0FBSyxNQUFMLENBQVksV0FBWixDQUF3QixLQUFLLEVBQTdCO0FBQ0Q7O0FBRUQsTUFBSSxLQUFKLEVBQVc7QUFDVCxVQUFNLENBQU4sR0FBVSxLQUFLLFFBQUwsQ0FBYyxNQUFkLEdBQXVCLEtBQUssUUFBTCxDQUFjLEtBQUssUUFBTCxDQUFjLE1BQWQsR0FBdUIsQ0FBckMsRUFBd0MsQ0FBeEMsR0FBNEMsQ0FBbkUsR0FBdUUsQ0FBakY7QUFDQSxRQUFJLFVBQVUsTUFBTSxHQUFOLEVBQWQ7QUFDQSxZQUFRLGdCQUFSLENBQXlCLFdBQXpCLEVBQXNDLElBQXRDO0FBQ0EsU0FBSyxFQUFMLENBQVEsV0FBUixDQUFvQixPQUFwQjtBQUNBLFlBQVEsS0FBUixDQUFjLE1BQWQsR0FBdUIsTUFBTSxDQUE3QjtBQUNBLFNBQUssUUFBTCxDQUFjLElBQWQsQ0FBbUIsS0FBbkI7QUFDRDs7QUFFRCxTQUFPLEtBQVAsRUFBYztBQUNaLFFBQUksVUFBVSxNQUFNLEdBQU4sRUFBZDtBQUNBLFlBQVEsbUJBQVIsQ0FBNEIsV0FBNUIsRUFBeUMsSUFBekM7QUFDQSxTQUFLLEVBQUwsQ0FBUSxXQUFSLENBQW9CLE9BQXBCO0FBQ0EsU0FBSyxRQUFMLEdBQWdCLEtBQUssUUFBTCxDQUFjLE1BQWQsQ0FBcUIsV0FBVyxZQUFZLEtBQTVDLENBQWhCO0FBQ0Q7O0FBRUQsZUFBYSxLQUFiLEVBQW9CO0FBQ2xCLFVBQU0sQ0FBTixHQUFVLE9BQU8saUJBQWpCO0FBQ0EsU0FBSyxRQUFMLENBQWMsSUFBZCxDQUFtQixDQUFDLENBQUQsRUFBSSxDQUFKLEtBQVU7QUFBRSxhQUFPLEVBQUUsQ0FBRixHQUFNLEVBQUUsQ0FBZjtBQUFrQixLQUFqRDtBQUNBLFNBQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxLQUFLLFFBQUwsQ0FBYyxNQUFsQyxFQUEwQyxHQUExQyxFQUErQztBQUM3QyxVQUFJLFFBQVEsS0FBSyxRQUFMLENBQWMsQ0FBZCxDQUFaO0FBQ0EsWUFBTSxHQUFOLEdBQVksS0FBWixDQUFrQixNQUFsQixHQUEyQixNQUFNLENBQU4sR0FBVSxDQUFyQztBQUNEO0FBQ0Y7O0FBRUQsY0FBWSxLQUFaLEVBQW1CO0FBQ2pCLFFBQUksT0FBTyxNQUFNLE1BQWpCOztBQUVBLFdBQU8sS0FBSyxVQUFMLElBQW1CLEtBQUssVUFBTCxLQUFvQixTQUFTLElBQXZELEVBQTZEO0FBQzNELFVBQUksS0FBSyxVQUFMLEtBQW9CLEtBQUssRUFBN0IsRUFBaUM7QUFDakMsYUFBTyxLQUFLLFVBQVo7QUFDRDs7QUFFRCxRQUFJLFFBQVEsS0FBSyxRQUFMLENBQWMsSUFBZCxDQUFtQixXQUFXLFFBQVEsR0FBUixPQUFrQixJQUFoRCxDQUFaO0FBQ0EsUUFBSSxLQUFKLEVBQVc7QUFDVCxXQUFLLFlBQUwsQ0FBa0IsS0FBbEI7QUFDRDtBQUNGOztBQUVELGNBQVksS0FBWixFQUFtQjtBQUNqQixRQUFJLE1BQU0sSUFBTixJQUFjLFdBQWxCLEVBQStCO0FBQzdCLFdBQUssV0FBTCxDQUFpQixLQUFqQjtBQUNEO0FBQ0Y7QUFwRGE7O0FBdURoQixPQUFPLE9BQVAsR0FBaUIsU0FBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfXJldHVybiBlfSkoKSIsImNvbnN0IENvbnRhaW5lciA9IHJlcXVpcmUoJy4vdWkvY29udGFpbmVyJyk7XG5jb25zdCBXb3Jrc3BhY2UgPSByZXF1aXJlKCcuL3VpL3dvcmtzcGFjZScpO1xuY29uc3QgTGlzdCA9IHJlcXVpcmUoJy4vdWkvbGlzdCcpO1xuXG5jb25zdCBSZXNvdXJjZSA9IHJlcXVpcmUoJy4vcmVzb3VyY2UnKTtcbmNvbnN0IFNjdW1tID0gcmVxdWlyZSgnLi9zY3VtbScpO1xuY29uc3QgQml0bWFwID0gcmVxdWlyZSgnLi9iaXRtYXAnKTtcblxuY29uc3QgSU5ERVhfRklMRSA9ICdtb25rZXkyLjAwMCc7XG5jb25zdCBCVU5ETEVfRklMRSA9ICdtb25rZXkyLjAwMSc7XG5cbi8vIGNvbnN0IElOREVYX0ZJTEUgPSAnbWkyZGVtby4wMDAnO1xuLy8gY29uc3QgQlVORExFX0ZJTEUgPSAnbWkyZGVtby4wMDEnO1xuXG5jbGFzcyBBcHAge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBjb25zb2xlLmxvZygnaW5pdCcpO1xuXG4gICAgdGhpcy5maWxlcyA9IFtdO1xuXG4gICAgdGhpcy5yZXNvdXJjZSA9IG5ldyBSZXNvdXJjZSgpO1xuXG4gICAgdGhpcy5vZmZzY3JlZW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB0aGlzLm9mZnNjcmVlbi53aWR0aCA9IDMyMDtcbiAgICB0aGlzLm9mZnNjcmVlbi5oZWlnaHQgPSAyMDA7XG5cbiAgICB0aGlzLmNhbnZhc0ltYWdlcyA9IFtdO1xuXG4gICAgdGhpcy5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3b3Jrc3BhY2UnKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICAgICAgdGhpcy5jcmVhdGVFbGVtZW50cygpO1xuICAgICAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlY29kZShidWZmZXIsIGVuYz0wKSB7XG4gICAgbGV0IHRlbXAgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgdGVtcFtpXSA9IHRlbXBbaV0gXiBlbmM7XG4gICAgfVxuICAgIHJldHVybiB0ZW1wLmJ1ZmZlcjtcbiAgfVxuXG4gIHVwZGF0ZVBhbGV0dGUoKSB7XG4gICAgbGV0IHBhbGV0dGUgPSB0aGlzLnBhbGV0dGU7XG5cbiAgICBsZXQgcGFsZXR0ZUVsID0gdGhpcy5wYWxldHRlRWw7XG4gICAgd2hpbGUocGFsZXR0ZUVsLmZpcnN0Q2hpbGQpIHBhbGV0dGVFbC5yZW1vdmVDaGlsZChwYWxldHRlRWwuZmlyc3RDaGlsZCk7XG5cbiAgICBpZiAocGFsZXR0ZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgICAgICBsZXQgciA9IHBhbGV0dGVbaSozXTtcbiAgICAgICAgbGV0IGcgPSBwYWxldHRlW2kqMyArIDFdO1xuICAgICAgICBsZXQgYiA9IHBhbGV0dGVbaSozICsgMl07XG4gICAgICAgIGxldCBzd2F0Y2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgc3dhdGNoLmNsYXNzTGlzdC5hZGQoJ3BhbGV0dGUtc3dhdGNoJyk7XG4gICAgICAgIHN3YXRjaC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmdiKCcgKyByICsgJywnICsgZyArICcsJyArIGIgKyAnKSc7XG4gICAgICAgIC8vIHN3YXRjaC50aXRsZSA9ICdJbmRleDogJyArIGkgKyAnXFxuJyArICdSR0I6ICcgKyByICsgJywgJyArIGcgKyAnLCAnICsgYjtcbiAgICAgICAgcGFsZXR0ZUVsLmFwcGVuZENoaWxkKHN3YXRjaCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUm9vbUltYWdlKCkge1xuICAgIGlmICghdGhpcy5yb29tKSByZXR1cm47XG4gICAgbGV0IHJvb20gPSB0aGlzLnJvb207XG5cbiAgICBsZXQgd2lkdGggPSByb29tLndpZHRoO1xuICAgIGxldCBoZWlnaHQgPSByb29tLmhlaWdodDtcblxuICAgIHRoaXMub2Zmc2NyZWVuLndpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5vZmZzY3JlZW4uaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgbGV0IGN0eCA9IHRoaXMub2Zmc2NyZWVuLmdldENvbnRleHQoJzJkJyk7XG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLm9mZnNjcmVlbi53aWR0aCwgdGhpcy5vZmZzY3JlZW4uaGVpZ2h0KTtcblxuICAgIGlmIChyb29tLmJpdG1hcCkge1xuICAgICAgbGV0IGltYWdlRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcm9vbS5iaXRtYXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGluZGV4ID0gcm9vbS5iaXRtYXBbaV07XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2kgKiA0ICsgMF0gPSB0aGlzLnBhbGV0dGVbaW5kZXggKiAzICsgMF07XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2kgKiA0ICsgMV0gPSB0aGlzLnBhbGV0dGVbaW5kZXggKiAzICsgMV07XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2kgKiA0ICsgMl0gPSB0aGlzLnBhbGV0dGVbaW5kZXggKiAzICsgMl07XG4gICAgICAgIGltYWdlRGF0YS5kYXRhW2kgKiA0ICsgM10gPSAyNTU7XG4gICAgICB9XG5cbiAgICAgIGN0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcblxuICAgICAgdGhpcy5pbWFnZUNvbnRhaW5lci5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cblxuICAgIGxldCBjYW52YXMgPSB0aGlzLmNhbnZhcztcbiAgICBjYW52YXMudGl0bGUgPSByb29tLm5hbWU7XG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcblxuICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIC8vIGN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgY3R4LmRyYXdJbWFnZSh0aGlzLm9mZnNjcmVlbiwgMCwgMCwgdGhpcy5vZmZzY3JlZW4ud2lkdGgsIHRoaXMub2Zmc2NyZWVuLmhlaWdodCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2FudmFzSW1hZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgaW0gPSB0aGlzLmNhbnZhc0ltYWdlc1tpXTtcbiAgICAgIGN0eC5kcmF3SW1hZ2UoaW0uaW1hZ2UsIGltLngsIGltLnkpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUNhbnZhc0Zyb21CaXRtYXAoYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCB0cmFuc3BhcmVudCkge1xuICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIGlmIChiaXRtYXApIHtcbiAgICAgIGxldCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgIGxldCBpbWFnZURhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJpdG1hcC5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgeCA9IGkgJSB3aWR0aDtcbiAgICAgICAgbGV0IHkgPSAoaSAvIHdpZHRoKSA+PiAwO1xuICAgICAgICBsZXQgaW5kZXggPSAoeSAqIHdpZHRoICsgeCkgKiA0O1xuICAgICAgICBsZXQgY29sb3IgPSBiaXRtYXBbaV07XG4gICAgICAgIGlmIChjb2xvciAhPT0gdHJhbnNwYXJlbnQpIHtcbiAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDBdID0gdGhpcy5wYWxldHRlW2NvbG9yICogMyArIDBdO1xuICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICsgMV0gPSB0aGlzLnBhbGV0dGVbY29sb3IgKiAzICsgMV07XG4gICAgICAgICAgaW1hZ2VEYXRhLmRhdGFbaW5kZXggKyAyXSA9IHRoaXMucGFsZXR0ZVtjb2xvciAqIDMgKyAyXTtcbiAgICAgICAgICBpbWFnZURhdGEuZGF0YVtpbmRleCArIDNdID0gMjU1O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjdHgucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XG4gICAgfVxuICAgIHJldHVybiBjYW52YXM7XG4gIH1cblxuICB1cGRhdGVSb29tT2JqZWN0cygpIHtcbiAgICB0aGlzLm9iamVjdHMgPSB0aGlzLnJvb20uZ2V0T2JqZWN0cygpO1xuICAgIGxldCBvYmplY3RzRWwgPSB0aGlzLm9iamVjdHNFbDtcbiAgICB3aGlsZSAob2JqZWN0c0VsLmZpcnN0Q2hpbGQpIG9iamVjdHNFbC5yZW1vdmVDaGlsZChvYmplY3RzRWwuZmlyc3RDaGlsZCk7XG5cbiAgICBsZXQgbGlzdCA9IG5ldyBMaXN0KHsgdHlwZTogJ2ljb24nLCBtdWx0aXBsZTogdHJ1ZSB9KTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBpbmRleCA9IDE7IGkgPCB0aGlzLm9iamVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBvYiA9IHRoaXMub2JqZWN0c1tpXTtcblxuICAgICAgaWYgKG9iLmJpdG1hcHMpIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvYi5iaXRtYXBzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgbGV0IGJpdG1hcCA9IG9iLmJpdG1hcHNbal07XG4gICAgICAgICAgbGV0IGNhbnZhcyA9IHRoaXMuY3JlYXRlQ2FudmFzRnJvbUJpdG1hcChiaXRtYXAsIG9iLndpZHRoLCBvYi5oZWlnaHQsIHRoaXMucm9vbS50cmFuc3BhcmVudCk7XG4gICAgICAgICAgbGlzdC5hZGRJdGVtKHtcbiAgICAgICAgICAgIGlkOiBpbmRleCsrLFxuICAgICAgICAgICAgdGl0bGU6IG9iLmlkLFxuICAgICAgICAgICAgaW1hZ2U6IGNhbnZhcyxcbiAgICAgICAgICAgIGRhdGE6IG9iLmlkXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLm9iamVjdHNMaXN0ID0gbGlzdDtcblxuICAgIHRoaXMub2JqZWN0c0xpc3QuZG9tKCkuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgIHRoaXMuY2xlYXJDYW52YXNJbWFnZXMoKTtcbiAgICAgIGxldCBzZWxlY3Rpb24gPSBlLmRldGFpbC5zZWxlY3Rpb247XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgaXRlbSA9IHNlbGVjdGlvbltpXTtcbiAgICAgICAgbGV0IG9iID0gdGhpcy5vYmplY3RzLmZpbmQoZWxlbWVudCA9PiBlbGVtZW50LmlkID09IGl0ZW0uZGF0YSk7XG4gICAgICAgIGlmIChvYikge1xuICAgICAgICAgIHRoaXMuYWRkSW1hZ2VUb0NhbnZhcyhpdGVtLmltYWdlLCBvYi54LCBvYi55KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy51cGRhdGVSb29tSW1hZ2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMub2JqZWN0c0VsLmFwcGVuZENoaWxkKGxpc3QuZG9tKCkpO1xuICB9XG5cbiAgc2V0Um9vbShudW0pIHtcbiAgICBsZXQgcm9vbSA9IHRoaXMucmVzb3VyY2UuZ2V0Um9vbShudW0pO1xuICAgIGlmIChyb29tKSB7XG4gICAgICB0aGlzLnJvb20gPSByb29tO1xuICAgICAgdGhpcy5yb29tbm8gPSBudW07XG4gICAgICB0aGlzLnBhbGV0dGUgPSByb29tLnBhbGV0dGU7XG4gICAgICB0aGlzLmNhbnZhc0ltYWdlcyA9IFtdO1xuXG4gICAgICB0aGlzLnVwZGF0ZVBhbGV0dGUoKTtcbiAgICAgIHRoaXMudXBkYXRlUm9vbUltYWdlKCk7XG4gICAgICB0aGlzLnVwZGF0ZVJvb21PYmplY3RzKCk7XG4gICAgfVxuICB9XG5cbiAgYWRkSW1hZ2VUb0NhbnZhcyhpbWFnZSwgeCwgeSkge1xuICAgIHRoaXMuY2FudmFzSW1hZ2VzLnB1c2goe1xuICAgICAgeDogeCxcbiAgICAgIHk6IHksXG4gICAgICBpbWFnZTogaW1hZ2VcbiAgICB9KTtcbiAgICB0aGlzLnVwZGF0ZVJvb21JbWFnZSgpO1xuICB9XG5cbiAgY2xlYXJDYW52YXNJbWFnZXMoKSB7XG4gICAgdGhpcy5jYW52YXNJbWFnZXMgPSBbXTtcbiAgfVxuXG4gIHVwZGF0ZVJvb21MaXN0KCkge1xuICAgIGxldCByb29tTGlzdCA9IHRoaXMucmVzb3VyY2UuZ2V0Um9vbUxpc3QoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvb21MaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgcm9vbSA9IHJvb21MaXN0W2ldO1xuICAgICAgdGhpcy5saXN0LmFkZEl0ZW0oeyBpZDogcm9vbS5pZCwgdGl0bGU6IHJvb20uaWQudG9TdHJpbmcoKS5wYWRTdGFydCgzLCAnMCcpICsgJyAnICsgcm9vbS5uYW1lIH0pO1xuICAgIH1cbiAgfVxuXG4gIHBhcnNlRmlsZXMoKSB7XG4gICAgaWYgKHRoaXMuZmlsZXNbSU5ERVhfRklMRV0pIHtcbiAgICAgIHRoaXMucmVzb3VyY2UuYWRkSW5kZXgodGhpcy5maWxlc1tJTkRFWF9GSUxFXSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmZpbGVzW0JVTkRMRV9GSUxFXSkge1xuICAgICAgdGhpcy5yZXNvdXJjZS5hZGRCdW5kbGUodGhpcy5maWxlc1tCVU5ETEVfRklMRV0pO1xuICAgICAgdGhpcy51cGRhdGVSb29tTGlzdCgpO1xuICAgICAgdGhpcy5zZXRSb29tKDYpO1xuICAgICAgdGhpcy5saXN0LnNlbGVjdCg2KTtcbiAgICB9XG4gIH1cblxuICBvbkZpbGVMb2FkZWQoZmlsZW5hbWUpIHtcbiAgICBjb25zb2xlLmxvZygnTG9hZGVkJywgZmlsZW5hbWUsIHRoaXMuZmlsZXNbZmlsZW5hbWVdLmJ5dGVMZW5ndGgpO1xuXG4gICAgaWYgKGZpbGVuYW1lID09IElOREVYX0ZJTEUgfHwgZmlsZW5hbWUgPT0gQlVORExFX0ZJTEUpIHtcbiAgICAgIHRoaXMuZmlsZXNbZmlsZW5hbWVdID0gdGhpcy5kZWNvZGUodGhpcy5maWxlc1tmaWxlbmFtZV0sIDB4NjkpO1xuICAgIH1cblxuICAgIHRoaXMuZmlsZXNUb0xvYWQtLTtcblxuICAgIGlmICh0aGlzLmZpbGVzVG9Mb2FkID09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdkb25lJyk7XG4gICAgICB0aGlzLnBhcnNlRmlsZXMoKTtcbiAgICB9XG4gIH1cblxuICBsb2FkRmlsZShmaWxlKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgdmFyIGZpbGVuYW1lID0gZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0cmVhZGVyLm9ubG9hZCA9IChldmVudCkgPT4ge1xuICAgICAgdGhpcy5maWxlc1tmaWxlbmFtZV0gPSBldmVudC50YXJnZXQucmVzdWx0O1xuICAgICAgdGhpcy5vbkZpbGVMb2FkZWQoZmlsZW5hbWUpO1xuXHRcdH07XG5cdCAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpO1xuICB9XG5cbiAgb25Ecm9wKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBmaWxlcyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcztcbiAgICBpZiAoZmlsZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLmZpbGVzVG9Mb2FkID0gZmlsZXMubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmxvYWRGaWxlKGZpbGVzW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbkRyYWdFbnRlcihldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBvbkRyYWdPdmVyKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfVxuXG4gIG9uS2V5RG93bihldmVudCkge1xuICAgIC8vIGNvbnNvbGUubG9nKGV2ZW50LnRhcmdldCk7XG4gICAgaWYgKGV2ZW50LmtleSA9PSAnQXJyb3dSaWdodCcgJiYgIWV2ZW50LnJlcGVhdCkge1xuICAgICAgLy8gdGhpcy5zZXRSb29tKHRoaXMucm9vbW5vICsgMSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50LmtleSA9PSAnQXJyb3dMZWZ0JyAmJiAhZXZlbnQucmVwZWF0KSB7XG4gICAgICAvLyB0aGlzLnNldFJvb20odGhpcy5yb29tbm8gLSAxKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVFdmVudChldmVudCkge1xuICAgIGlmIChldmVudC50eXBlID09ICdkcm9wJykge1xuICAgICAgdGhpcy5vbkRyb3AoZXZlbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudC50eXBlID09ICdkcmFnb3ZlcicpIHtcbiAgICAgIHRoaXMub25EcmFnT3ZlcihldmVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50LnR5cGUgPT0gJ2RyYWdlbnRlcicpIHtcbiAgICAgIHRoaXMub25EcmFnRW50ZXIoZXZlbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudC50eXBlID09ICdrZXlkb3duJykge1xuICAgICAgdGhpcy5vbktleURvd24oZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUVsZW1lbnRzKCkge1xuICAgIHRoaXMuYXBwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcCcpO1xuXG4gICAgbGV0IHNpZGViYXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHNpZGViYXJFbC5jbGFzc0xpc3QuYWRkKCdzaWRlLWJhcicpO1xuXG4gICAgdGhpcy5saXN0ID0gbmV3IExpc3QoKTtcbiAgICB0aGlzLmxpc3QuZG9tKCkuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgIGxldCBzZWxlY3Rpb24gPSBlLmRldGFpbC5zZWxlY3Rpb247XG4gICAgICBpZiAoc2VsZWN0aW9uLmxlbmd0aCkge1xuICAgICAgICAvLyBsZXQgaWQgPSBlLmRldGFpbC5pZDtcbiAgICAgICAgdGhpcy5zZXRSb29tKHNlbGVjdGlvblswXS5pZCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLnJvb21MaXN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLnJvb21MaXN0RWwuY2xhc3NMaXN0LmFkZCgncm9vbS1saXN0Jyk7XG5cbiAgICB0aGlzLnJvb21MaXN0RWwuYXBwZW5kQ2hpbGQodGhpcy5saXN0LmRvbSgpKTtcblxuICAgIGxldCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3Jvb20tbGlzdC1oZWFkaW5nJyk7XG4gICAgZWwuaW5uZXJIVE1MID0gJ1Jvb21zJztcbiAgICBzaWRlYmFyRWwuYXBwZW5kQ2hpbGQoZWwpO1xuXG4gICAgc2lkZWJhckVsLmFwcGVuZENoaWxkKHRoaXMucm9vbUxpc3RFbCk7XG5cbiAgICB0aGlzLmFwcC5hcHBlbmRDaGlsZChzaWRlYmFyRWwpO1xuXG4gICAgdGhpcy53b3Jrc3BhY2UgPSBuZXcgV29ya3NwYWNlKHsgcGFyZW50OiB0aGlzLmFwcCB9KTtcblxuICAgIHRoaXMuY2FudmFzQ29udGFpbmVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmNhbnZhc0NvbnRhaW5lckVsLmNsYXNzTGlzdC5hZGQoJ3Jvb20taW1hZ2UnKTtcblxuICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdGhpcy5jYW52YXNDb250YWluZXJFbC5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcyk7XG5cbiAgICB0aGlzLmltYWdlQ29udGFpbmVyID0gbmV3IENvbnRhaW5lcih7IHRpdGxlOiAnQmFja2dyb3VuZCcsIGNvbnRlbnQ6IHRoaXMuY2FudmFzQ29udGFpbmVyRWwsIHg6IDMyLCB5OiAzMiwgd2lkdGg6IDMyMCwgaGVpZ2h0OiAyMDAgfSk7XG4gICAgdGhpcy53b3Jrc3BhY2UuYWRkKHRoaXMuaW1hZ2VDb250YWluZXIpO1xuXG4gICAgdGhpcy5wYWxldHRlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLnBhbGV0dGVFbC5jbGFzc0xpc3QuYWRkKCdwYWxldHRlLXN3YXRjaGVzJyk7XG5cbiAgICB0aGlzLnBhbGV0dGVDb250YWluZXIgPSBuZXcgQ29udGFpbmVyKHsgdGl0bGU6ICdQYWxldHRlJywgY29udGVudDogdGhpcy5wYWxldHRlRWwsIHg6IDMyLCB5OiAyODAsIHdpZHRoOiAxOTIsIGhlaWdodDogMTkyLCBzdGF0dXM6IGZhbHNlIH0pO1xuICAgIHRoaXMud29ya3NwYWNlLmFkZCh0aGlzLnBhbGV0dGVDb250YWluZXIpO1xuXG4gICAgdGhpcy5vYmplY3RzRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLm9iamVjdHNFbC5jbGFzc0xpc3QuYWRkKCdvYmplY3RzJyk7XG5cbiAgICB0aGlzLm9iamVjdHNDb250YWluZXIgPSBuZXcgQ29udGFpbmVyKHsgdGl0bGU6ICdPYmplY3RzJywgY29udGVudDogdGhpcy5vYmplY3RzRWwsIHg6IDUxMiwgeTogMzIsIHdpZHRoOiAzNDQsIGhlaWdodDogMzYwIH0pO1xuICAgIHRoaXMud29ya3NwYWNlLmFkZCh0aGlzLm9iamVjdHNDb250YWluZXIpO1xuXG4gIH1cblxuICBpbml0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCB0aGlzLCBmYWxzZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIHRoaXMsIGZhbHNlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCB0aGlzLCBmYWxzZSk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMsIGZhbHNlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLCBmYWxzZSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBcHA7XG5nbG9iYWwuQXBwID0gQXBwO1xuIiwiXG5jbGFzcyBCaXRTdHJlYW0ge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0pIHtcbiAgICB0aGlzLnN0cmVhbSA9IHN0cmVhbTtcbiAgICB0aGlzLm9mZnNldCA9IDA7XG4gICAgdGhpcy5jbCA9IDA7XG4gIH1cblxuICBuZXh0KCkge1xuICAgIHRoaXMuYnl0ZSA9IHRoaXMuc3RyZWFtLmdldFVpbnQ4KCk7XG4gICAgdGhpcy5iaXQgPSB0aGlzLmJ5dGUgJiAxO1xuICAgIHRoaXMuY2wgPSA4O1xuICB9XG5cbiAgc2hpZnQoKSB7XG4gICAgaWYgKHRoaXMuY2wgPiAxKSB7XG4gICAgICB0aGlzLmJ5dGUgPj49IDE7XG4gICAgICB0aGlzLmJpdCA9IHRoaXMuYnl0ZSAmIDE7XG4gICAgICB0aGlzLmNsLS07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubmV4dCgpO1xuICAgIH1cbiAgfVxuXG4gIHJlYWQobGVuZ3RoKSB7XG4gICAgaWYgKHRoaXMuY2wgPT0gMCkge1xuICAgICAgdGhpcy5uZXh0KCk7XG4gICAgfVxuXG4gICAgaWYgKGxlbmd0aCkge1xuICAgICAgbGV0IHZhbHVlID0gMDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgfD0gKHRoaXMuYml0IDw8IGkpO1xuICAgICAgICB0aGlzLnNoaWZ0KCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB2YWx1ZSA9IHRoaXMuYml0ID8gMSA6IDA7XG4gICAgICB0aGlzLnNoaWZ0KCk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQml0U3RyZWFtO1xuIiwiXG5jbGFzcyBCaXRtYXAge1xuICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICB0aGlzLndpZHRoID0gcGFyYW1zLndpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gcGFyYW1zLmhlaWdodDtcbiAgICB0aGlzLnBpeGVscyA9IHBhcmFtcy5waXhlbHM7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBCaXRtYXA7XG4iLCJcbmNsYXNzIEJ1ZmZlclN0cmVhbSB7XG4gIGNvbnN0cnVjdG9yKGJ1ZmZlcikge1xuICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuICAgIHRoaXMudmlldyA9IG5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlcik7XG4gICAgdGhpcy5vZmZzZXQgPSAwO1xuICB9XG5cbiAgZ2V0IGxlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgfVxuXG4gIHNlZWsob2Zmc2V0PTApIHtcbiAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcbiAgfVxuXG4gIGFkdmFuY2UoY291bnQ9MSkge1xuICAgIHRoaXMub2Zmc2V0ICs9IGNvdW50O1xuICAgIGlmICh0aGlzLm9mZnNldCA+IHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgtMSkgdGhpcy5vZmZzZXQgPSB0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoLTE7XG4gIH1cblxuICBiYWNrdXAoY291bnQ9MSkge1xuICAgIHRoaXMub2Zmc2V0IC09IGNvdW50O1xuICAgIGlmICh0aGlzLm9mZnNldCA8IDApIHRoaXMub2Zmc2V0ID0gMDtcbiAgfVxuXG4gIGdldFVpbnQ4KG9mZnNldCkge1xuICAgIGlmIChvZmZzZXQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICBvZmZzZXQgPSB0aGlzLm9mZnNldDtcbiAgICAgIHRoaXMub2Zmc2V0Kys7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnZpZXcuZ2V0VWludDgob2Zmc2V0KTtcbiAgfVxuXG4gIGdldFVpbnQxNihvZmZzZXQsIGxpdHRsZUVuZGlhbj1mYWxzZSkge1xuICAgIGlmIChvZmZzZXQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICBvZmZzZXQgPSB0aGlzLm9mZnNldDtcbiAgICAgIHRoaXMub2Zmc2V0ICs9IDI7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnZpZXcuZ2V0VWludDE2KG9mZnNldCwgbGl0dGxlRW5kaWFuKTtcbiAgfVxuXG4gIGdldFVpbnQzMihvZmZzZXQsIGxpdHRsZUVuZGlhbj1mYWxzZSkge1xuICAgIGlmIChvZmZzZXQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICBvZmZzZXQgPSB0aGlzLm9mZnNldDtcbiAgICAgIHRoaXMub2Zmc2V0ICs9IDQ7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnZpZXcuZ2V0VWludDMyKG9mZnNldCwgbGl0dGxlRW5kaWFuKTtcbiAgfVxuXG4gIGdldFVpbnQxNkxFKG9mZnNldCkge1xuICAgIHJldHVybiB0aGlzLmdldFVpbnQxNihvZmZzZXQsIHRydWUpO1xuICB9XG5cbiAgZ2V0VWludDMyTEUob2Zmc2V0KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VWludDMyKG9mZnNldCwgdHJ1ZSk7XG4gIH1cblxuICBnZXRCeXRlcyhsZW5ndGg9MSwgb2Zmc2V0KSB7XG4gICAgaWYgKG9mZnNldCA9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9mZnNldCA9IHRoaXMub2Zmc2V0O1xuICAgICAgdGhpcy5vZmZzZXQgKz0gbGVuZ3RoO1xuICAgIH1cbiAgICBsZXQgYnl0ZXMgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGJ5dGVzW2ldID0gdGhpcy52aWV3LmdldFVpbnQ4KG9mZnNldCArIGkpOyAvL3RoaXMuZ2V0VWludDgob2Zmc2V0ICsgaSk7XG4gICAgfVxuICAgIHJldHVybiBieXRlcztcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJ1ZmZlclN0cmVhbTtcbiIsImNvbnN0IEJ1ZmZlclN0cmVhbSA9IHJlcXVpcmUoJy4vYnVmZmVyX3N0cmVhbScpO1xuY29uc3QgQml0U3RyZWFtID0gcmVxdWlyZSgnLi9iaXRfc3RyZWFtJyk7XG5jb25zdCBTY3VtbSA9IHJlcXVpcmUoJy4vc2N1bW0nKTtcblxuY2xhc3MgUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnJvb21zID0gW107XG4gICAgdGhpcy5yb29tTmFtZXMgPSBbXTtcbiAgfVxuXG4gIGFkZEluZGV4KGJ1ZmZlcikge1xuICAgIHRoaXMucGFyc2VJbmRleChidWZmZXIpO1xuICB9XG5cbiAgYWRkQnVuZGxlKGJ1ZmZlcikge1xuICAgIHRoaXMucGFyc2VCdW5kbGUoYnVmZmVyKTtcbiAgfVxuXG4gIGdldFJvb20obnVtKSB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2VSb29tKG51bSk7XG4gIH1cblxuICBnZXRCbG9ja1R5cGVOYW1lKHVpbnQzMikge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKFxuICAgICAgKHVpbnQzMiAmIDB4ZmYpLFxuICAgICAgKCh1aW50MzIgPj4gOCkgJiAweGZmKSxcbiAgICAgICgodWludDMyID4+IDE2KSAmIDB4ZmYpLFxuICAgICAgKCh1aW50MzIgPj4gMjQpICYgMHhmZilcbiAgICApO1xuICB9XG5cbiAgcGFyc2VCbG9ja05hbWUoc3RyZWFtKSB7XG4gICAgbGV0IHR5cGUgPSBzdHJlYW0uZ2V0VWludDMyTEUoKTtcbiAgICByZXR1cm4gdGhpcy5nZXRCbG9ja1R5cGVOYW1lKHR5cGUpO1xuICB9XG5cbiAgcGFyc2VJbmRleChidWZmZXIpIHtcbiAgICBjb25zb2xlLmxvZygncGFyc2VJbmRleCcpO1xuICAgIGxldCBzdHJlYW0gPSBuZXcgQnVmZmVyU3RyZWFtKGJ1ZmZlcik7XG5cbiAgICB3aGlsZSAoc3RyZWFtLm9mZnNldCA8IHN0cmVhbS5sZW5ndGgpIHtcbiAgICAgIGxldCBuYW1lID0gdGhpcy5wYXJzZUJsb2NrTmFtZShzdHJlYW0pO1xuICAgICAgbGV0IHNpemUgPSBzdHJlYW0uZ2V0VWludDMyKCk7XG5cbiAgICAgIGlmIChuYW1lID09ICdSTkFNJykgeyAvLyBSb29tIG5hbWVzIHRhYmxlXG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgbGV0IHJvb21ubyA9IHN0cmVhbS5nZXRVaW50OCgpO1xuICAgICAgICAgIGlmIChyb29tbm8gPT0gMCkgYnJlYWs7XG4gICAgICAgICAgbGV0IGJ5dGVzID0gc3RyZWFtLmdldEJ5dGVzKDkpO1xuICAgICAgICAgIHRoaXMucm9vbU5hbWVzW3Jvb21ub10gPSBieXRlcy5yZWR1Y2UoKGFjY3VtdWxhdG9yLCBjdXJyZW50VmFsdWUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhY2N1bXVsYXRvciArIChjdXJyZW50VmFsdWUgIT0gMHhmZiA/IFN0cmluZy5mcm9tQ2hhckNvZGUoY3VycmVudFZhbHVlIF4gMHhmZikgOiAnJyk7XG4gICAgICAgICAgfSwgJycpO1xuICAgICAgICB9XG4gICAgICAvLyBlbHNlIGlmIChuYW1lID09ICdEUk9PJykge1xuICAgICAgLy8gICBsZXQgbnVtaXRlbXMgPSBzdHJlYW0uZ2V0VWludDE2TEUoKTtcbiAgICAgIC8vICAgbGV0IHJvb21Ob3MgPSBzdHJlYW0uZ2V0Qnl0ZXMoLCBudW1pdGVtcyk7XG4gICAgICAvL1xuICAgICAgLy8gICBsZXQgcm9vbU9mZnNldHMgPSBbXTtcbiAgICAgIC8vICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1pdGVtczsgaSsrKSB7XG4gICAgICAvLyAgICAgbGV0IG9mZnMgPSBzdHJlYW0uZ2V0VWludDMyTEUoKTtcbiAgICAgIC8vICAgICByb29tT2Zmc2V0c1tpXSA9IG9mZnM7XG4gICAgICAvLyAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0cmVhbS5nZXRCeXRlcyhzaXplIC0gOCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZGVjb21wcmVzczEoYml0cywgc2hpZnQsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICBsZXQgcGl4ZWxzID0gbmV3IFVpbnQ4QXJyYXkod2lkdGggKiBoZWlnaHQpO1xuICAgIGxldCBvZmZzZXQgPSAwO1xuXG4gICAgbGV0IGNvbG9yID0gYml0cy5yZWFkKDgpO1xuXG4gICAgbGV0IGluYyA9IC0xO1xuXG4gICAgd2hpbGUgKG9mZnNldCA8IHdpZHRoICogaGVpZ2h0KSB7XG4gICAgICBwaXhlbHNbb2Zmc2V0KytdID0gY29sb3I7XG4gICAgICBpZiAoYml0cy5yZWFkKCkpIHtcbiAgICAgICAgaWYgKCFiaXRzLnJlYWQoKSkge1xuICAgICAgICAgIGNvbG9yID0gYml0cy5yZWFkKHNoaWZ0KTtcbiAgICAgICAgICBpbmMgPSAtMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoIWJpdHMucmVhZCgpKSB7XG4gICAgICAgICAgICBjb2xvciArPSBpbmM7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluYyA9IC1pbmM7XG4gICAgICAgICAgICBjb2xvciArPSBpbmM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHBpeGVscztcbiAgfVxuXG4gIGRlY29tcHJlc3MyKGJpdHMsIHNoaWZ0LCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgbGV0IHBpeGVscyA9IG5ldyBVaW50OEFycmF5KHdpZHRoICogaGVpZ2h0KTtcbiAgICBsZXQgb2Zmc2V0ID0gMDtcblxuICAgIGxldCBjb2xvciA9IGJpdHMucmVhZCg4KTtcbiAgICBsZXQgc2tpcCA9IGZhbHNlO1xuXG4gICAgd2hpbGUgKG9mZnNldCA8IHdpZHRoICogaGVpZ2h0KSB7XG4gICAgICBpZiAoIXNraXApIHtcbiAgICAgICAgcGl4ZWxzW29mZnNldCsrXSA9IGNvbG9yO1xuICAgICAgICBza2lwID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChiaXRzLnJlYWQoKSkge1xuICAgICAgICBpZiAoYml0cy5yZWFkKCkpIHtcbiAgICAgICAgICAvLyBhZGp1c3QgY3VycmVudCBwYWxldHRlIGluZGV4XG4gICAgICAgICAgbGV0IGMgPSBiaXRzLnJlYWQoMyk7XG4gICAgICAgICAgbGV0IGluY20gPSBjIC0gNDtcbiAgICAgICAgICBpZiAoaW5jbSkge1xuICAgICAgICAgICAgY29sb3IgKz0gaW5jbTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHJ1biA9IGJpdHMucmVhZCg4KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcnVuOyBpKyspIHtcbiAgICAgICAgICAgICAgcGl4ZWxzW29mZnNldCsrXSA9IGNvbG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2tpcCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHJlYWQgYSBuZXcgcGFsZXR0ZSBpbmRleFxuICAgICAgICAgIGNvbG9yID0gYml0cy5yZWFkKHNoaWZ0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGl4ZWxzO1xuICB9XG5cbiAgZGVjb21wcmVzc1N0cmlwKHN0cmVhbSwgd2lkdGgsIGhlaWdodCkge1xuICAgIGxldCBjb2RlID0gc3RyZWFtLmdldFVpbnQ4KCk7XG4gICAgbGV0IHNoaWZ0ID0gY29kZSAlIDEwO1xuXG4gICAgbGV0IGJpdHMgPSBuZXcgQml0U3RyZWFtKHN0cmVhbSk7XG4gICAgbGV0IHBpeGVscztcbiAgICBsZXQgb3JpZW50YXRpb24gPSAwO1xuXG4gICAgaWYgKGNvZGUgPT0gMHgwMSkgeyAvLyByYXcgaG9yaXpvbnRhbFxuICAgICAgcGl4ZWxzID0gbmV3IFVpbnQ4QXJyYXkod2lkdGggKiBoZWlnaHQpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwaXhlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcGl4ZWxzW2ldID0gc3RyZWFtLmdldFVpbnQ4KCk7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGUgPj0gMHgwZSAmJiBjb2RlIDw9IDB4MTIpIHsgLy8gbWV0aG9kIDEgdmVydGljYWxcbiAgICAgIG9yaWVudGF0aW9uID0gMTtcbiAgICAgIHBpeGVscyA9IHRoaXMuZGVjb21wcmVzczEoYml0cywgc2hpZnQsIHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlID49IDB4MTggJiYgY29kZSA8PSAweDFjKSB7IC8vIG1ldGhvZCAxIGhvcml6b250YWxcbiAgICAgIHBpeGVscyA9IHRoaXMuZGVjb21wcmVzczEoYml0cywgc2hpZnQsIHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlID49IDB4MjIgJiYgY29kZSA8PSAweDI2KSB7IC8vIG1ldGhvZCAxIHZlcnRpY2FsIHRyYW5zcFxuICAgICAgb3JpZW50YXRpb24gPSAxO1xuICAgICAgcGl4ZWxzID0gdGhpcy5kZWNvbXByZXNzMShiaXRzLCBzaGlmdCwgd2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGUgPj0gMHgyYyAmJiBjb2RlIDw9IDB4MzApIHsgLy8gbWV0aG9kIDEgaG9yaXpvbnRhbCB0cmFuc3BcbiAgICAgIHBpeGVscyA9IHRoaXMuZGVjb21wcmVzczEoYml0cywgc2hpZnQsIHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlID49IDB4NDAgJiYgY29kZSA8PSAweDQ0KSB7IC8vIG1ldGhvZCAyIGhvcml6b250YWxcbiAgICAgIHBpeGVscyA9IHRoaXMuZGVjb21wcmVzczIoYml0cywgc2hpZnQsIHdpZHRoLCBoZWlnaHQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlID49IDB4NTQgJiYgY29kZSA8PSAweDU4KSB7IC8vIG1ldGhvZCAyIGhvcml6b250YWwgdHJhbnNwXG4gICAgICBwaXhlbHMgPSB0aGlzLmRlY29tcHJlc3MyKGJpdHMsIHNoaWZ0LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZSA+PSAweDY4ICYmIGNvZGUgPD0gMHg2YykgeyAvLyBtZXRob2QgMiBob3Jpem9udGFsIHRyYW5zcFxuICAgICAgcGl4ZWxzID0gdGhpcy5kZWNvbXByZXNzMihiaXRzLCBzaGlmdCwgd2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGUgPj0gMHg3YyAmJiBjb2RlIDw9IDB4ODApIHsgLy8gbWV0aG9kIDIgaG9yaXpvbnRhbFxuICAgICAgcGl4ZWxzID0gdGhpcy5kZWNvbXByZXNzMihiaXRzLCBzaGlmdCwgd2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ3Vua25vd24nLCBjb2RlKTtcbiAgICB9XG5cbiAgICBpZiAob3JpZW50YXRpb24pIHsgLy8gdmVydGljYWxcbiAgICAgIGxldCB0ZW1wID0gbmV3IFVpbnQ4QXJyYXkocGl4ZWxzLmxlbmd0aCk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaW5kZXggPSAwOyBpIDwgcGl4ZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRlbXBbaW5kZXhdID0gcGl4ZWxzW2ldO1xuICAgICAgICBpbmRleCArPSA4O1xuICAgICAgICBpZiAoaW5kZXggPj0gaGVpZ2h0ICogOCkgaW5kZXggPSAoKGkgLyBoZWlnaHQpID4+IDApICsgMTtcbiAgICAgIH1cbiAgICAgIHBpeGVscyA9IHRlbXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBpeGVscztcbiAgfVxuXG4gIHBhcnNlU21hcChzdHJlYW0sIHdpZHRoLCBoZWlnaHQpIHtcbiAgICBsZXQgYmFzZSA9IHN0cmVhbS5vZmZzZXQ7XG5cbiAgICBsZXQgbmFtZSA9IHRoaXMucGFyc2VCbG9ja05hbWUoc3RyZWFtKTtcbiAgICBsZXQgc2l6ZSA9IHN0cmVhbS5nZXRVaW50MzIoKTtcblxuICAgIGlmIChuYW1lICE9PSAnU01BUCcpIHJldHVybjtcblxuICAgIGxldCBvZmZzZXRzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdpZHRoIC8gODsgaSsrKVxuICAgICAgb2Zmc2V0cy5wdXNoKHN0cmVhbS5nZXRVaW50MzJMRSgpKTtcblxuICAgIGxldCBiaXRtYXAgPSBuZXcgVWludDhBcnJheSh3aWR0aCAqIGhlaWdodCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9mZnNldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHN0cmVhbS5zZWVrKGJhc2UgKyBvZmZzZXRzW2ldKTtcbiAgICAgIGxldCBwaXhlbHMgPSB0aGlzLmRlY29tcHJlc3NTdHJpcChzdHJlYW0sIDgsIGhlaWdodCk7XG4gICAgICBpZiAocGl4ZWxzKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwLCB4ID0gMCwgeSA9IDA7IGogPCBwaXhlbHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBiaXRtYXBbeCArIGkgKiA4ICsgeSAqIHdpZHRoXSA9IHBpeGVsc1tqXTtcbiAgICAgICAgICB5ID0gKHggPT0gNyA/IHkgKyAxIDogeSk7XG4gICAgICAgICAgeCA9ICh4ID09IDcgPyAwIDogeCArIDEpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICB9XG5cbiAgICByZXR1cm4gYml0bWFwO1xuICB9XG5cbiAgcGFyc2VPQklNKHN0cmVhbSkge1xuICAgIGxldCBuYW1lID0gdGhpcy5wYXJzZUJsb2NrTmFtZShzdHJlYW0pO1xuICAgIGlmIChuYW1lICE9PSAnSU1IRCcpIHJldHVybjtcbiAgICBsZXQgc2l6ZSA9IHN0cmVhbS5nZXRVaW50MzIoKTtcblxuICAgIGxldCBvYiA9IHt9O1xuXG4gICAgb2IuaWQgPSBzdHJlYW0uZ2V0VWludDE2TEUoKTtcbiAgICBvYi5pbW5uID0gc3RyZWFtLmdldFVpbnQxNkxFKCk7XG4gICAgb2IuenBubiA9IHN0cmVhbS5nZXRVaW50MTZMRSgpO1xuICAgIG9iLmZsYWdzID0gc3RyZWFtLmdldFVpbnQ4KCk7XG4gICAgc3RyZWFtLmFkdmFuY2UoKTtcbiAgICBvYi54ID0gc3RyZWFtLmdldFVpbnQxNkxFKCk7XG4gICAgb2IueSA9IHN0cmVhbS5nZXRVaW50MTZMRSgpO1xuICAgIG9iLndpZHRoID0gc3RyZWFtLmdldFVpbnQxNkxFKCk7XG4gICAgb2IuaGVpZ2h0ID0gc3RyZWFtLmdldFVpbnQxNkxFKCk7XG4gICAgb2IuYml0bWFwcyA9IFtdO1xuXG4gICAgaWYgKG9iLmltbm4pIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2IuaW1ubjsgaSsrKSB7XG4gICAgICAgIGxldCBuYW1lID0gdGhpcy5wYXJzZUJsb2NrTmFtZShzdHJlYW0pO1xuICAgICAgICBsZXQgc2l6ZSA9IHN0cmVhbS5nZXRVaW50MzIoKTtcbiAgICAgICAgbGV0IGp1bXAgPSBzdHJlYW0ub2Zmc2V0ICsgc2l6ZSAtIDg7XG5cbiAgICAgICAgbGV0IGJpdG1hcCA9IHRoaXMucGFyc2VTbWFwKHN0cmVhbSwgb2Iud2lkdGgsIG9iLmhlaWdodCk7XG4gICAgICAgIG9iLmJpdG1hcHMucHVzaChiaXRtYXApO1xuICAgICAgICBzdHJlYW0uc2VlayhqdW1wKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb2I7XG4gIH1cblxuICBwYXJzZU9CQ0Qoc3RyZWFtKSB7XG4gICAgbGV0IG5hbWUgPSB0aGlzLnBhcnNlQmxvY2tOYW1lKHN0cmVhbSk7XG4gICAgbGV0IHNpemUgPSBzdHJlYW0uZ2V0VWludDMyKCk7XG5cbiAgICBsZXQgb2IgPSB7fTtcblxuICAgIG9iLmlkID0gc3RyZWFtLmdldFVpbnQxNkxFKCk7XG4gICAgb2IueCA9IHN0cmVhbS5nZXRVaW50OCgpO1xuICAgIG9iLnkgPSBzdHJlYW0uZ2V0VWludDgoKTtcbiAgICBvYi53aWR0aCA9IHN0cmVhbS5nZXRVaW50OCgpO1xuICAgIG9iLmhlaWdodCA9IHN0cmVhbS5nZXRVaW50OCgpO1xuICAgIG9iLmZsYWdzID0gc3RyZWFtLmdldFVpbnQ4KCk7XG4gICAgb2IucGFyZW50ID0gc3RyZWFtLmdldFVpbnQ4KCk7XG4gICAgb2Iud2Fsa194ID0gc3RyZWFtLmdldFVpbnQxNkxFKCk7XG4gICAgb2Iud2Fsa195ID0gc3RyZWFtLmdldFVpbnQxNkxFKCk7XG4gICAgb2IuYWN0b3JfZGlyID0gc3RyZWFtLmdldFVpbnQ4KCk7XG4gICAgb2IubmFtZSA9ICcnO1xuXG4gICAgbmFtZSA9IHRoaXMucGFyc2VCbG9ja05hbWUoc3RyZWFtKTtcbiAgICBzaXplID0gc3RyZWFtLmdldFVpbnQzMigpO1xuICAgIHN0cmVhbS5hZHZhbmNlKHNpemUgLSA4KTtcblxuICAgIHN0cmVhbS5hZHZhbmNlKDgpO1xuXG4gICAgZm9yIChsZXQgYiA9IHN0cmVhbS5nZXRVaW50OCgpOyBiICE9PSAwOyBiID0gc3RyZWFtLmdldFVpbnQ4KCkpIHtcbiAgICAgIG9iLm5hbWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb2I7XG4gIH1cblxuICBwYXJzZVJvb20obnVtKSB7XG4gICAgbGV0IGJsb2NrID0gdGhpcy5yb29tc1tudW1dO1xuICAgIGlmICghYmxvY2spIHJldHVybjtcblxuICAgIGxldCBzdHJlYW0gPSBuZXcgQnVmZmVyU3RyZWFtKGJsb2NrLmJ1ZmZlcik7XG5cbiAgICBsZXQgZW5kID0gYmxvY2subGVuZ3RoO1xuXG4gICAgbGV0IHdpZHRoO1xuICAgIGxldCBoZWlnaHQ7XG4gICAgbGV0IG51bU9iamVjdHM7XG4gICAgbGV0IHBhbGV0dGU7XG4gICAgbGV0IGJpdG1hcDtcbiAgICBsZXQgdHJhbnNwYXJlbnQ7XG4gICAgbGV0IG9iSU1zID0gW107XG4gICAgbGV0IG9iQ0RzID0gW107XG5cbiAgICB3aGlsZSAoc3RyZWFtLm9mZnNldCA8IGVuZCkge1xuICAgICAgbGV0IG5hbWUgPSB0aGlzLnBhcnNlQmxvY2tOYW1lKHN0cmVhbSk7XG4gICAgICBsZXQgc2l6ZSA9IHN0cmVhbS5nZXRVaW50MzIoKTtcbiAgICAgIGxldCBqdW1wID0gc3RyZWFtLm9mZnNldCArIHNpemUgLSA4O1xuXG4gICAgICBpZiAobmFtZSA9PSAnUk1IRCcpIHtcbiAgICAgICAgd2lkdGggPSBzdHJlYW0uZ2V0VWludDE2TEUoKTtcbiAgICAgICAgaGVpZ2h0ID0gc3RyZWFtLmdldFVpbnQxNkxFKCk7XG4gICAgICAgIG51bU9iamVjdHMgPSBzdHJlYW0uZ2V0VWludDE2TEUoKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG5hbWUgPT0gJ1JNSU0nKSB7XG4gICAgICAgIHN0cmVhbS5hZHZhbmNlKDE4KTtcbiAgICAgICAgYml0bWFwID0gdGhpcy5wYXJzZVNtYXAoc3RyZWFtLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG5hbWUgPT0gJ0NMVVQnKSB7XG4gICAgICAgIHBhbGV0dGUgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgICAgICAgIGxldCByID0gc3RyZWFtLmdldFVpbnQ4KCk7XG4gICAgICAgICAgbGV0IGcgPSBzdHJlYW0uZ2V0VWludDgoKTtcbiAgICAgICAgICBsZXQgYiA9IHN0cmVhbS5nZXRVaW50OCgpO1xuICAgICAgICAgIHBhbGV0dGUucHVzaChyLCBnLCBiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAobmFtZSA9PSAnT0JJTScpIHtcbiAgICAgICAgbGV0IG9iID0gdGhpcy5wYXJzZU9CSU0oc3RyZWFtKTtcbiAgICAgICAgb2JJTXNbb2IuaWRdID0gb2I7XG4gICAgICAgIC8vIGlmIChvYi5pbW5uID4gMSkgY29uc29sZS5sb2cobnVtLCBvYi5pZCwgb2IuaW1ubik7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChuYW1lID09ICdPQkNEJykge1xuICAgICAgICBsZXQgb2IgPSB0aGlzLnBhcnNlT0JDRChzdHJlYW0pO1xuICAgICAgICBvYkNEc1tvYi5pZF0gPSBvYjtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG5hbWUgPT0gJ1RSTlMnKSB7XG4gICAgICAgIHRyYW5zcGFyZW50ID0gc3RyZWFtLmdldFVpbnQ4KCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdUUk5TJywgdHJhbnNwYXJlbnQpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vIHN0cmVhbS5nZXRCeXRlcyhzaXplIC0gOCk7XG4gICAgICB9XG4gICAgICBzdHJlYW0uc2VlayhqdW1wKTtcbiAgICB9XG5cbiAgICBsZXQgcm9vbSA9IG5ldyBTY3VtbS5Sb29tKHtcbiAgICAgIGlkOiBudW0sXG4gICAgICBuYW1lOiB0aGlzLnJvb21OYW1lc1tudW1dLFxuICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICBudW1PYmplY3RzOiBudW1PYmplY3RzLFxuICAgICAgb2JJTXM6IG9iSU1zLFxuICAgICAgb2JDRHM6IG9iQ0RzLFxuICAgICAgYml0bWFwOiBiaXRtYXAsXG4gICAgICBwYWxldHRlOiBwYWxldHRlLFxuICAgICAgdHJhbnNwYXJlbnQ6IHRyYW5zcGFyZW50XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcm9vbTtcbiAgfVxuXG4gIGdldFJvb21MaXN0KCkge1xuICAgIC8vIGNvbnNvbGUubG9nKCdnZXRSb29tTGlzdCcpO1xuICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucm9vbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCByb29tID0gdGhpcy5yb29tc1tpXTtcbiAgICAgIGlmIChyb29tKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHsgaWQ6IGksIG5hbWU6IHRoaXMucm9vbU5hbWVzW2ldIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcGFyc2VCdW5kbGUoYnVmZmVyKSB7XG4gICAgY29uc29sZS5sb2coJ3BhcnNlQnVuZGxlJyk7XG5cbiAgICBsZXQgc3RyZWFtID0gbmV3IEJ1ZmZlclN0cmVhbShidWZmZXIpO1xuXG4gICAgbGV0IG5hbWUgPSB0aGlzLnBhcnNlQmxvY2tOYW1lKHN0cmVhbSk7XG4gICAgbGV0IHNpemUgPSBzdHJlYW0uZ2V0VWludDMyKCk7XG5cbiAgICBpZiAobmFtZSAhPSAnTEVDRicpIHJldHVybjtcblxuICAgIG5hbWUgPSB0aGlzLnBhcnNlQmxvY2tOYW1lKHN0cmVhbSk7XG4gICAgc2l6ZSA9IHN0cmVhbS5nZXRVaW50MzIoKTtcblxuICAgIGlmIChuYW1lID09ICdMT0ZGJykge1xuICAgICAgdGhpcy5udW1yb29tcyA9IHN0cmVhbS5nZXRVaW50OCgpO1xuXG4gICAgICBsZXQgb2Zmc2V0cyA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubnVtcm9vbXM7IGkrKykge1xuICAgICAgICBsZXQgaWQgPSBzdHJlYW0uZ2V0VWludDgoKTtcbiAgICAgICAgbGV0IG9mZnMgPSBzdHJlYW0uZ2V0VWludDMyTEUoKTtcbiAgICAgICAgb2Zmc2V0c1tpZF0gPSBvZmZzO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9mZnNldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG9mZnMgPSBvZmZzZXRzW2ldO1xuICAgICAgICBpZiAob2ZmcyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzdHJlYW0uc2VlayhvZmZzKTtcbiAgICAgICAgICBsZXQgbmFtZSA9IHRoaXMucGFyc2VCbG9ja05hbWUoc3RyZWFtKTtcbiAgICAgICAgICBsZXQgc2l6ZSA9IHN0cmVhbS5nZXRVaW50MzIoKTtcbiAgICAgICAgICB0aGlzLnJvb21zW2ldID0gc3RyZWFtLmdldEJ5dGVzKHNpemUgLSA4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVzb3VyY2U7XG4iLCJcbnZhciBTY3VtbSA9IHtcbiAgUm9vbU9iamVjdDogcmVxdWlyZSgnLi9yb29tX29iamVjdCcpLFxuICBSb29tOiByZXF1aXJlKCcuL3Jvb20nKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNjdW1tO1xuIiwiY29uc3QgUm9vbU9iamVjdCA9IHJlcXVpcmUoJy4vcm9vbV9vYmplY3QnKTtcblxuY2xhc3MgUm9vbSB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgIHRoaXMuaWQgPSBwYXJhbXMuaWQ7XG4gICAgdGhpcy5uYW1lID0gcGFyYW1zLm5hbWU7XG4gICAgdGhpcy53aWR0aCA9IHBhcmFtcy53aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IHBhcmFtcy5oZWlnaHQ7XG4gICAgdGhpcy5udW1PYmplY3RzID0gcGFyYW1zLm51bU9iamVjdHM7XG4gICAgdGhpcy5vYklNcyA9IHBhcmFtcy5vYklNcztcbiAgICB0aGlzLm9iQ0RzID0gcGFyYW1zLm9iQ0RzO1xuICAgIHRoaXMucGFsZXR0ZSA9IHBhcmFtcy5wYWxldHRlO1xuICAgIHRoaXMuYml0bWFwID0gcGFyYW1zLmJpdG1hcDtcbiAgICB0aGlzLnRyYW5zcGFyZW50ID0gcGFyYW1zLnRyYW5zcGFyZW50O1xuICB9XG5cbiAgZ2V0T2JqZWN0cygpIHtcbiAgICBsZXQgb2JqZWN0cyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vYklNcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IG9iaW0gPSB0aGlzLm9iSU1zW2ldO1xuICAgICAgaWYgKG9iaW0pIHtcbiAgICAgICAgbGV0IG9iY2QgPSB0aGlzLm9iQ0RzW29iaW0uaWRdO1xuICAgICAgICBsZXQgb2IgPSBuZXcgUm9vbU9iamVjdCh7XG4gICAgICAgICAgaWQ6IG9iaW0uaWQsXG4gICAgICAgICAgbmFtZTogb2JjZC5uYW1lLFxuICAgICAgICAgIHg6IG9iaW0ueCxcbiAgICAgICAgICB5OiBvYmltLnksXG4gICAgICAgICAgd2lkdGg6IG9iaW0ud2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiBvYmltLmhlaWdodCxcbiAgICAgICAgICBiaXRtYXBzOiBvYmltLmJpdG1hcHNcbiAgICAgICAgfSk7XG4gICAgICAgIG9iamVjdHMucHVzaChvYik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmplY3RzO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUm9vbTtcbiIsIlxuY2xhc3MgUm9vbU9iamVjdCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgIHRoaXMuaWQgPSBwYXJhbXMuaWQ7XG4gICAgdGhpcy5uYW1lID0gcGFyYW1zLm5hbWU7XG4gICAgdGhpcy5pbW5uID0gcGFyYW1zLmltbm47XG4gICAgdGhpcy56cG5uID0gcGFyYW1zLnpwbm47XG4gICAgdGhpcy5mbGFncyA9IHBhcmFtcy5mbGFncztcbiAgICB0aGlzLnggPSBwYXJhbXMueDtcbiAgICB0aGlzLnkgPSBwYXJhbXMueTtcbiAgICB0aGlzLndpZHRoID0gcGFyYW1zLndpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gcGFyYW1zLmhlaWdodDtcbiAgICB0aGlzLmJpdG1hcHMgPSBwYXJhbXMuYml0bWFwcztcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJvb21PYmplY3Q7XG4iLCJcbmNsYXNzIENvbnRhaW5lciB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgIHRoaXMucGFyZW50ID0gcGFyYW1zLnBhcmVudDtcblxuICAgIHRoaXMuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ2NvbnRhaW5lcicpO1xuXG4gICAgdGhpcy50aXRsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy50aXRsZUVsLmlkID0gJ3RpdGxlJztcbiAgICB0aGlzLnRpdGxlRWwuY2xhc3NMaXN0LmFkZCgnY29udGFpbmVyLXRpdGxlJyk7XG4gICAgdGhpcy50aXRsZUVsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBhcmFtcy50aXRsZSkpO1xuICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy50aXRsZUVsKTtcblxuICAgIHRoaXMuY29udGVudEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5jb250ZW50RWwuaWQgPSAnY29udGVudCc7XG4gICAgdGhpcy5jb250ZW50RWwuY2xhc3NMaXN0LmFkZCgnY29udGFpbmVyLWNvbnRlbnQnKTtcblxuICAgIHRoaXMuY29udGVudEVsLmFwcGVuZENoaWxkKHBhcmFtcy5jb250ZW50KTtcblxuICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50RWwpO1xuXG4gICAgdGhpcy5lbC5zdHlsZS5sZWZ0ID0gcGFyYW1zLnggKyAncHgnO1xuICAgIHRoaXMuZWwuc3R5bGUudG9wID0gcGFyYW1zLnkgKyAncHgnO1xuXG4gICAgLy8gdGhpcy5jb250ZW50RWwuc3R5bGUud2lkdGggPSBwYXJhbXMud2lkdGggKyAncHgnO1xuICAgIC8vIHRoaXMuY29udGVudEVsLnN0eWxlLmhlaWdodCA9IHBhcmFtcy5oZWlnaHQgKyAncHgnO1xuICAgIHRoaXMuc2V0U2l6ZShwYXJhbXMud2lkdGgsIHBhcmFtcy5oZWlnaHQpO1xuXG4gICAgaWYgKHBhcmFtcy5zdGF0dXMpIHtcbiAgICAgIGxldCBzdGF0dXNFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgc3RhdHVzRWwuY2xhc3NMaXN0LmFkZCgnY29udGFpbmVyLXN0YXR1cycpO1xuICAgICAgLy8gc3RhdHVzRWwuaW5uZXJIVE1MID0gJ1N0YXR1cyAxMjM0NTY3ODkwJztcbiAgICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQoc3RhdHVzRWwpO1xuICAgIH1cblxuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcyk7XG4gIH1cblxuICBkb20oKSB7XG4gICAgcmV0dXJuIHRoaXMuZWw7XG4gIH1cblxuICBzZXRTaXplKHdpZHRoLCBoZWlnaHQpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5zdHlsZS5tYXhXaWR0aCA9IHRoaXMuY29udGVudEVsLnN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnO1xuICAgIHRoaXMuY29udGVudEVsLnN0eWxlLm1heEhlaWdodCA9IHRoaXMuY29udGVudEVsLnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7XG5cbiAgfVxuXG4gIGNhbmNlbERyYWcoKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcyk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzKTtcbiAgfVxuXG4gIG9uTW91c2VNb3ZlKGV2ZW50KSB7XG4gICAgbGV0IHggPSBldmVudC5tb3ZlbWVudFg7XG4gICAgbGV0IHkgPSBldmVudC5tb3ZlbWVudFk7XG4gICAgdGhpcy5lbC5zdHlsZS5sZWZ0ID0gKHRoaXMuZWwub2Zmc2V0TGVmdCArIHgpICsgJ3B4JztcbiAgICB0aGlzLmVsLnN0eWxlLnRvcCA9ICh0aGlzLmVsLm9mZnNldFRvcCArIHkpICsgJ3B4JztcbiAgfVxuXG4gIG9uTW91c2VEb3duKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmJ1dHRvbiA9PSAwICYmIGV2ZW50LnRhcmdldCA9PT0gdGhpcy50aXRsZUVsKSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcyk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzKTtcbiAgICB9XG4gIH1cblxuICBvbk1vdXNlVXAoZXZlbnQpIHtcbiAgICB0aGlzLmNhbmNlbERyYWcoKTtcbiAgfVxuXG4gIG9uQmx1cihldmVudCkge1xuICAgIHRoaXMuY2FuY2VsRHJhZygpO1xuICB9XG5cbiAgaGFuZGxlRXZlbnQoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudHlwZSA9PSAnbW91c2Vkb3duJykge1xuICAgICAgdGhpcy5vbk1vdXNlRG93bihldmVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50LnR5cGUgPT0gJ21vdXNldXAnKSB7XG4gICAgICB0aGlzLm9uTW91c2VVcChldmVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50LnR5cGUgPT0gJ21vdXNlbW92ZScpIHtcbiAgICAgIHRoaXMub25Nb3VzZU1vdmUoZXZlbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudC50eXBlID09ICdibHVyJykge1xuICAgICAgdGhpcy5vbkJsdXIoZXZlbnQpO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnRhaW5lcjtcbiIsIlxuY2xhc3MgTGlzdCB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtcz17fSkge1xuICAgIHRoaXMudHlwZSA9IHBhcmFtcy50eXBlID09IHVuZGVmaW5lZCA/ICdsaXN0JyA6IHBhcmFtcy50eXBlO1xuICAgIHRoaXMubXVsdGlwbGUgPSBwYXJhbXMubXVsdGlwbGU7XG5cbiAgICB0aGlzLmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICB0aGlzLml0ZW1zID0gW107XG4gICAgdGhpcy5zZWxlY3Rpb24gPSBbXTtcblxuICAgIGxldCBjbDtcbiAgICBpZiAodGhpcy50eXBlID09ICdpY29uJykge1xuICAgICAgY2wgPSAnaWNvbi1saXN0JztcbiAgICB9IGVsc2Uge1xuICAgICAgY2wgPSAnbGlzdCc7XG4gICAgfVxuICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZChjbCk7XG5cbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzKTtcblxuICAgIC8vIHRoaXMuZWwudGFiSW5kZXggPSBwYXJhbXMudGFiSW5kZXggfHwgMTtcbiAgICB0aGlzLmVsLnRhYkluZGV4ID0gLTE7XG4gIH1cblxuICBjcmVhdGVJdGVtKGl0ZW0pIHtcbiAgICBsZXQgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbC5pZCA9ICdpdGVtJyArIGl0ZW0uaWQ7XG4gICAgZWwuZGF0YXNldC5pZCA9IGl0ZW0uaWQ7XG5cbiAgICBpZiAodGhpcy50eXBlID09ICdpY29uJykge1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnaWNvbi1saXN0LWl0ZW0nKTtcblxuICAgICAgbGV0IGltYWdlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGltYWdlRWwuY2xhc3NMaXN0LmFkZCgnaWNvbi1saXN0LWltYWdlJyk7XG4gICAgICBpbWFnZUVsLmFwcGVuZENoaWxkKGl0ZW0uaW1hZ2UpO1xuICAgICAgZWwuYXBwZW5kQ2hpbGQoaW1hZ2VFbCk7XG5cbiAgICAgIGxldCB0aXRsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0aXRsZUVsLmNsYXNzTGlzdC5hZGQoJ2ljb24tbGlzdC10aXRsZScpO1xuICAgICAgdGl0bGVFbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpdGVtLnRpdGxlKSk7XG4gICAgICBlbC5hcHBlbmRDaGlsZCh0aXRsZUVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnbGlzdC1pdGVtJyk7XG4gICAgICBlbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpdGVtLnRpdGxlKSk7XG4gICAgfVxuXG4gICAgdGhpcy5lbC5hcHBlbmRDaGlsZChlbCk7XG5cbiAgICB0aGlzLml0ZW1zLnB1c2goaXRlbSk7XG4gIH1cblxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICB0aGlzLmNyZWF0ZUl0ZW0oaXRlbSk7XG4gIH1cblxuICBhZGRJdGVtcyhpdGVtcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBpdGVtID0gaXRlbXNbaV07XG4gICAgICB0aGlzLmNyZWF0ZUl0ZW0oaXRlbSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0SXRlbShpZCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbmQoZWxlbWVudCA9PiBlbGVtZW50LmlkID09IGlkKTtcbiAgfVxuXG4gIGRvbSgpIHtcbiAgICByZXR1cm4gdGhpcy5lbDtcbiAgfVxuXG4gIHNlbGVjdChpZCwgdG9nZ2xlPWZhbHNlKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ3NlbGVjdCcsIGlkLCB0b2dnbGUpO1xuICAgIGxldCBpdGVtID0gdGhpcy5nZXRJdGVtKGlkKTtcblxuICAgIGlmICghdGhpcy5zZWxlY3Rpb24uaW5jbHVkZXMoaXRlbSkpIHtcbiAgICAgIGxldCBlbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignI2l0ZW0nICsgaWQpO1xuICAgICAgaWYgKGVsKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICB9XG4gICAgICB0aGlzLnNlbGVjdGlvbi5wdXNoKGl0ZW0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnYWxyZWFkeScpO1xuICAgICAgaWYgKHRvZ2dsZSkge1xuICAgICAgICB0aGlzLmRlc2VsZWN0KGlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkZXNlbGVjdChpZCkge1xuICAgIGlmIChpZCkge1xuICAgICAgbGV0IGl0ZW0gPSB0aGlzLmdldEl0ZW0oaWQpO1xuICAgICAgbGV0IGVsID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCcjaXRlbScgKyBpdGVtLmlkKTtcbiAgICAgIGlmIChlbCkge1xuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuICAgICAgfVxuICAgICAgdGhpcy5zZWxlY3Rpb24gPSB0aGlzLnNlbGVjdGlvbi5maWx0ZXIoZWxlbWVudCA9PiBlbGVtZW50ICE9PSBpdGVtKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2VsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBpdGVtID0gdGhpcy5zZWxlY3Rpb25baV07XG4gICAgICAgIGxldCBlbCA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignI2l0ZW0nICsgaXRlbS5pZCk7XG4gICAgICAgIGlmIChlbCkge1xuICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuc2VsZWN0aW9uID0gW107XG4gICAgfVxuICB9XG5cbiAgb25Nb3VzZURvd24oZXZlbnQpIHtcbiAgICBsZXQgaWQgPSBldmVudC50YXJnZXQuZGF0YXNldC5pZDtcbiAgICBpZiAoaWQpIHtcblxuICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcbiAgICAgICAgbGV0IHRvZ2dsZSA9IGV2ZW50Lm1ldGFLZXkgfHwgZXZlbnQuY3RybEtleTtcbiAgICAgICAgaWYgKCF0b2dnbGUpIHRoaXMuZGVzZWxlY3QoKTtcbiAgICAgICAgdGhpcy5zZWxlY3QoaWQsIHRvZ2dsZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRlc2VsZWN0KCk7XG4gICAgICAgIHRoaXMuc2VsZWN0KGlkKTtcbiAgICAgIH1cbiAgICAgIC8vIHRoaXMuc2VsZWN0KGlkKTtcblxuICAgICAgdmFyIG15RXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NoYW5nZScsIHtcbiAgICAgIFx0ZGV0YWlsOiB7IHNlbGVjdGlvbjogdGhpcy5zZWxlY3Rpb24gfVxuICAgICAgfSk7XG4gICAgICB0aGlzLmVsLmRpc3BhdGNoRXZlbnQobXlFdmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVzZWxlY3QoKTtcbiAgICAgIHZhciBteUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjaGFuZ2UnLCB7XG4gICAgICBcdGRldGFpbDogeyBzZWxlY3Rpb246IHRoaXMuc2VsZWN0aW9uIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5lbC5kaXNwYXRjaEV2ZW50KG15RXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIG9uS2V5RG93bihldmVudCkge1xuICAgIGNvbnNvbGUubG9nKGV2ZW50KTtcbiAgfVxuXG4gIG9uRm9jdXMoZXZlbnQpIHtcbiAgICBjb25zb2xlLmxvZygnZm9jdXMnKTtcbiAgfVxuXG4gIGhhbmRsZUV2ZW50KGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT0gJ21vdXNlZG93bicpIHtcbiAgICAgIHRoaXMub25Nb3VzZURvd24oZXZlbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudC50eXBlID09ICdrZXlkb3duJykge1xuICAgICAgdGhpcy5vbktleURvd24oZXZlbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudC50eXBlID09ICdmb2N1cycpIHtcbiAgICAgIHRoaXMub25Gb2N1cyhldmVudCk7XG4gICAgfVxuICB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBMaXN0O1xuIiwiXG5jbGFzcyBXb3Jrc3BhY2Uge1xuICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICB0aGlzLmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCd3b3Jrc3BhY2UnKTtcbiAgICB0aGlzLnBhcmVudCA9IHBhcmFtcy5wYXJlbnQ7XG4gICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuICAgIHRoaXMucGFyZW50LmFwcGVuZENoaWxkKHRoaXMuZWwpO1xuICB9XG5cbiAgYWRkKGNoaWxkKSB7XG4gICAgY2hpbGQueiA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoID8gdGhpcy5jaGlsZHJlblt0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDFdLnogKyAxIDogMTtcbiAgICBsZXQgY2hpbGRFbCA9IGNoaWxkLmRvbSgpO1xuICAgIGNoaWxkRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcyk7XG4gICAgdGhpcy5lbC5hcHBlbmRDaGlsZChjaGlsZEVsKTtcbiAgICBjaGlsZEVsLnN0eWxlLnpJbmRleCA9IGNoaWxkLno7XG4gICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgfVxuXG4gIHJlbW92ZShjaGlsZCkge1xuICAgIGxldCBjaGlsZEVsID0gY2hpbGQuZG9tKCk7XG4gICAgY2hpbGRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzKTtcbiAgICB0aGlzLmVsLnJlbW92ZUNoaWxkKGNoaWxkRWwpO1xuICAgIHRoaXMuY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuLmZpbHRlcihlbGVtZW50ID0+IGVsZW1lbnQgIT09IGNoaWxkKTtcbiAgfVxuXG4gIGJyaW5nVG9Gcm9udChjaGlsZCkge1xuICAgIGNoaWxkLnogPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgdGhpcy5jaGlsZHJlbi5zb3J0KChhLCBiKSA9PiB7IHJldHVybiBhLnogLSBiLnogfSApO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXTtcbiAgICAgIGNoaWxkLmRvbSgpLnN0eWxlLnpJbmRleCA9IGNoaWxkLnogPSBpO1xuICAgIH1cbiAgfVxuXG4gIG9uTW91c2VEb3duKGV2ZW50KSB7XG4gICAgbGV0IHRlbXAgPSBldmVudC50YXJnZXQ7XG5cbiAgICB3aGlsZSAodGVtcC5wYXJlbnROb2RlICYmIHRlbXAucGFyZW50Tm9kZSAhPT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgaWYgKHRlbXAucGFyZW50Tm9kZSA9PT0gdGhpcy5lbCkgYnJlYWs7XG4gICAgICB0ZW1wID0gdGVtcC5wYXJlbnROb2RlO1xuICAgIH1cblxuICAgIGxldCBjaGlsZCA9IHRoaXMuY2hpbGRyZW4uZmluZChlbGVtZW50ID0+IGVsZW1lbnQuZG9tKCkgPT09IHRlbXApO1xuICAgIGlmIChjaGlsZCkge1xuICAgICAgdGhpcy5icmluZ1RvRnJvbnQoY2hpbGQpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUV2ZW50KGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT0gJ21vdXNlZG93bicpIHtcbiAgICAgIHRoaXMub25Nb3VzZURvd24oZXZlbnQpO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFdvcmtzcGFjZTtcbiJdfQ=="}