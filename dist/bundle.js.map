{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/app.js","src/bit_stream.js","src/bitmap.js","src/buffer_stream.js","src/room.js","src/scumm.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","const Scumm = require('./scumm');\nconst Bitmap = require('./bitmap');\nconst Room = require('./room');\nconst BufferStream = require('./buffer_stream');\nconst BitStream = require('./bit_stream');\n\nconst INDEX_FILE = 'monkey2.000';\nconst BUNDLE_FILE = 'monkey2.001';\n// const INDEX_FILE = 'mi2demo.000';\n// const BUNDLE_FILE = 'mi2demo.001';\n\nclass App {\n  constructor() {\n    console.log('App');\n\n    this.files = [];\n    this.roomNames = [];\n    this.roomOffsets = [];\n    this.roomBlockOffsets = [];\n    this.rooms = [];\n\n    this.offscreen = document.createElement('canvas');\n    this.offscreen.width = 320;\n    this.offscreen.height = 200;\n\n    this.canvas = document.createElement('canvas');\n    this.canvas.width = 640;\n    this.canvas.height = 400;\n    document.body.appendChild(this.canvas);\n\n    this.initEventListeners();\n  }\n\n  decode(buffer, enc=0) {\n    let temp = new Uint8Array(buffer);\n    for (var i = 0; i < temp.length; i++) {\n      temp[i] = temp[i] ^ enc;\n    }\n    return temp.buffer;\n  }\n\n  getBlockTypeName(uint32) {\n    return String.fromCharCode(\n      (uint32 & 0xff),\n      ((uint32 >> 8) & 0xff),\n      ((uint32 >> 16) & 0xff),\n      ((uint32 >> 24) & 0xff)\n    );\n  }\n\n  parseIndex() {\n    if (!this.files[INDEX_FILE]) return;\n    let stream = new BufferStream(this.files[INDEX_FILE]);\n\n    while (stream.offset < stream.length) {\n      let type = stream.getUint32LE();\n      let size = stream.getUint32();\n      let name = this.getBlockTypeName(type);\n\n      if (name == 'RNAM') { // Room names table\n        while (1) {\n          let roomno = stream.getUint8();\n          if (roomno == 0) break;\n\n          let bytes = stream.getBytes(9);\n          this.roomNames[roomno] = bytes.reduce((accumulator, currentValue) => {\n            return accumulator + (currentValue != 0xff ? String.fromCharCode(currentValue ^ 0xff) : '');\n          }, '');\n        }\n        console.log(this.roomNames);\n      // }\n      // else if (name == 'DROO') {\n      //   let numitems = stream.getUint16LE();\n      //   let roomNos = stream.getBytes(, numitems);\n      //\n      //   let roomOffsets = [];\n      //   for (var i = 0; i < numitems; i++) {\n      //     let offs = stream.getUint32LE();\n      //     roomOffsets[i] = offs;\n      //   }\n      } else {\n        stream.getBytes(size - 8);\n      }\n    }\n  }\n\n  getBundleStream() {\n    let filename = BUNDLE_FILE;\n    if (!this.files[filename]) return;\n    let stream = new BufferStream(this.files[filename]);\n    return stream;\n  }\n\n  readBlockHead(stream) {\n    let type = stream.getUint32LE();\n    let size = stream.getUint32();\n    let name = this.getBlockTypeName(type);\n    return { name: name, type: type, size: size };\n  }\n\n  decompressStrip(stream, width, height) {\n    let pixels = new Uint8Array(width * height);\n    let offset = 0;\n\n    let code = stream.getUint8();\n    let shift = code % 10;\n    // let mask = 0xff >> (8 - shift);\n\n    let color = stream.getUint8();\n\n    let bits = new BitStream(stream);\n\n    console.log(code);\n\n    if (code >= 0x40 && code <= 0x44) {\n      // console.log('Method B Horizontal', code, shift);\n      // console.log('Color', color, '[', this.palette[color*3], this.palette[color*3+1], this.palette[color*3+2], ']');\n\n      //scab-isl\n      //01010100[4]01101110[3]11011010[2]00110100[1]01001101[0]\n\n      // for (var i = 0; i < 1; i++) {\n      //   let b = bits.read(16);\n      //   console.log(b.toString(2).padStart(16, '0'));\n      // }\n\n      while (offset < width * height) {\n        pixels[offset++] = color;\n\n        if (bits.read()) {\n          if (bits.read()) {\n            // command\n            let c = bits.read(3);\n\n            if (c >= 0 && c <= 3) {\n              color += 4 - c;\n            }\n            else if (c == 4) {\n              // run\n              let run = bits.read(8);\n              for (var i = 0; i < run; i++) {\n                pixels[offset++] = color;\n              }\n            }\n            else if (c >= 5 && c <= 7) {\n              color -= c - 4;\n            }\n          } else {\n            // read a palette index\n            color = bits.read(shift);\n            // console.log('new index', color);\n          }\n        }\n      }\n    }\n\n    return pixels;\n  }\n\n  drawStrip(pixels, pos, width, height) {\n    // console.log('drawStrip', pos, width, height);\n    let ctx = this.offscreen.getContext('2d');\n    let imageData = ctx.getImageData(pos, 0, width, height);\n    for (var y = 0; y < height; y++) {\n      for (var x = 0; x < width; x++) {\n        let index = y * width + x;\n        let color = pixels[index];\n        if (color) {\n          imageData.data[index * 4 + 0] = this.palette[color * 3 + 0];\n          imageData.data[index * 4 + 1] = this.palette[color * 3 + 1];\n          imageData.data[index * 4 + 2] = this.palette[color * 3 + 2];\n          imageData.data[index * 4 + 3] = 255;\n        }\n      }\n    }\n    ctx.putImageData(imageData, pos, 0);\n\n    ctx = this.canvas.getContext('2d');\n    ctx.imageSmoothingEnabled = false;\n    ctx.drawImage(this.offscreen, 0, 0, 320*2, 200*2);\n  }\n\n  parseRoom(num) {\n    console.log('Parsing room', num, '...');\n    let stream = this.getBundleStream();\n    let offset = this.roomOffsets[num];\n\n    stream.seek(offset);\n\n    // Read and store the block offsets RMHD, CLUT etc\n\n    let block = this.readBlockHead(stream);\n    let end = offset + block.size;\n    let blocks = {};\n\n    while (stream.offset < end) {\n      let block = this.readBlockHead(stream);\n\n      let info = {\n        name: block.name,\n        size: block.size,\n        offset: stream.offset - 8\n      };\n\n      if (blocks[block.name]) {\n        if (blocks[block.name] instanceof Array) {\n          blocks[block.name].push(info);\n        } else {\n          blocks[block.name] = [ blocks[block.name], info ];\n        }\n      } else {\n        blocks[block.name] = info;\n      }\n\n      stream.getBytes(block.size - 8);\n    }\n\n    // console.log(blocks);\n\n    this.roomBlockOffsets[num] = blocks;\n\n    // Read header data - width, height etc\n\n    stream.seek(blocks['RMHD'].offset + 8);\n    let width = stream.getUint16LE();\n    let height = stream.getUint16LE();\n    let numObjects = stream.getUint16LE();\n\n    // console.log(this.roomNames[num], width, height, numObjects);\n\n    let room = new Room({ width: width, height: height, numObjects: numObjects });\n\n    // Read palette entries\n\n    if (blocks['CLUT']) {\n      stream.seek(blocks['CLUT'].offset + 8);\n\n      room.palette = [];\n      for (var i = 0; i < 256; i++) {\n        let r = stream.getUint8();\n        let g = stream.getUint8();\n        let b = stream.getUint8();\n        room.palette.push(r, g, b);\n      }\n\n      this.palette = room.palette;\n    }\n\n    // Decode background image\n\n    if (blocks['RMIM']) {\n      stream.seek(blocks['RMIM'].offset + 8);\n\n      let block = this.readBlockHead(stream);\n      let numzbuf = stream.getUint16LE();\n\n      if (block.name == 'RMIH') {\n        let block = this.readBlockHead(stream);\n\n        if (block.name == 'IM00') {\n          let SMAPoffs = stream.offset;\n          let block = this.readBlockHead(stream);\n\n          if (block.name == 'SMAP') {\n            let offsets = [];\n            for (var i = 0; i < room.width / 8; i++) {\n              let offs = stream.getUint32LE();\n              offsets.push(offs);\n            }\n            // console.log('offsets', offsets[0], offsets[1]);\n            for (var i = 0; i < room.width / 8; i++) {\n              stream.seek(SMAPoffs + offsets[i]);\n              let pixels = this.decompressStrip(stream, 8, room.height);\n              this.drawStrip(pixels, i*8, 8, room.height);\n            }\n          }\n        }\n      }\n    }\n\n    this.rooms[num] = room;\n  }\n\n  parseBundle(num) {\n    let stream = this.getBundleStream();\n    let block = this.readBlockHead(stream);\n\n    let offset = 8;\n\n    if (block.name == 'LECF') {\n      let block = this.readBlockHead(stream);\n\n      if (block.name == 'LOFF') {\n        let numrooms = stream.getUint8();\n        for (var i = 0; i < numrooms; i++) {\n          let room = stream.getUint8();\n          let offs = stream.getUint32LE();\n          this.roomOffsets[room] = offs;\n        }\n      }\n    }\n  }\n\n  createPaletteElement(num) {\n    let room = this.rooms[num];\n\n    if (room && room.palette) {\n      let paletteEl = document.createElement('div');\n      paletteEl.classList.add('palette');\n\n      for (var i = 0; i < 256; i++) {\n        let r = room.palette[i*3];\n        let g = room.palette[i*3 + 1];\n        let b = room.palette[i*3 + 2];\n        let swatch = document.createElement('div');\n        swatch.classList.add('swatch');\n        swatch.style.backgroundColor = 'rgb('+r+','+g+','+b+')';\n        swatch.title = i + ':' + 'rgb('+r+','+g+','+b+')';\n        paletteEl.appendChild(swatch);\n      }\n\n      document.body.appendChild(paletteEl);\n    }\n  }\n\n  parseFiles() {\n    if (this.files[INDEX_FILE]) {\n      this.parseIndex();\n    }\n    if (this.files[BUNDLE_FILE]) {\n      this.parseBundle();\n      this.parseRoom(2);\n      this.createPaletteElement(2);\n    }\n  }\n\n  onFileLoaded(filename) {\n    console.log('Loaded', filename, this.files[filename].byteLength);\n\n    if (filename == INDEX_FILE || filename == BUNDLE_FILE) {\n      this.files[filename] = this.decode(this.files[filename], 0x69);\n    }\n\n    this.filesToLoad--;\n\n    if (this.filesToLoad == 0) {\n      console.log('Load done.');\n      this.parseFiles();\n    }\n  }\n\n  loadFile(file) {\n    var reader = new FileReader();\n    var filename = file.name.toLowerCase();\n\t\treader.onload = (event) => {\n      // console.log(event.target);\n      this.files[filename] = event.target.result;\n      this.onFileLoaded(filename);\n\t\t};\n\t  reader.readAsArrayBuffer(file);\n  }\n\n  onDrop(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    var files = event.dataTransfer.files;\n    if (files.length) {\n      this.filesToLoad = files.length;\n      for (var i = 0; i < files.length; i++) {\n        this.loadFile(files[i]);\n      }\n    }\n  }\n\n  onDragEnter(event) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  onDragOver(event) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  handleEvent(event) {\n    if (event.type == 'drop') {\n      this.onDrop(event);\n    }\n    else if (event.type == 'dragover') {\n      this.onDragOver(event);\n    }\n    else if (event.type == 'dragenter') {\n      this.onDragEnter(event);\n    }\n  }\n\n  initEventListeners() {\n    window.addEventListener('drop', this, false);\n    window.addEventListener('dragenter', this, false);\n    window.addEventListener('dragover', this, false);\n  }\n}\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  let app = new App();\n});\n","\nclass BitStream {\n  constructor(stream) {\n    this.stream = stream;\n    this.offset = 0;\n    this.cl = 0;\n  }\n\n  next() {\n    this.byte = this.stream.getUint8();\n    this.bit = this.byte & 1;\n    this.cl = 8;\n  }\n\n  shift() {\n    if (this.cl > 1) {\n      this.byte >>= 1;\n      this.bit = this.byte & 1;\n      this.cl--;\n    } else {\n      this.next();\n    }\n  }\n\n  read(length) {\n    if (this.cl == 0) {\n      // console.log('cl==0');\n      this.next();\n    }\n\n    if (length) {\n      let value = 0;\n      for (var i = 0; i < length; i++) {\n        value |= (this.bit << i);\n        this.shift();\n      }\n      return value;\n    } else {\n      let value = this.bit;\n      this.shift();\n      return value;\n    }\n  }\n}\n\nmodule.exports = BitStream;\n","\nclass Bitmap {\n  constructor(params) {\n    this.width = params.width;\n    this.height = params.height;\n    this.pixels = params.pixels;\n  }\n}\n\nmodule.exports = Bitmap;\n","\nclass BufferStream {\n  constructor(buffer) {\n    this.buffer = buffer;\n    this.view = new DataView(this.buffer);\n    this.offset = 0;\n  }\n\n  get length() {\n    return this.buffer.byteLength;\n  }\n\n  seek(offset=0) {\n    this.offset = offset;\n  }\n  \n  backup() {\n    if (this.offset > 0)\n      this.offset--;\n  }\n\n  getUint8(offset) {\n    if (offset == undefined) {\n      offset = this.offset;\n      this.offset++;\n    }\n    return this.view.getUint8(offset);\n  }\n\n  getUint16(offset, littleEndian=false) {\n    if (offset == undefined) {\n      offset = this.offset;\n      this.offset += 2;\n    }\n    return this.view.getUint16(offset, littleEndian);\n  }\n\n  getUint32(offset, littleEndian=false) {\n    if (offset == undefined) {\n      offset = this.offset;\n      this.offset += 4;\n    }\n    return this.view.getUint32(offset, littleEndian);\n  }\n\n  getUint16LE(offset) {\n    return this.getUint16(offset, true);\n  }\n\n  getUint32LE(offset) {\n    return this.getUint32(offset, true);\n  }\n\n  getBytes(length=1, offset) {\n    if (offset == undefined) {\n      offset = this.offset;\n      this.offset += length;\n    }\n    let bytes = new Uint8Array(length);\n    for (var i = 0; i < length; i++) {\n      bytes[i] = this.view.getUint8(offset + i); //this.getUint8(offset + i);\n    }\n    return bytes;\n  }\n}\n\nmodule.exports = BufferStream;\n","const Bitmap = require('./bitmap');\n\nclass Room {\n  constructor(params) {\n    this.width = params.width;\n    this.height = params.height;\n    this.numObjects = params.numObjects;\n  }\n}\n\nmodule.exports = Room;\n","\nclass Scumm {\n  constructor() {\n    \n  }\n}\n\nmodule.exports = Scumm;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXBwLmpzIiwic3JjL2JpdF9zdHJlYW0uanMiLCJzcmMvYml0bWFwLmpzIiwic3JjL2J1ZmZlcl9zdHJlYW0uanMiLCJzcmMvcm9vbS5qcyIsInNyYy9zY3VtbS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLE1BQU0sUUFBUSxRQUFRLFNBQVIsQ0FBZDtBQUNBLE1BQU0sU0FBUyxRQUFRLFVBQVIsQ0FBZjtBQUNBLE1BQU0sT0FBTyxRQUFRLFFBQVIsQ0FBYjtBQUNBLE1BQU0sZUFBZSxRQUFRLGlCQUFSLENBQXJCO0FBQ0EsTUFBTSxZQUFZLFFBQVEsY0FBUixDQUFsQjs7QUFFQSxNQUFNLGFBQWEsYUFBbkI7QUFDQSxNQUFNLGNBQWMsYUFBcEI7QUFDQTtBQUNBOztBQUVBLE1BQU0sR0FBTixDQUFVO0FBQ1IsZ0JBQWM7QUFDWixZQUFRLEdBQVIsQ0FBWSxLQUFaOztBQUVBLFNBQUssS0FBTCxHQUFhLEVBQWI7QUFDQSxTQUFLLFNBQUwsR0FBaUIsRUFBakI7QUFDQSxTQUFLLFdBQUwsR0FBbUIsRUFBbkI7QUFDQSxTQUFLLGdCQUFMLEdBQXdCLEVBQXhCO0FBQ0EsU0FBSyxLQUFMLEdBQWEsRUFBYjs7QUFFQSxTQUFLLFNBQUwsR0FBaUIsU0FBUyxhQUFULENBQXVCLFFBQXZCLENBQWpCO0FBQ0EsU0FBSyxTQUFMLENBQWUsS0FBZixHQUF1QixHQUF2QjtBQUNBLFNBQUssU0FBTCxDQUFlLE1BQWYsR0FBd0IsR0FBeEI7O0FBRUEsU0FBSyxNQUFMLEdBQWMsU0FBUyxhQUFULENBQXVCLFFBQXZCLENBQWQ7QUFDQSxTQUFLLE1BQUwsQ0FBWSxLQUFaLEdBQW9CLEdBQXBCO0FBQ0EsU0FBSyxNQUFMLENBQVksTUFBWixHQUFxQixHQUFyQjtBQUNBLGFBQVMsSUFBVCxDQUFjLFdBQWQsQ0FBMEIsS0FBSyxNQUEvQjs7QUFFQSxTQUFLLGtCQUFMO0FBQ0Q7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QUFMLENBQVUsUUFBVixDQUFtQixTQUFTLENBQTVCLENBQVgsQ0FEK0IsQ0FDWTtBQUM1QztBQUNELFdBQU8sS0FBUDtBQUNEO0FBOURnQjs7QUFpRW5CLE9BQU8sT0FBUCxHQUFpQixZQUFqQjs7O0FDbEVBLE1BQU0sU0FBUyxRQUFRLFVBQVIsQ0FBZjs7QUFFQSxNQUFNLElBQU4sQ0FBVztBQUNULGNBQVksTUFBWixFQUFvQjtBQUNsQixTQUFLLEtBQUwsR0FBYSxPQUFPLEtBQXBCO0FBQ0EsU0FBSyxNQUFMLEdBQWMsT0FBTyxNQUFyQjtBQUNBLFNBQUssVUFBTCxHQUFrQixPQUFPLFVBQXpCO0FBQ0Q7QUFMUTs7QUFRWCxPQUFPLE9BQVAsR0FBaUIsSUFBakI7Ozs7QUNUQSxNQUFNLEtBQU4sQ0FBWTtBQUNWLGdCQUFjLENBRWI7QUFIUzs7QUFNWixPQUFPLE9BQVAsR0FBaUIsS0FBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfXJldHVybiBlfSkoKSIsImNvbnN0IFNjdW1tID0gcmVxdWlyZSgnLi9zY3VtbScpO1xuY29uc3QgQml0bWFwID0gcmVxdWlyZSgnLi9iaXRtYXAnKTtcbmNvbnN0IFJvb20gPSByZXF1aXJlKCcuL3Jvb20nKTtcbmNvbnN0IEJ1ZmZlclN0cmVhbSA9IHJlcXVpcmUoJy4vYnVmZmVyX3N0cmVhbScpO1xuY29uc3QgQml0U3RyZWFtID0gcmVxdWlyZSgnLi9iaXRfc3RyZWFtJyk7XG5cbmNvbnN0IElOREVYX0ZJTEUgPSAnbW9ua2V5Mi4wMDAnO1xuY29uc3QgQlVORExFX0ZJTEUgPSAnbW9ua2V5Mi4wMDEnO1xuLy8gY29uc3QgSU5ERVhfRklMRSA9ICdtaTJkZW1vLjAwMCc7XG4vLyBjb25zdCBCVU5ETEVfRklMRSA9ICdtaTJkZW1vLjAwMSc7XG5cbmNsYXNzIEFwcCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnNvbGUubG9nKCdBcHAnKTtcblxuICAgIHRoaXMuZmlsZXMgPSBbXTtcbiAgICB0aGlzLnJvb21OYW1lcyA9IFtdO1xuICAgIHRoaXMucm9vbU9mZnNldHMgPSBbXTtcbiAgICB0aGlzLnJvb21CbG9ja09mZnNldHMgPSBbXTtcbiAgICB0aGlzLnJvb21zID0gW107XG5cbiAgICB0aGlzLm9mZnNjcmVlbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHRoaXMub2Zmc2NyZWVuLndpZHRoID0gMzIwO1xuICAgIHRoaXMub2Zmc2NyZWVuLmhlaWdodCA9IDIwMDtcblxuICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdGhpcy5jYW52YXMud2lkdGggPSA2NDA7XG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gNDAwO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xuXG4gICAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGRlY29kZShidWZmZXIsIGVuYz0wKSB7XG4gICAgbGV0IHRlbXAgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcC5sZW5ndGg7IGkrKykge1xuICAgICAgdGVtcFtpXSA9IHRlbXBbaV0gXiBlbmM7XG4gICAgfVxuICAgIHJldHVybiB0ZW1wLmJ1ZmZlcjtcbiAgfVxuXG4gIGdldEJsb2NrVHlwZU5hbWUodWludDMyKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoXG4gICAgICAodWludDMyICYgMHhmZiksXG4gICAgICAoKHVpbnQzMiA+PiA4KSAmIDB4ZmYpLFxuICAgICAgKCh1aW50MzIgPj4gMTYpICYgMHhmZiksXG4gICAgICAoKHVpbnQzMiA+PiAyNCkgJiAweGZmKVxuICAgICk7XG4gIH1cblxuICBwYXJzZUluZGV4KCkge1xuICAgIGlmICghdGhpcy5maWxlc1tJTkRFWF9GSUxFXSkgcmV0dXJuO1xuICAgIGxldCBzdHJlYW0gPSBuZXcgQnVmZmVyU3RyZWFtKHRoaXMuZmlsZXNbSU5ERVhfRklMRV0pO1xuXG4gICAgd2hpbGUgKHN0cmVhbS5vZmZzZXQgPCBzdHJlYW0ubGVuZ3RoKSB7XG4gICAgICBsZXQgdHlwZSA9IHN0cmVhbS5nZXRVaW50MzJMRSgpO1xuICAgICAgbGV0IHNpemUgPSBzdHJlYW0uZ2V0VWludDMyKCk7XG4gICAgICBsZXQgbmFtZSA9IHRoaXMuZ2V0QmxvY2tUeXBlTmFtZSh0eXBlKTtcblxuICAgICAgaWYgKG5hbWUgPT0gJ1JOQU0nKSB7IC8vIFJvb20gbmFtZXMgdGFibGVcbiAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICBsZXQgcm9vbW5vID0gc3RyZWFtLmdldFVpbnQ4KCk7XG4gICAgICAgICAgaWYgKHJvb21ubyA9PSAwKSBicmVhaztcblxuICAgICAgICAgIGxldCBieXRlcyA9IHN0cmVhbS5nZXRCeXRlcyg5KTtcbiAgICAgICAgICB0aGlzLnJvb21OYW1lc1tyb29tbm9dID0gYnl0ZXMucmVkdWNlKChhY2N1bXVsYXRvciwgY3VycmVudFZhbHVlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYWNjdW11bGF0b3IgKyAoY3VycmVudFZhbHVlICE9IDB4ZmYgPyBTdHJpbmcuZnJvbUNoYXJDb2RlKGN1cnJlbnRWYWx1ZSBeIDB4ZmYpIDogJycpO1xuICAgICAgICAgIH0sICcnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnJvb21OYW1lcyk7XG4gICAgICAvLyB9XG4gICAgICAvLyBlbHNlIGlmIChuYW1lID09ICdEUk9PJykge1xuICAgICAgLy8gICBsZXQgbnVtaXRlbXMgPSBzdHJlYW0uZ2V0VWludDE2TEUoKTtcbiAgICAgIC8vICAgbGV0IHJvb21Ob3MgPSBzdHJlYW0uZ2V0Qnl0ZXMoLCBudW1pdGVtcyk7XG4gICAgICAvL1xuICAgICAgLy8gICBsZXQgcm9vbU9mZnNldHMgPSBbXTtcbiAgICAgIC8vICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1pdGVtczsgaSsrKSB7XG4gICAgICAvLyAgICAgbGV0IG9mZnMgPSBzdHJlYW0uZ2V0VWludDMyTEUoKTtcbiAgICAgIC8vICAgICByb29tT2Zmc2V0c1tpXSA9IG9mZnM7XG4gICAgICAvLyAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0cmVhbS5nZXRCeXRlcyhzaXplIC0gOCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0QnVuZGxlU3RyZWFtKCkge1xuICAgIGxldCBmaWxlbmFtZSA9IEJVTkRMRV9GSUxFO1xuICAgIGlmICghdGhpcy5maWxlc1tmaWxlbmFtZV0pIHJldHVybjtcbiAgICBsZXQgc3RyZWFtID0gbmV3IEJ1ZmZlclN0cmVhbSh0aGlzLmZpbGVzW2ZpbGVuYW1lXSk7XG4gICAgcmV0dXJuIHN0cmVhbTtcbiAgfVxuXG4gIHJlYWRCbG9ja0hlYWQoc3RyZWFtKSB7XG4gICAgbGV0IHR5cGUgPSBzdHJlYW0uZ2V0VWludDMyTEUoKTtcbiAgICBsZXQgc2l6ZSA9IHN0cmVhbS5nZXRVaW50MzIoKTtcbiAgICBsZXQgbmFtZSA9IHRoaXMuZ2V0QmxvY2tUeXBlTmFtZSh0eXBlKTtcbiAgICByZXR1cm4geyBuYW1lOiBuYW1lLCB0eXBlOiB0eXBlLCBzaXplOiBzaXplIH07XG4gIH1cblxuICBkZWNvbXByZXNzU3RyaXAoc3RyZWFtLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgbGV0IHBpeGVscyA9IG5ldyBVaW50OEFycmF5KHdpZHRoICogaGVpZ2h0KTtcbiAgICBsZXQgb2Zmc2V0ID0gMDtcblxuICAgIGxldCBjb2RlID0gc3RyZWFtLmdldFVpbnQ4KCk7XG4gICAgbGV0IHNoaWZ0ID0gY29kZSAlIDEwO1xuICAgIC8vIGxldCBtYXNrID0gMHhmZiA+PiAoOCAtIHNoaWZ0KTtcblxuICAgIGxldCBjb2xvciA9IHN0cmVhbS5nZXRVaW50OCgpO1xuXG4gICAgbGV0IGJpdHMgPSBuZXcgQml0U3RyZWFtKHN0cmVhbSk7XG5cbiAgICBjb25zb2xlLmxvZyhjb2RlKTtcblxuICAgIGlmIChjb2RlID49IDB4NDAgJiYgY29kZSA8PSAweDQ0KSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnTWV0aG9kIEIgSG9yaXpvbnRhbCcsIGNvZGUsIHNoaWZ0KTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdDb2xvcicsIGNvbG9yLCAnWycsIHRoaXMucGFsZXR0ZVtjb2xvciozXSwgdGhpcy5wYWxldHRlW2NvbG9yKjMrMV0sIHRoaXMucGFsZXR0ZVtjb2xvciozKzJdLCAnXScpO1xuXG4gICAgICAvL3NjYWItaXNsXG4gICAgICAvLzAxMDEwMTAwWzRdMDExMDExMTBbM10xMTAxMTAxMFsyXTAwMTEwMTAwWzFdMDEwMDExMDFbMF1cblxuICAgICAgLy8gZm9yICh2YXIgaSA9IDA7IGkgPCAxOyBpKyspIHtcbiAgICAgIC8vICAgbGV0IGIgPSBiaXRzLnJlYWQoMTYpO1xuICAgICAgLy8gICBjb25zb2xlLmxvZyhiLnRvU3RyaW5nKDIpLnBhZFN0YXJ0KDE2LCAnMCcpKTtcbiAgICAgIC8vIH1cblxuICAgICAgd2hpbGUgKG9mZnNldCA8IHdpZHRoICogaGVpZ2h0KSB7XG4gICAgICAgIHBpeGVsc1tvZmZzZXQrK10gPSBjb2xvcjtcblxuICAgICAgICBpZiAoYml0cy5yZWFkKCkpIHtcbiAgICAgICAgICBpZiAoYml0cy5yZWFkKCkpIHtcbiAgICAgICAgICAgIC8vIGNvbW1hbmRcbiAgICAgICAgICAgIGxldCBjID0gYml0cy5yZWFkKDMpO1xuXG4gICAgICAgICAgICBpZiAoYyA+PSAwICYmIGMgPD0gMykge1xuICAgICAgICAgICAgICBjb2xvciArPSA0IC0gYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGMgPT0gNCkge1xuICAgICAgICAgICAgICAvLyBydW5cbiAgICAgICAgICAgICAgbGV0IHJ1biA9IGJpdHMucmVhZCg4KTtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBydW47IGkrKykge1xuICAgICAgICAgICAgICAgIHBpeGVsc1tvZmZzZXQrK10gPSBjb2xvcjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYyA+PSA1ICYmIGMgPD0gNykge1xuICAgICAgICAgICAgICBjb2xvciAtPSBjIC0gNDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gcmVhZCBhIHBhbGV0dGUgaW5kZXhcbiAgICAgICAgICAgIGNvbG9yID0gYml0cy5yZWFkKHNoaWZ0KTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCduZXcgaW5kZXgnLCBjb2xvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHBpeGVscztcbiAgfVxuXG4gIGRyYXdTdHJpcChwaXhlbHMsIHBvcywgd2lkdGgsIGhlaWdodCkge1xuICAgIC8vIGNvbnNvbGUubG9nKCdkcmF3U3RyaXAnLCBwb3MsIHdpZHRoLCBoZWlnaHQpO1xuICAgIGxldCBjdHggPSB0aGlzLm9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGxldCBpbWFnZURhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKHBvcywgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHkgKiB3aWR0aCArIHg7XG4gICAgICAgIGxldCBjb2xvciA9IHBpeGVsc1tpbmRleF07XG4gICAgICAgIGlmIChjb2xvcikge1xuICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICogNCArIDBdID0gdGhpcy5wYWxldHRlW2NvbG9yICogMyArIDBdO1xuICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICogNCArIDFdID0gdGhpcy5wYWxldHRlW2NvbG9yICogMyArIDFdO1xuICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICogNCArIDJdID0gdGhpcy5wYWxldHRlW2NvbG9yICogMyArIDJdO1xuICAgICAgICAgIGltYWdlRGF0YS5kYXRhW2luZGV4ICogNCArIDNdID0gMjU1O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGN0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCBwb3MsIDApO1xuXG4gICAgY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgY3R4LmRyYXdJbWFnZSh0aGlzLm9mZnNjcmVlbiwgMCwgMCwgMzIwKjIsIDIwMCoyKTtcbiAgfVxuXG4gIHBhcnNlUm9vbShudW0pIHtcbiAgICBjb25zb2xlLmxvZygnUGFyc2luZyByb29tJywgbnVtLCAnLi4uJyk7XG4gICAgbGV0IHN0cmVhbSA9IHRoaXMuZ2V0QnVuZGxlU3RyZWFtKCk7XG4gICAgbGV0IG9mZnNldCA9IHRoaXMucm9vbU9mZnNldHNbbnVtXTtcblxuICAgIHN0cmVhbS5zZWVrKG9mZnNldCk7XG5cbiAgICAvLyBSZWFkIGFuZCBzdG9yZSB0aGUgYmxvY2sgb2Zmc2V0cyBSTUhELCBDTFVUIGV0Y1xuXG4gICAgbGV0IGJsb2NrID0gdGhpcy5yZWFkQmxvY2tIZWFkKHN0cmVhbSk7XG4gICAgbGV0IGVuZCA9IG9mZnNldCArIGJsb2NrLnNpemU7XG4gICAgbGV0IGJsb2NrcyA9IHt9O1xuXG4gICAgd2hpbGUgKHN0cmVhbS5vZmZzZXQgPCBlbmQpIHtcbiAgICAgIGxldCBibG9jayA9IHRoaXMucmVhZEJsb2NrSGVhZChzdHJlYW0pO1xuXG4gICAgICBsZXQgaW5mbyA9IHtcbiAgICAgICAgbmFtZTogYmxvY2submFtZSxcbiAgICAgICAgc2l6ZTogYmxvY2suc2l6ZSxcbiAgICAgICAgb2Zmc2V0OiBzdHJlYW0ub2Zmc2V0IC0gOFxuICAgICAgfTtcblxuICAgICAgaWYgKGJsb2Nrc1tibG9jay5uYW1lXSkge1xuICAgICAgICBpZiAoYmxvY2tzW2Jsb2NrLm5hbWVdIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICBibG9ja3NbYmxvY2submFtZV0ucHVzaChpbmZvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBibG9ja3NbYmxvY2submFtZV0gPSBbIGJsb2Nrc1tibG9jay5uYW1lXSwgaW5mbyBdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBibG9ja3NbYmxvY2submFtZV0gPSBpbmZvO1xuICAgICAgfVxuXG4gICAgICBzdHJlYW0uZ2V0Qnl0ZXMoYmxvY2suc2l6ZSAtIDgpO1xuICAgIH1cblxuICAgIC8vIGNvbnNvbGUubG9nKGJsb2Nrcyk7XG5cbiAgICB0aGlzLnJvb21CbG9ja09mZnNldHNbbnVtXSA9IGJsb2NrcztcblxuICAgIC8vIFJlYWQgaGVhZGVyIGRhdGEgLSB3aWR0aCwgaGVpZ2h0IGV0Y1xuXG4gICAgc3RyZWFtLnNlZWsoYmxvY2tzWydSTUhEJ10ub2Zmc2V0ICsgOCk7XG4gICAgbGV0IHdpZHRoID0gc3RyZWFtLmdldFVpbnQxNkxFKCk7XG4gICAgbGV0IGhlaWdodCA9IHN0cmVhbS5nZXRVaW50MTZMRSgpO1xuICAgIGxldCBudW1PYmplY3RzID0gc3RyZWFtLmdldFVpbnQxNkxFKCk7XG5cbiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnJvb21OYW1lc1tudW1dLCB3aWR0aCwgaGVpZ2h0LCBudW1PYmplY3RzKTtcblxuICAgIGxldCByb29tID0gbmV3IFJvb20oeyB3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0LCBudW1PYmplY3RzOiBudW1PYmplY3RzIH0pO1xuXG4gICAgLy8gUmVhZCBwYWxldHRlIGVudHJpZXNcblxuICAgIGlmIChibG9ja3NbJ0NMVVQnXSkge1xuICAgICAgc3RyZWFtLnNlZWsoYmxvY2tzWydDTFVUJ10ub2Zmc2V0ICsgOCk7XG5cbiAgICAgIHJvb20ucGFsZXR0ZSA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgICAgICBsZXQgciA9IHN0cmVhbS5nZXRVaW50OCgpO1xuICAgICAgICBsZXQgZyA9IHN0cmVhbS5nZXRVaW50OCgpO1xuICAgICAgICBsZXQgYiA9IHN0cmVhbS5nZXRVaW50OCgpO1xuICAgICAgICByb29tLnBhbGV0dGUucHVzaChyLCBnLCBiKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wYWxldHRlID0gcm9vbS5wYWxldHRlO1xuICAgIH1cblxuICAgIC8vIERlY29kZSBiYWNrZ3JvdW5kIGltYWdlXG5cbiAgICBpZiAoYmxvY2tzWydSTUlNJ10pIHtcbiAgICAgIHN0cmVhbS5zZWVrKGJsb2Nrc1snUk1JTSddLm9mZnNldCArIDgpO1xuXG4gICAgICBsZXQgYmxvY2sgPSB0aGlzLnJlYWRCbG9ja0hlYWQoc3RyZWFtKTtcbiAgICAgIGxldCBudW16YnVmID0gc3RyZWFtLmdldFVpbnQxNkxFKCk7XG5cbiAgICAgIGlmIChibG9jay5uYW1lID09ICdSTUlIJykge1xuICAgICAgICBsZXQgYmxvY2sgPSB0aGlzLnJlYWRCbG9ja0hlYWQoc3RyZWFtKTtcblxuICAgICAgICBpZiAoYmxvY2submFtZSA9PSAnSU0wMCcpIHtcbiAgICAgICAgICBsZXQgU01BUG9mZnMgPSBzdHJlYW0ub2Zmc2V0O1xuICAgICAgICAgIGxldCBibG9jayA9IHRoaXMucmVhZEJsb2NrSGVhZChzdHJlYW0pO1xuXG4gICAgICAgICAgaWYgKGJsb2NrLm5hbWUgPT0gJ1NNQVAnKSB7XG4gICAgICAgICAgICBsZXQgb2Zmc2V0cyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByb29tLndpZHRoIC8gODsgaSsrKSB7XG4gICAgICAgICAgICAgIGxldCBvZmZzID0gc3RyZWFtLmdldFVpbnQzMkxFKCk7XG4gICAgICAgICAgICAgIG9mZnNldHMucHVzaChvZmZzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdvZmZzZXRzJywgb2Zmc2V0c1swXSwgb2Zmc2V0c1sxXSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJvb20ud2lkdGggLyA4OyBpKyspIHtcbiAgICAgICAgICAgICAgc3RyZWFtLnNlZWsoU01BUG9mZnMgKyBvZmZzZXRzW2ldKTtcbiAgICAgICAgICAgICAgbGV0IHBpeGVscyA9IHRoaXMuZGVjb21wcmVzc1N0cmlwKHN0cmVhbSwgOCwgcm9vbS5oZWlnaHQpO1xuICAgICAgICAgICAgICB0aGlzLmRyYXdTdHJpcChwaXhlbHMsIGkqOCwgOCwgcm9vbS5oZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMucm9vbXNbbnVtXSA9IHJvb207XG4gIH1cblxuICBwYXJzZUJ1bmRsZShudW0pIHtcbiAgICBsZXQgc3RyZWFtID0gdGhpcy5nZXRCdW5kbGVTdHJlYW0oKTtcbiAgICBsZXQgYmxvY2sgPSB0aGlzLnJlYWRCbG9ja0hlYWQoc3RyZWFtKTtcblxuICAgIGxldCBvZmZzZXQgPSA4O1xuXG4gICAgaWYgKGJsb2NrLm5hbWUgPT0gJ0xFQ0YnKSB7XG4gICAgICBsZXQgYmxvY2sgPSB0aGlzLnJlYWRCbG9ja0hlYWQoc3RyZWFtKTtcblxuICAgICAgaWYgKGJsb2NrLm5hbWUgPT0gJ0xPRkYnKSB7XG4gICAgICAgIGxldCBudW1yb29tcyA9IHN0cmVhbS5nZXRVaW50OCgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bXJvb21zOyBpKyspIHtcbiAgICAgICAgICBsZXQgcm9vbSA9IHN0cmVhbS5nZXRVaW50OCgpO1xuICAgICAgICAgIGxldCBvZmZzID0gc3RyZWFtLmdldFVpbnQzMkxFKCk7XG4gICAgICAgICAgdGhpcy5yb29tT2Zmc2V0c1tyb29tXSA9IG9mZnM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjcmVhdGVQYWxldHRlRWxlbWVudChudW0pIHtcbiAgICBsZXQgcm9vbSA9IHRoaXMucm9vbXNbbnVtXTtcblxuICAgIGlmIChyb29tICYmIHJvb20ucGFsZXR0ZSkge1xuICAgICAgbGV0IHBhbGV0dGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgcGFsZXR0ZUVsLmNsYXNzTGlzdC5hZGQoJ3BhbGV0dGUnKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgICAgICBsZXQgciA9IHJvb20ucGFsZXR0ZVtpKjNdO1xuICAgICAgICBsZXQgZyA9IHJvb20ucGFsZXR0ZVtpKjMgKyAxXTtcbiAgICAgICAgbGV0IGIgPSByb29tLnBhbGV0dGVbaSozICsgMl07XG4gICAgICAgIGxldCBzd2F0Y2ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgc3dhdGNoLmNsYXNzTGlzdC5hZGQoJ3N3YXRjaCcpO1xuICAgICAgICBzd2F0Y2guc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYignK3IrJywnK2crJywnK2IrJyknO1xuICAgICAgICBzd2F0Y2gudGl0bGUgPSBpICsgJzonICsgJ3JnYignK3IrJywnK2crJywnK2IrJyknO1xuICAgICAgICBwYWxldHRlRWwuYXBwZW5kQ2hpbGQoc3dhdGNoKTtcbiAgICAgIH1cblxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwYWxldHRlRWwpO1xuICAgIH1cbiAgfVxuXG4gIHBhcnNlRmlsZXMoKSB7XG4gICAgaWYgKHRoaXMuZmlsZXNbSU5ERVhfRklMRV0pIHtcbiAgICAgIHRoaXMucGFyc2VJbmRleCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5maWxlc1tCVU5ETEVfRklMRV0pIHtcbiAgICAgIHRoaXMucGFyc2VCdW5kbGUoKTtcbiAgICAgIHRoaXMucGFyc2VSb29tKDIpO1xuICAgICAgdGhpcy5jcmVhdGVQYWxldHRlRWxlbWVudCgyKTtcbiAgICB9XG4gIH1cblxuICBvbkZpbGVMb2FkZWQoZmlsZW5hbWUpIHtcbiAgICBjb25zb2xlLmxvZygnTG9hZGVkJywgZmlsZW5hbWUsIHRoaXMuZmlsZXNbZmlsZW5hbWVdLmJ5dGVMZW5ndGgpO1xuXG4gICAgaWYgKGZpbGVuYW1lID09IElOREVYX0ZJTEUgfHwgZmlsZW5hbWUgPT0gQlVORExFX0ZJTEUpIHtcbiAgICAgIHRoaXMuZmlsZXNbZmlsZW5hbWVdID0gdGhpcy5kZWNvZGUodGhpcy5maWxlc1tmaWxlbmFtZV0sIDB4NjkpO1xuICAgIH1cblxuICAgIHRoaXMuZmlsZXNUb0xvYWQtLTtcblxuICAgIGlmICh0aGlzLmZpbGVzVG9Mb2FkID09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdMb2FkIGRvbmUuJyk7XG4gICAgICB0aGlzLnBhcnNlRmlsZXMoKTtcbiAgICB9XG4gIH1cblxuICBsb2FkRmlsZShmaWxlKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgdmFyIGZpbGVuYW1lID0gZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0cmVhZGVyLm9ubG9hZCA9IChldmVudCkgPT4ge1xuICAgICAgLy8gY29uc29sZS5sb2coZXZlbnQudGFyZ2V0KTtcbiAgICAgIHRoaXMuZmlsZXNbZmlsZW5hbWVdID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcbiAgICAgIHRoaXMub25GaWxlTG9hZGVkKGZpbGVuYW1lKTtcblx0XHR9O1xuXHQgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcbiAgfVxuXG4gIG9uRHJvcChldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgZmlsZXMgPSBldmVudC5kYXRhVHJhbnNmZXIuZmlsZXM7XG4gICAgaWYgKGZpbGVzLmxlbmd0aCkge1xuICAgICAgdGhpcy5maWxlc1RvTG9hZCA9IGZpbGVzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5sb2FkRmlsZShmaWxlc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25EcmFnRW50ZXIoZXZlbnQpIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgb25EcmFnT3ZlcihldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBoYW5kbGVFdmVudChldmVudCkge1xuICAgIGlmIChldmVudC50eXBlID09ICdkcm9wJykge1xuICAgICAgdGhpcy5vbkRyb3AoZXZlbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudC50eXBlID09ICdkcmFnb3ZlcicpIHtcbiAgICAgIHRoaXMub25EcmFnT3ZlcihldmVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50LnR5cGUgPT0gJ2RyYWdlbnRlcicpIHtcbiAgICAgIHRoaXMub25EcmFnRW50ZXIoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGluaXRFdmVudExpc3RlbmVycygpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMsIGZhbHNlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgdGhpcywgZmFsc2UpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMsIGZhbHNlKTtcbiAgfVxufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgbGV0IGFwcCA9IG5ldyBBcHAoKTtcbn0pO1xuIiwiXG5jbGFzcyBCaXRTdHJlYW0ge1xuICBjb25zdHJ1Y3RvcihzdHJlYW0pIHtcbiAgICB0aGlzLnN0cmVhbSA9IHN0cmVhbTtcbiAgICB0aGlzLm9mZnNldCA9IDA7XG4gICAgdGhpcy5jbCA9IDA7XG4gIH1cblxuICBuZXh0KCkge1xuICAgIHRoaXMuYnl0ZSA9IHRoaXMuc3RyZWFtLmdldFVpbnQ4KCk7XG4gICAgdGhpcy5iaXQgPSB0aGlzLmJ5dGUgJiAxO1xuICAgIHRoaXMuY2wgPSA4O1xuICB9XG5cbiAgc2hpZnQoKSB7XG4gICAgaWYgKHRoaXMuY2wgPiAxKSB7XG4gICAgICB0aGlzLmJ5dGUgPj49IDE7XG4gICAgICB0aGlzLmJpdCA9IHRoaXMuYnl0ZSAmIDE7XG4gICAgICB0aGlzLmNsLS07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubmV4dCgpO1xuICAgIH1cbiAgfVxuXG4gIHJlYWQobGVuZ3RoKSB7XG4gICAgaWYgKHRoaXMuY2wgPT0gMCkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ2NsPT0wJyk7XG4gICAgICB0aGlzLm5leHQoKTtcbiAgICB9XG5cbiAgICBpZiAobGVuZ3RoKSB7XG4gICAgICBsZXQgdmFsdWUgPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZSB8PSAodGhpcy5iaXQgPDwgaSk7XG4gICAgICAgIHRoaXMuc2hpZnQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHZhbHVlID0gdGhpcy5iaXQ7XG4gICAgICB0aGlzLnNoaWZ0KCk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQml0U3RyZWFtO1xuIiwiXG5jbGFzcyBCaXRtYXAge1xuICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICB0aGlzLndpZHRoID0gcGFyYW1zLndpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gcGFyYW1zLmhlaWdodDtcbiAgICB0aGlzLnBpeGVscyA9IHBhcmFtcy5waXhlbHM7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBCaXRtYXA7XG4iLCJcbmNsYXNzIEJ1ZmZlclN0cmVhbSB7XG4gIGNvbnN0cnVjdG9yKGJ1ZmZlcikge1xuICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuICAgIHRoaXMudmlldyA9IG5ldyBEYXRhVmlldyh0aGlzLmJ1ZmZlcik7XG4gICAgdGhpcy5vZmZzZXQgPSAwO1xuICB9XG5cbiAgZ2V0IGxlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgfVxuXG4gIHNlZWsob2Zmc2V0PTApIHtcbiAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcbiAgfVxuICBcbiAgYmFja3VwKCkge1xuICAgIGlmICh0aGlzLm9mZnNldCA+IDApXG4gICAgICB0aGlzLm9mZnNldC0tO1xuICB9XG5cbiAgZ2V0VWludDgob2Zmc2V0KSB7XG4gICAgaWYgKG9mZnNldCA9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9mZnNldCA9IHRoaXMub2Zmc2V0O1xuICAgICAgdGhpcy5vZmZzZXQrKztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudmlldy5nZXRVaW50OChvZmZzZXQpO1xuICB9XG5cbiAgZ2V0VWludDE2KG9mZnNldCwgbGl0dGxlRW5kaWFuPWZhbHNlKSB7XG4gICAgaWYgKG9mZnNldCA9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9mZnNldCA9IHRoaXMub2Zmc2V0O1xuICAgICAgdGhpcy5vZmZzZXQgKz0gMjtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudmlldy5nZXRVaW50MTYob2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuICB9XG5cbiAgZ2V0VWludDMyKG9mZnNldCwgbGl0dGxlRW5kaWFuPWZhbHNlKSB7XG4gICAgaWYgKG9mZnNldCA9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9mZnNldCA9IHRoaXMub2Zmc2V0O1xuICAgICAgdGhpcy5vZmZzZXQgKz0gNDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudmlldy5nZXRVaW50MzIob2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuICB9XG5cbiAgZ2V0VWludDE2TEUob2Zmc2V0KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VWludDE2KG9mZnNldCwgdHJ1ZSk7XG4gIH1cblxuICBnZXRVaW50MzJMRShvZmZzZXQpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRVaW50MzIob2Zmc2V0LCB0cnVlKTtcbiAgfVxuXG4gIGdldEJ5dGVzKGxlbmd0aD0xLCBvZmZzZXQpIHtcbiAgICBpZiAob2Zmc2V0ID09IHVuZGVmaW5lZCkge1xuICAgICAgb2Zmc2V0ID0gdGhpcy5vZmZzZXQ7XG4gICAgICB0aGlzLm9mZnNldCArPSBsZW5ndGg7XG4gICAgfVxuICAgIGxldCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgYnl0ZXNbaV0gPSB0aGlzLnZpZXcuZ2V0VWludDgob2Zmc2V0ICsgaSk7IC8vdGhpcy5nZXRVaW50OChvZmZzZXQgKyBpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ5dGVzO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQnVmZmVyU3RyZWFtO1xuIiwiY29uc3QgQml0bWFwID0gcmVxdWlyZSgnLi9iaXRtYXAnKTtcblxuY2xhc3MgUm9vbSB7XG4gIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgIHRoaXMud2lkdGggPSBwYXJhbXMud2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSBwYXJhbXMuaGVpZ2h0O1xuICAgIHRoaXMubnVtT2JqZWN0cyA9IHBhcmFtcy5udW1PYmplY3RzO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUm9vbTtcbiIsIlxuY2xhc3MgU2N1bW0ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNjdW1tO1xuIl19"}